<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>长期总结 - Linux日志查询命令 | Cylon's Collection</title><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NP3JNCPR" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><meta name=keywords content="nginx,sed"><meta name=description content="sed 语法
bash 1 sed '/过滤的内容/处理的命令' 文件 参数 注释说明 n 取消sed默认的输出 i 替换文件内容 r 如果有特殊字符不用转义（正则） g 全局替换 d 删除 p print打印 # 为分隔符可以用其他符号替换（最好用$ @ /）替换内容中如果有分隔符，需要将分隔符替换为别的分隔符，如果不换可将内容转义 s 为search g为globla全局替换，不加的话只替换一列
打印
bash 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 $ sed -n '2p' 3.txt 1 $ sed -n '1,20p' 3.txt 0 1 2 3 4 5 6 8 9 10 11 12 13 14 15 16 17 18 19 问：已知一个文件内容为 aaa bbb ccc lisi 请打印出不包含lisi的内容"><meta name=author content="cylon"><link rel=canonical href=https://www.oomkill.com/2016/08/awesome-linux-log-command/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://www.oomkill.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.oomkill.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.oomkill.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.oomkill.com/favicon.ico><link rel=mask-icon href=https://www.oomkill.com/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://www.oomkill.com/2016/08/awesome-linux-log-command/><noscript><style>#theme-toggle,#top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link crossorigin=anonymous href=/assets/css/pe.min.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/pe.min.js></script><link rel=stylesheet href=https://cdn.staticfile.net/font-awesome/6.5.1/css/all.min.css><link rel=stylesheet href=https://cdn.staticfile.net/font-awesome/6.5.1/css/v4-shims.min.css><script id=MathJax-script async src=https://cdn.staticfile.net/mathjax/3.2.2/es5/tex-chtml.js></script><script>MathJax={tex:{displayMath:[["$$","$$"]],inlineMath:[["\\$","\\$"]]}}</script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-NP3JNCPR")</script><meta property="og:title" content="长期总结 - Linux日志查询命令"><meta property="og:description" content="sed 语法
bash 1 sed '/过滤的内容/处理的命令' 文件 参数 注释说明 n 取消sed默认的输出 i 替换文件内容 r 如果有特殊字符不用转义（正则） g 全局替换 d 删除 p print打印 # 为分隔符可以用其他符号替换（最好用$ @ /）替换内容中如果有分隔符，需要将分隔符替换为别的分隔符，如果不换可将内容转义 s 为search g为globla全局替换，不加的话只替换一列
打印
bash 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 $ sed -n '2p' 3.txt 1 $ sed -n '1,20p' 3.txt 0 1 2 3 4 5 6 8 9 10 11 12 13 14 15 16 17 18 19 问：已知一个文件内容为 aaa bbb ccc lisi 请打印出不包含lisi的内容"><meta property="og:type" content="article"><meta property="og:url" content="https://www.oomkill.com/2016/08/awesome-linux-log-command/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-08-12T00:00:00+00:00"><meta property="article:modified_time" content="2023-01-24T23:00:36+08:00"><meta property="og:site_name" content="Cylon's Collection"><meta name=twitter:card content="summary"><meta name=twitter:title content="长期总结 - Linux日志查询命令"><meta name=twitter:description content="sed 语法
bash 1 sed '/过滤的内容/处理的命令' 文件 参数 注释说明 n 取消sed默认的输出 i 替换文件内容 r 如果有特殊字符不用转义（正则） g 全局替换 d 删除 p print打印 # 为分隔符可以用其他符号替换（最好用$ @ /）替换内容中如果有分隔符，需要将分隔符替换为别的分隔符，如果不换可将内容转义 s 为search g为globla全局替换，不加的话只替换一列
打印
bash 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 $ sed -n '2p' 3.txt 1 $ sed -n '1,20p' 3.txt 0 1 2 3 4 5 6 8 9 10 11 12 13 14 15 16 17 18 19 问：已知一个文件内容为 aaa bbb ccc lisi 请打印出不包含lisi的内容"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.oomkill.com/posts/"},{"@type":"ListItem","position":2,"name":"长期总结 - Linux日志查询命令","item":"https://www.oomkill.com/2016/08/awesome-linux-log-command/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"长期总结 - Linux日志查询命令","name":"长期总结 - Linux日志查询命令","description":"sed 语法\nbash 1 sed \u0026#39;/过滤的内容/处理的命令\u0026#39; 文件 参数 注释说明 n 取消sed默认的输出 i 替换文件内容 r 如果有特殊字符不用转义（正则） g 全局替换 d 删除 p print打印 # 为分隔符可以用其他符号替换（最好用$ @ /）替换内容中如果有分隔符，需要将分隔符替换为别的分隔符，如果不换可将内容转义 s 为search g为globla全局替换，不加的话只替换一列\n打印\nbash 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 $ sed -n \u0026#39;2p\u0026#39; 3.txt 1 $ sed -n \u0026#39;1,20p\u0026#39; 3.txt 0 1 2 3 4 5 6 8 9 10 11 12 13 14 15 16 17 18 19 问：已知一个文件内容为 aaa bbb ccc lisi 请打印出不包含lisi的内容","keywords":["nginx","sed"],"articleBody":"sed 语法\nbash 1 sed '/过滤的内容/处理的命令' 文件 参数 注释说明 n 取消sed默认的输出 i 替换文件内容 r 如果有特殊字符不用转义（正则） g 全局替换 d 删除 p print打印 # 为分隔符可以用其他符号替换（最好用$ @ /）替换内容中如果有分隔符，需要将分隔符替换为别的分隔符，如果不换可将内容转义 s 为search g为globla全局替换，不加的话只替换一列\n打印\nbash 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 $ sed -n '2p' 3.txt 1 $ sed -n '1,20p' 3.txt 0 1 2 3 4 5 6 8 9 10 11 12 13 14 15 16 17 18 19 问：已知一个文件内容为 aaa bbb ccc lisi 请打印出不包含lisi的内容\n文件原内容\nbash 1 2 3 4 5 6 7 8 9 10 11 12 13 $ cat 1.txt -bash: ech: command not found -bash: ech: command not found -bash: ech: command not found dasda aaa bbb ccc ddd eee fff ggg 替换功能：\nbash 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 $ sed -i 's#aaa#cylon#g' 1.txt $ cat 1.txt -bash: ech: command not found -bash: ech: command not found -bash: ech: command not found dasda cylon bbb ccc ddd eee fff ggg 默认不加参数会将文件原内容打印再将符合的内容打印\nbash 1 2 3 4 5 6 7 8 9 10 11 12 13 14 $ sed '/aaa/p' 1.txt -bash: ech: command not found -bash: ech: command not found -bash: ech: command not found dasda aaa aaa bbb ccc ddd eee fff ggg 在指定文件中指定行插入数据\nbash 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 $ cat test.txt 1 2 3 4 5 # $为行尾 a\\为行后追加 i\\为行前追加 c\\为替换 不加$为行首 $ sed -i \"3a zhangsan\" test.txt $ cat test.txt 1 2 3 zhangsan 4 -n取消默认的输出\nbash 1 2 $ sed -n '/aaa/p' 1.txt aaa 将符合的内容删除后输出，并不操作文件\nbash 1 2 3 4 5 6 7 8 9 10 11 12 $ sed '/aaa/d' 1.txt -bash: ech: command not found -bash: ech: command not found -bash: ech: command not found dasda bbb ccc ddd eee fff ggg 删除文件中一部分内容\nbash 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # 删除首行 sed '1d' nginx.conf # 删除1-102行 sed '1,102d' nginx.conf # 正则表达式 # 删除每行中 on sed '/on/d' nginx.conf # 删除偶数行删除偶数行 sed '0~2d' nginx.conf # 删除奇数行 sed '1~2d' nginx.conf wc 参数 说明 c 统计字节数 l 统计行数 m 统计字符数，不能与c一起用 w 统计字数，一个字被定义为由空白、跳格、或换行字符分割的字符串 L 打印最长行的字符数量 –help 帮助信息 –version 版本信息 bash 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 $ cat -n a.html 1 000 2 111 3 222 4 333 5 444 6 555 7 666 8 777 9 888 10 999 11 aaa 12 bbb 13 ccc 14 ddd 15 eee 16 $ wc -c a.html 61 a.html $ wc -l a.html 16 a.html $ wc -w a.html 15 a.html $ wc -L a.html 3 a.html sort ★★★★ 将文件进行排序，并将排序结果标准输出。sort命令既可以从特定的文件，也可以从stdin中获取输入\n参数选项 注释说明 -b 忽略每行前面开始出的空格字符； -c 检查文件是否已经按照顺序排序； -d 排序时，处理英文字母、数字及空格字符外，忽略其他的字符； -f 排序时，将小写字母视为大写字母； -n 依照数值的大小排序 -r 以相反的顺序来排序 实例：sort将 文件/文本 的每一行作为一个单位，相互比较，比较原则是从首字符向后，依次按ASCII码值进行比较，最后将他们按升序输出。\nbash 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 $ cat sort.txt aaa:10:1.1 ccc:30:3.3 ddd:40:4.4 bbb:20:2.2 eee:50:5.5 eee:50:5.5 $ sort sort.txt aaa:10:1.1 bbb:20:2.2 ccc:30:3.3 ddd:40:4.4 eee:50:5.5 eee:50:5.5 忽略相同行使用-u选项或者uniq：\nbash 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 $ cat sort.txt aaa:10:1.1 ccc:30:3.3 ddd:40:4.4 bbb:20:2.2 eee:50:5.5 eee:50:5.5 $ sort -u sort.txt aaa:10:1.1 bbb:20:2.2 ccc:30:3.3 ddd:40:4.4 eee:50:5.5 # $ uniq sort.txt aaa:10:1.1 ccc:30:3.3 ddd:40:4.4 bbb:20:2.2 eee:50:5.5 sort的-n、-r、-k、-t选项的使用：\nbash 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 $ cat sort.txt AAA:BB:CC aaa:30:1.6 ccc:50:3.3 ddd:20:4.2 bbb:10:2.5 eee:40:5.4 eee:60:5.1 # 将BB列按照数字从小到大顺序排列 $ sort -nk 2 -t: sort.txt AAA:BB:CC bbb:10:2.5 ddd:20:4.2 aaa:30:1.6 eee:40:5.4 ccc:50:3.3 eee:60:5.1 # 将CC列数字从大到小顺序排列 $ sort -nrk 3 -t: sort.txt eee:40:5.4 eee:60:5.1 ddd:20:4.2 ccc:50:3.3 bbb:10:2.5 aaa:30:1.6 AAA:BB:CC # -n是按照数字大小排序，-r是以相反顺序，-k是指定需要排序的栏位，-t指定栏位分隔符为冒号 uniq 用于报告或忽略文件中的重复行，一般与sort命令结合使用\n参数选项 注释说明 -c 在每行前面显示改行重复的次数 -d 仅打印重复出现的行 -u 仅打印不重复的行 实例：删除重复行\nbash 1 2 3 4 5 6 7 8 9 10 11 12 $ uniq a.txt a b c d e f g h i g k 在文件中找出重复的行：\nbash 1 sort file.txt | uniq -d 查找重复次数\nbash 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 $ uniq -c a.txt 5 a 1 b 2 c 2 d 1 e 1 f 1 g 3 h 2 i 1 g 1 k $ uniq -d a.txt a c d h i $ uniq -u a.txt b e f g g k cut 用来显示行中的指定部分，删除文件中指定字段。cut经常用来显示文件的内容\n参数选项 注释说明 -b 以字节为单位进行分割。这些字节位置将忽略多字节字符边界，除非也指定了 -n 标志。 -c 以字符为单位进行分割 -f 与-d一起使用，取第几列 -d 指定分隔符 实例\nbash 1 2 3 4 5 $ cat 1.log i am a protester myqq is 1112222 $ cut -d \" \" -f4,7 1.log protester 1112222 以字节取，我们想去who命令的第三个字节 bash 1 2 3 4 5 6 7 8 $ who root pts/0 2010-02-02 04:09 (192.168.88.1) root pts/1 2010-02-02 08:34 (192.168.88.1) lc pts/2 2010-02-02 08:44 (192.168.88.1) $ who|cut -b 3 o o 取第1、2、3和第23个字节 bash 1 2 3 4 $ who|cut -b 1-3,23 roo2 roo2 lc 2 如果取中文的话，-c 与 -b就有差异了，-c取的是字节，而-b取得是8位2进制来计算输出的是乱码或空 bash 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 $ cat a.txt 星期一 星期二 星期三 星期四 星期五 星期六 星期日 $ cut -b 3 a.txt � � $ cut a.txt -c 3 一 二 三 四 五 六 日 grep Global search Regular Expression(RE) and Print out the line，全面搜索正则表达式并把行打印出来；是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来。\n过滤，将想要的和不想要的去除\n参数 说明 ==-E== 同egrep同时过滤多个字符串，使grep可以使用正则表达式 -v 翻转查找，查找除了匹配到结果之外的信息 -B Num 除了显示匹配的一行之外，并显示该行之前的num行 -A Num 除了显示匹配的一行之外，并显示改行之后的num行 -C Num 除了显示匹配的一行之外，并显示改行之前后各num行 -o 输出匹配字符，而不是默认的整行输出 -i 不区分大小写 -n 讲匹配出的结果在文件所在的行号打印 -c 打印匹配到的行数 -H 在匹配到符合行之前打印文件名 –color=auto 给匹配倒的字符串加颜色（不是整行。关键字高亮显示） 实例\n显示/etc/services 下3306和1521 端口信息 bash 1 2 3 4 5 $ grep -E \"3306|1521\" /etc/services mysql 3306/tcp # MySQL mysql 3306/udp # MySQL ncube-lm 1521/tcp # nCube License Manager ncube-lm 1521/udp # nCube License Manager 过滤出文件内指定字符串 bash 1 2 3 4 5 6 7 $ cat text.txt zhangsan lisi oldbl $ grep \"lisi\" text.txt lisi 排除指定字符 bash 1 2 3 4 5 6 $ grep -v \"lisi\" text.txt zhangsan oldbl $ grep -n \"555\" a.html 6:555 一个文件有100行，只看20~30行 bash 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 # 方法1 $ grep 30 -B 10 test.txt 20 21 22 23 24 25 26 27 28 29 30 # 方法2 $ head -30 3.txt|tail -11 20 21 22 23 24 25 26 27 28 29 30 列出文件名 bash 1 2 3 $ grep -H root /etc/passwd /etc/passwd:root:x:0:0:root:/root:/bin/bash /etc/passwd:operator:x:11:0:operator:/root:/sbin/nologin 日志查询中常用命令 打印一段时间的日志\nbash 1 sed -n '/2019-12-28 11:26/,/2019-12-28 12:13/p' nohup.out 输出日志文件中的某个日期中的ERROR的行\nbash 1 sed -n '/^2016-06-21.*ERROR/p' nohup.out 统计http相应状态码\nbash 1 cat looklinix.com_access.log | cut -d '\"' -f3 | cut -d ' ' -f2 | sort | uniq -c | sort 使用awk\nbash 1 awk '{print $9}' looklinix.com_access.log | sort | uniq -c | sort 列出404的接口\nbash 1 awk '($9 ~ /404/)' looklinix.com_access.log | awk '{print $7}' | sort | uniq -c | sort -r 检查404请求来自哪里\nbash 1 awk -F \\\" '($2 ~ \"/survey/report/na\"){print $1}' looklinix.com_access.log | awk '{print $1}' | sort | uniq -c | sort –r 查询x 分钟内访问最多的前 10 个IP\nday hour minutes\nbash 1 awk -vDate=`date -d'now-30 minutes' +[%d/%b/%Y:%H:%M:%S` '$4 \u003e Date {print $1}' /var/log/nginx/access.log | sort | uniq -c | sort -nr | head -n 10 查询请求URL数量排行\nbash 1 awk '{print $7}' /var/log/nginx/access.log | sort | uniq -c | sort -nr | head -n 50 统计所有的IP请求量\nbash 1 awk '{print $1}' access.log | sort -n | uniq | wc -l 统计某一时间段的IP请求量\nbash 1 grep \"07/Apr/2017:0[4-5]\" access.log | awk '{print $1}' | sort | uniq -c| sort -nr | wc -l 统计IP请求数量大于一个值的排行\nbash 1 awk '{print $1}' access.log | sort -n |uniq -c |awk '{if($1 \u003e100) print $0}'|sort -rn 列出请求时间超过3s的接口\nbash 1 cat access.log|awk '($NF \u003e 3){print $7}'|sort -n|uniq -c|sort -nr|head -20 获取每分钟的请求数量并输出成csv文件\nbash 1 cat access.log | awk '{print substr($4,14,5)}' | uniq -c | awk '{print $2\",\"$1}' \u003e access.csv 查看搜索引擎爬虫\nbash 1 2 3 4 5 6 7 8 # 百度爬虫 降序 cat access.log | grep \"Baiduspider\" | awk '{print $7}' | sort | uniq -c | sort -r # 谷歌爬虫降序 cat access.log | grep \"Googlebot\" | awk '{print $7}' | sort | uniq -c | sort -r # 谷歌爬虫404的次数 grep 'Googlebot' access.log |grep '404' | wc -l ","wordCount":"1391","inLanguage":"zh","datePublished":"2016-08-12T00:00:00Z","dateModified":"2023-01-24T23:00:36+08:00","author":{"@type":"Person","name":"cylon"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.oomkill.com/2016/08/awesome-linux-log-command/"},"publisher":{"@type":"Organization","name":"Cylon's Collection","logo":{"@type":"ImageObject","url":"https://www.oomkill.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.oomkill.com/><img src=https://www.oomkill.com/favicon.ico alt aria-label=logo height=20>Cylon's Collection</a><div class=logo-switches><button id=theme-toggle><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.oomkill.com/archives><span>归档</span></a></li><li><a href=https://www.oomkill.com/tags><span>标签</span></a></li><li><a href=https://www.oomkill.com/search><span>搜索</span></a></li><li><a href=https://www.oomkill.com/about accesskey=/><span>关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">长期总结 - Linux日志查询命令</h1><div class=post-meta><span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg><span>2016-08-12</span></span>&nbsp;·&nbsp;<span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text" style="user-select:text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z" style="user-select:text"/><polyline points="14 2 14 8 20 8" style="user-select:text"/><line x1="16" y1="13" x2="8" y2="13" style="user-select:text"/><line x1="16" y1="17" x2="8" y2="17" style="user-select:text"/><polyline points="10 9 9 9 8 9" style="user-select:text"/></svg><span>1391 字</span></span>&nbsp;·&nbsp;<span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><span>7 分钟</span></span>
<span class=pe-post-meta-item>&nbsp;·&nbsp;<svg t="1714036239378" fill="currentcolor" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="6659" width="256" height="256"><path d="M690 78.2c-18.6-18.8-49-19-67.8-.4s-19 49-.4 67.8l255.4 258.6c67.8 68.6 67.8 178.8.0 247.4L653.4 878.2c-18.6 18.8-18.4 49.2.4 67.8s49.2 18.4 67.8-.4l224-226.4c104.8-106 104.8-276.4.0-382.4L690 78.2zM485.4 101.4c-24-24-56.6-37.4-90.6-37.4H96C43 64 0 107 0 160v299c0 34 13.4 66.6 37.4 90.6l336 336c50 50 131 50 181 0l267-267c50-50 50-131 0-181l-336-336zM96 160h299c8.4.0 16.6 3.4 22.6 9.4l336 336c12.4 12.4 12.4 32.8.0 45.2l-267 267c-12.4 12.4-32.8 12.4-45.2.0l-336-336c-6-6-9.4-14.2-9.4-22.6V160zm192 128a64 64 0 10-128 0 64 64 0 10128 0z" p-id="6660"/></svg></span><ul class=pe-post-meta-item><a href=https://www.oomkill.com/tags/command/>#Command</a></ul></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details><summary><span class=details>目录</span></summary><div class=inner><ul><li><a href=#sed aria-label=sed>sed</a><li><a href=#wc aria-label=wc>wc</a><li><a href=#sort- aria-label="sort ★★★★">sort ★★★★</a><li><a href=#uniq aria-label=uniq>uniq</a><li><a href=#cut aria-label=cut>cut</a><li><a href=#grep aria-label=grep>grep</a><li><a href=#%e6%97%a5%e5%bf%97%e6%9f%a5%e8%af%a2%e4%b8%ad%e5%b8%b8%e7%94%a8%e5%91%bd%e4%bb%a4 aria-label=日志查询中常用命令>日志查询中常用命令</a></li></div></details></div></aside><script src=/js/pe-toc.min.445eb1bfc5e85dd13b9519fcc2a806522e9629b6224a2974052789ba00ab78af.js integrity="sha256-RF6xv8XoXdE7lRn8wqgGUi6WKbYiSil0BSeJugCreK8="></script><div class=post-content><h2 id=sed>sed<a hidden class=anchor aria-hidden=true href=#sed>#</a></h2><p>语法</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sed  <span class=s1>&#39;/过滤的内容/处理的命令&#39;</span> 文件</span></span></code></pre></td></tr></table></div></div></div></div><table><thead><tr><th>参数</th><th>注释说明</th></tr></thead><tbody><tr><td>n</td><td>取消sed默认的输出</td></tr><tr><td>i</td><td>替换文件内容</td></tr><tr><td>r</td><td>如果有特殊字符不用转义（正则）</td></tr><tr><td>g</td><td>全局替换</td></tr><tr><td>d</td><td>删除</td></tr><tr><td>p</td><td>print打印</td></tr></tbody></table><p># 为分隔符可以用其他符号替换（最好用$ @ /）替换内容中如果有分隔符，需要将分隔符替换为别的分隔符，如果不换可将内容转义 s 为search g为globla全局替换，不加的话只替换一列</p><p><strong>打印</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sed -n <span class=s1>&#39;2p&#39;</span> 3.txt
</span></span><span class=line><span class=cl><span class=m>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ sed -n <span class=s1>&#39;1,20p&#39;</span> 3.txt
</span></span><span class=line><span class=cl><span class=m>0</span>
</span></span><span class=line><span class=cl><span class=m>1</span>
</span></span><span class=line><span class=cl><span class=m>2</span>
</span></span><span class=line><span class=cl><span class=m>3</span>
</span></span><span class=line><span class=cl><span class=m>4</span>
</span></span><span class=line><span class=cl><span class=m>5</span>
</span></span><span class=line><span class=cl><span class=m>6</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=m>8</span>
</span></span><span class=line><span class=cl><span class=m>9</span>
</span></span><span class=line><span class=cl><span class=m>10</span>
</span></span><span class=line><span class=cl><span class=m>11</span>
</span></span><span class=line><span class=cl><span class=m>12</span>
</span></span><span class=line><span class=cl><span class=m>13</span>
</span></span><span class=line><span class=cl><span class=m>14</span>
</span></span><span class=line><span class=cl><span class=m>15</span>
</span></span><span class=line><span class=cl><span class=m>16</span>
</span></span><span class=line><span class=cl><span class=m>17</span>
</span></span><span class=line><span class=cl><span class=m>18</span>
</span></span><span class=line><span class=cl><span class=m>19</span></span></span></code></pre></td></tr></table></div></div></div></div><p><strong>问：已知一个文件内容为 aaa bbb ccc lisi 请打印出不包含lisi的内容</strong></p><p>文件原内容</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ cat 1.txt          
</span></span><span class=line><span class=cl>-bash: ech: <span class=nb>command</span> not found
</span></span><span class=line><span class=cl>-bash: ech: <span class=nb>command</span> not found
</span></span><span class=line><span class=cl>-bash: ech: <span class=nb>command</span> not found
</span></span><span class=line><span class=cl>dasda
</span></span><span class=line><span class=cl>aaa
</span></span><span class=line><span class=cl>bbb
</span></span><span class=line><span class=cl>ccc
</span></span><span class=line><span class=cl>ddd
</span></span><span class=line><span class=cl>eee
</span></span><span class=line><span class=cl>fff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ggg</span></span></code></pre></td></tr></table></div></div></div></div><p><strong>替换功能</strong>：</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sed -i <span class=s1>&#39;s#aaa#cylon#g&#39;</span> 1.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ cat 1.txt                           
</span></span><span class=line><span class=cl>-bash: ech: <span class=nb>command</span> not found
</span></span><span class=line><span class=cl>-bash: ech: <span class=nb>command</span> not found
</span></span><span class=line><span class=cl>-bash: ech: <span class=nb>command</span> not found
</span></span><span class=line><span class=cl>dasda
</span></span><span class=line><span class=cl>cylon
</span></span><span class=line><span class=cl>bbb
</span></span><span class=line><span class=cl>ccc
</span></span><span class=line><span class=cl>ddd
</span></span><span class=line><span class=cl>eee
</span></span><span class=line><span class=cl>fff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ggg</span></span></code></pre></td></tr></table></div></div></div></div><p>默认不加参数会将文件原内容打印再将符合的内容打印</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sed <span class=s1>&#39;/aaa/p&#39;</span> 1.txt  
</span></span><span class=line><span class=cl>-bash: ech: <span class=nb>command</span> not found
</span></span><span class=line><span class=cl>-bash: ech: <span class=nb>command</span> not found
</span></span><span class=line><span class=cl>-bash: ech: <span class=nb>command</span> not found
</span></span><span class=line><span class=cl>dasda
</span></span><span class=line><span class=cl>aaa
</span></span><span class=line><span class=cl>aaa
</span></span><span class=line><span class=cl>bbb
</span></span><span class=line><span class=cl>ccc
</span></span><span class=line><span class=cl>ddd
</span></span><span class=line><span class=cl>eee
</span></span><span class=line><span class=cl>fff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ggg</span></span></code></pre></td></tr></table></div></div></div></div><p><strong>在指定文件中指定行插入数据</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ cat test.txt 
</span></span><span class=line><span class=cl><span class=m>1</span>
</span></span><span class=line><span class=cl><span class=m>2</span>
</span></span><span class=line><span class=cl><span class=m>3</span>
</span></span><span class=line><span class=cl><span class=m>4</span>
</span></span><span class=line><span class=cl><span class=m>5</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># $为行尾  a\为行后追加 i\为行前追加 c\为替换 不加$为行首</span>
</span></span><span class=line><span class=cl>$ sed -i <span class=s2>&#34;3a zhangsan&#34;</span> test.txt   
</span></span><span class=line><span class=cl>$ cat test.txt 
</span></span><span class=line><span class=cl><span class=m>1</span>
</span></span><span class=line><span class=cl><span class=m>2</span>
</span></span><span class=line><span class=cl><span class=m>3</span>
</span></span><span class=line><span class=cl>zhangsan
</span></span><span class=line><span class=cl><span class=m>4</span></span></span></code></pre></td></tr></table></div></div></div></div><p><strong>-n取消默认的输出</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sed -n <span class=s1>&#39;/aaa/p&#39;</span> 1.txt 
</span></span><span class=line><span class=cl>aaa</span></span></code></pre></td></tr></table></div></div></div></div><p>将符合的内容删除后输出，并不操作文件</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sed  <span class=s1>&#39;/aaa/d&#39;</span> 1.txt    
</span></span><span class=line><span class=cl>-bash: ech: <span class=nb>command</span> not found
</span></span><span class=line><span class=cl>-bash: ech: <span class=nb>command</span> not found
</span></span><span class=line><span class=cl>-bash: ech: <span class=nb>command</span> not found
</span></span><span class=line><span class=cl>dasda
</span></span><span class=line><span class=cl>bbb
</span></span><span class=line><span class=cl>ccc
</span></span><span class=line><span class=cl>ddd
</span></span><span class=line><span class=cl>eee
</span></span><span class=line><span class=cl>fff
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>ggg</span></span></code></pre></td></tr></table></div></div></div></div><p>删除文件中一部分内容</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 删除首行</span>
</span></span><span class=line><span class=cl>sed <span class=s1>&#39;1d&#39;</span> nginx.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 删除1-102行</span>
</span></span><span class=line><span class=cl>sed <span class=s1>&#39;1,102d&#39;</span> nginx.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 正则表达式</span>
</span></span><span class=line><span class=cl><span class=c1># 删除每行中 on</span>
</span></span><span class=line><span class=cl>sed <span class=s1>&#39;/on/d&#39;</span> nginx.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 删除偶数行删除偶数行</span>
</span></span><span class=line><span class=cl>sed <span class=s1>&#39;0~2d&#39;</span> nginx.conf
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 删除奇数行</span>
</span></span><span class=line><span class=cl>sed <span class=s1>&#39;1~2d&#39;</span> nginx.conf</span></span></code></pre></td></tr></table></div></div></div></div><h2 id=wc>wc<a hidden class=anchor aria-hidden=true href=#wc>#</a></h2><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>c</td><td>统计字节数</td></tr><tr><td>l</td><td>统计行数</td></tr><tr><td>m</td><td>统计字符数，不能与c一起用</td></tr><tr><td>w</td><td>统计字数，一个字被定义为由空白、跳格、或换行字符分割的字符串</td></tr><tr><td>L</td><td>打印最长行的字符数量</td></tr><tr><td>&ndash;help</td><td>帮助信息</td></tr><tr><td>&ndash;version</td><td>版本信息</td></tr></tbody></table><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ cat -n a.html
</span></span><span class=line><span class=cl>     <span class=m>1</span>  <span class=m>000</span>
</span></span><span class=line><span class=cl>     <span class=m>2</span>  <span class=m>111</span>
</span></span><span class=line><span class=cl>     <span class=m>3</span>  <span class=m>222</span>
</span></span><span class=line><span class=cl>     <span class=m>4</span>  <span class=m>333</span>
</span></span><span class=line><span class=cl>     <span class=m>5</span>  <span class=m>444</span>
</span></span><span class=line><span class=cl>     <span class=m>6</span>  <span class=m>555</span>
</span></span><span class=line><span class=cl>     <span class=m>7</span>  <span class=m>666</span>
</span></span><span class=line><span class=cl>     <span class=m>8</span>  <span class=m>777</span>
</span></span><span class=line><span class=cl>     <span class=m>9</span>  <span class=m>888</span>
</span></span><span class=line><span class=cl>    <span class=m>10</span>  <span class=m>999</span>
</span></span><span class=line><span class=cl>    <span class=m>11</span>  aaa
</span></span><span class=line><span class=cl>    <span class=m>12</span>  bbb
</span></span><span class=line><span class=cl>    <span class=m>13</span>  ccc
</span></span><span class=line><span class=cl>    <span class=m>14</span>  ddd
</span></span><span class=line><span class=cl>    <span class=m>15</span>  eee
</span></span><span class=line><span class=cl>    <span class=m>16</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ wc -c a.html
</span></span><span class=line><span class=cl><span class=m>61</span> a.html
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ wc -l a.html
</span></span><span class=line><span class=cl><span class=m>16</span> a.html
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ wc -w a.html
</span></span><span class=line><span class=cl><span class=m>15</span> a.html
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ wc -L a.html
</span></span><span class=line><span class=cl><span class=m>3</span> a.html</span></span></code></pre></td></tr></table></div></div></div></div><h2 id=sort->sort ★★★★<a hidden class=anchor aria-hidden=true href=#sort->#</a></h2><p>将文件进行排序，并将排序结果标准输出。sort命令既可以从特定的文件，也可以从stdin中获取输入</p><table><thead><tr><th>参数选项</th><th>注释说明</th></tr></thead><tbody><tr><td>-b</td><td>忽略每行前面开始出的空格字符；</td></tr><tr><td>-c</td><td>检查文件是否已经按照顺序排序；</td></tr><tr><td>-d</td><td>排序时，处理英文字母、数字及空格字符外，忽略其他的字符；</td></tr><tr><td>-f</td><td>排序时，将小写字母视为大写字母；</td></tr><tr><td>-n</td><td>依照数值的大小排序</td></tr><tr><td>-r</td><td>以相反的顺序来排序</td></tr></tbody></table><p><strong>实例</strong>：sort将 文件/文本 的每一行作为一个单位，相互比较，比较原则是从首字符向后，依次按ASCII码值进行比较，最后将他们按升序输出。</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ cat sort.txt 
</span></span><span class=line><span class=cl>aaa:10:1.1 
</span></span><span class=line><span class=cl>ccc:30:3.3 
</span></span><span class=line><span class=cl>ddd:40:4.4 
</span></span><span class=line><span class=cl>bbb:20:2.2 
</span></span><span class=line><span class=cl>eee:50:5.5 
</span></span><span class=line><span class=cl>eee:50:5.5 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ sort sort.txt 
</span></span><span class=line><span class=cl>aaa:10:1.1 
</span></span><span class=line><span class=cl>bbb:20:2.2 
</span></span><span class=line><span class=cl>ccc:30:3.3 
</span></span><span class=line><span class=cl>ddd:40:4.4 
</span></span><span class=line><span class=cl>eee:50:5.5 
</span></span><span class=line><span class=cl>eee:50:5.5 </span></span></code></pre></td></tr></table></div></div></div></div><p>忽略相同行使用-u选项或者uniq：</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ cat sort.txt 
</span></span><span class=line><span class=cl>aaa:10:1.1 
</span></span><span class=line><span class=cl>ccc:30:3.3 
</span></span><span class=line><span class=cl>ddd:40:4.4 
</span></span><span class=line><span class=cl>bbb:20:2.2 
</span></span><span class=line><span class=cl>eee:50:5.5 
</span></span><span class=line><span class=cl>eee:50:5.5 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ sort -u sort.txt 
</span></span><span class=line><span class=cl>aaa:10:1.1 
</span></span><span class=line><span class=cl>bbb:20:2.2 
</span></span><span class=line><span class=cl>ccc:30:3.3 
</span></span><span class=line><span class=cl>ddd:40:4.4 
</span></span><span class=line><span class=cl>eee:50:5.5
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># </span>
</span></span><span class=line><span class=cl>$ uniq sort.txt 
</span></span><span class=line><span class=cl>aaa:10:1.1 
</span></span><span class=line><span class=cl>ccc:30:3.3 
</span></span><span class=line><span class=cl>ddd:40:4.4 
</span></span><span class=line><span class=cl>bbb:20:2.2 
</span></span><span class=line><span class=cl>eee:50:5.5 </span></span></code></pre></td></tr></table></div></div></div></div><p>sort的-n、-r、-k、-t选项的使用：</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ cat sort.txt 
</span></span><span class=line><span class=cl>AAA:BB:CC 
</span></span><span class=line><span class=cl>aaa:30:1.6 
</span></span><span class=line><span class=cl>ccc:50:3.3 
</span></span><span class=line><span class=cl>ddd:20:4.2 
</span></span><span class=line><span class=cl>bbb:10:2.5 
</span></span><span class=line><span class=cl>eee:40:5.4 
</span></span><span class=line><span class=cl>eee:60:5.1 
</span></span><span class=line><span class=cl><span class=c1># 将BB列按照数字从小到大顺序排列 </span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ sort -nk <span class=m>2</span> -t: sort.txt 
</span></span><span class=line><span class=cl>AAA:BB:CC 
</span></span><span class=line><span class=cl>bbb:10:2.5 
</span></span><span class=line><span class=cl>ddd:20:4.2 
</span></span><span class=line><span class=cl>aaa:30:1.6 
</span></span><span class=line><span class=cl>eee:40:5.4 
</span></span><span class=line><span class=cl>ccc:50:3.3 
</span></span><span class=line><span class=cl>eee:60:5.1 
</span></span><span class=line><span class=cl><span class=c1># 将CC列数字从大到小顺序排列</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ sort -nrk <span class=m>3</span> -t: sort.txt 
</span></span><span class=line><span class=cl>eee:40:5.4 
</span></span><span class=line><span class=cl>eee:60:5.1 
</span></span><span class=line><span class=cl>ddd:20:4.2 
</span></span><span class=line><span class=cl>ccc:50:3.3 
</span></span><span class=line><span class=cl>bbb:10:2.5 
</span></span><span class=line><span class=cl>aaa:30:1.6 
</span></span><span class=line><span class=cl>AAA:BB:CC 
</span></span><span class=line><span class=cl><span class=c1># -n是按照数字大小排序，-r是以相反顺序，-k是指定需要排序的栏位，-t指定栏位分隔符为冒号</span></span></span></code></pre></td></tr></table></div></div></div></div><h2 id=uniq>uniq<a hidden class=anchor aria-hidden=true href=#uniq>#</a></h2><p>用于报告或忽略文件中的重复行，一般与sort命令结合使用</p><table><thead><tr><th>参数选项</th><th>注释说明</th></tr></thead><tbody><tr><td>-c</td><td>在每行前面显示改行重复的次数</td></tr><tr><td>-d</td><td>仅打印重复出现的行</td></tr><tr><td>-u</td><td>仅打印不重复的行</td></tr></tbody></table><p><strong>实例</strong>：删除重复行</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ uniq a.txt     
</span></span><span class=line><span class=cl>a
</span></span><span class=line><span class=cl>b
</span></span><span class=line><span class=cl>c
</span></span><span class=line><span class=cl>d
</span></span><span class=line><span class=cl>e
</span></span><span class=line><span class=cl>f
</span></span><span class=line><span class=cl>g
</span></span><span class=line><span class=cl>h
</span></span><span class=line><span class=cl>i
</span></span><span class=line><span class=cl>g
</span></span><span class=line><span class=cl>k</span></span></code></pre></td></tr></table></div></div></div></div><p>在文件中找出重复的行：</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sort file.txt <span class=p>|</span> uniq -d</span></span></code></pre></td></tr></table></div></div></div></div><p>查找重复次数</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ uniq -c a.txt 
</span></span><span class=line><span class=cl>      <span class=m>5</span> a
</span></span><span class=line><span class=cl>      <span class=m>1</span> b
</span></span><span class=line><span class=cl>      <span class=m>2</span> c
</span></span><span class=line><span class=cl>      <span class=m>2</span> d
</span></span><span class=line><span class=cl>      <span class=m>1</span> e
</span></span><span class=line><span class=cl>      <span class=m>1</span> f
</span></span><span class=line><span class=cl>      <span class=m>1</span> g
</span></span><span class=line><span class=cl>      <span class=m>3</span> h
</span></span><span class=line><span class=cl>      <span class=m>2</span> i
</span></span><span class=line><span class=cl>      <span class=m>1</span> g
</span></span><span class=line><span class=cl>      <span class=m>1</span> k
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ uniq -d a.txt  
</span></span><span class=line><span class=cl>a
</span></span><span class=line><span class=cl>c
</span></span><span class=line><span class=cl>d
</span></span><span class=line><span class=cl>h
</span></span><span class=line><span class=cl>i
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ uniq -u a.txt  
</span></span><span class=line><span class=cl>b
</span></span><span class=line><span class=cl>e
</span></span><span class=line><span class=cl>f
</span></span><span class=line><span class=cl>g
</span></span><span class=line><span class=cl>g
</span></span><span class=line><span class=cl>k</span></span></code></pre></td></tr></table></div></div></div></div><h2 id=cut>cut<a hidden class=anchor aria-hidden=true href=#cut>#</a></h2><p>用来显示行中的指定部分，删除文件中指定字段。cut经常用来显示文件的内容</p><table><thead><tr><th>参数选项</th><th>注释说明</th></tr></thead><tbody><tr><td>-b</td><td>以字节为单位进行分割。这些字节位置将忽略多字节字符边界，除非也指定了 -n 标志。</td></tr><tr><td>-c</td><td>以字符为单位进行分割</td></tr><tr><td>-f</td><td>与-d一起使用，取第几列</td></tr><tr><td>-d</td><td>指定分隔符</td></tr></tbody></table><p><strong>实例</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ cat 1.log
</span></span><span class=line><span class=cl>i am a protester myqq is <span class=m>1112222</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ cut -d <span class=s2>&#34; &#34;</span> -f4,7 1.log   
</span></span><span class=line><span class=cl>protester <span class=m>1112222</span></span></span></code></pre></td></tr></table></div></div></div></div><ol><li>以字节取，我们想去who命令的第三个字节</li></ol><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ who
</span></span><span class=line><span class=cl>root     pts/0        2010-02-02 04:09 <span class=o>(</span>192.168.88.1<span class=o>)</span>
</span></span><span class=line><span class=cl>root     pts/1        2010-02-02 08:34 <span class=o>(</span>192.168.88.1<span class=o>)</span>
</span></span><span class=line><span class=cl>lc       pts/2        2010-02-02 08:44 <span class=o>(</span>192.168.88.1<span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ who<span class=p>|</span>cut -b <span class=m>3</span>
</span></span><span class=line><span class=cl>o
</span></span><span class=line><span class=cl>o</span></span></code></pre></td></tr></table></div></div></div></div><ol start=2><li>取第1、2、3和第23个字节</li></ol><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$  who<span class=p>|</span>cut -b 1-3,23
</span></span><span class=line><span class=cl>roo2
</span></span><span class=line><span class=cl>roo2
</span></span><span class=line><span class=cl>lc <span class=m>2</span></span></span></code></pre></td></tr></table></div></div></div></div><ol start=3><li>如果取中文的话，-c 与 -b就有差异了，-c取的是字节，而-b取得是8位2进制来计算输出的是乱码或空</li></ol><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ cat a.txt 
</span></span><span class=line><span class=cl>星期一
</span></span><span class=line><span class=cl>星期二
</span></span><span class=line><span class=cl>星期三
</span></span><span class=line><span class=cl>星期四
</span></span><span class=line><span class=cl>星期五
</span></span><span class=line><span class=cl>星期六
</span></span><span class=line><span class=cl>星期日
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ cut -b <span class=m>3</span> a.txt
</span></span><span class=line><span class=cl>�
</span></span><span class=line><span class=cl>�
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ cut a.txt -c <span class=m>3</span>
</span></span><span class=line><span class=cl>一
</span></span><span class=line><span class=cl>二
</span></span><span class=line><span class=cl>三
</span></span><span class=line><span class=cl>四
</span></span><span class=line><span class=cl>五
</span></span><span class=line><span class=cl>六
</span></span><span class=line><span class=cl>日</span></span></code></pre></td></tr></table></div></div></div></div><h2 id=grep>grep<a hidden class=anchor aria-hidden=true href=#grep>#</a></h2><p><em><strong>Global search Regular Expression(RE) and Print out the line</strong></em>，全面搜索正则表达式并把行打印出来；是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹配的行打印出来。</p><p>过滤，将想要的和不想要的去除</p><table><thead><tr><th>参数</th><th>说明</th></tr></thead><tbody><tr><td>==-E==</td><td>同egrep同时过滤多个字符串，使grep可以使用正则表达式</td></tr><tr><td>-v</td><td>翻转查找，查找除了匹配到结果之外的信息</td></tr><tr><td>-B <strong>Num</strong></td><td>除了显示匹配的一行之外，并显示该行之前的num行</td></tr><tr><td>-A <strong>Num</strong></td><td>除了显示匹配的一行之外，并显示改行之后的num行</td></tr><tr><td>-C <strong>Num</strong></td><td>除了显示匹配的一行之外，并显示改行之前后各num行</td></tr><tr><td>-o</td><td>输出匹配字符，而不是默认的整行输出</td></tr><tr><td>-i</td><td>不区分大小写</td></tr><tr><td>-n</td><td>讲匹配出的结果在文件所在的行号打印</td></tr><tr><td>-c</td><td>打印匹配到的行数</td></tr><tr><td>-H</td><td>在匹配到符合行之前打印文件名</td></tr><tr><td>&ndash;color=auto</td><td>给匹配倒的字符串加颜色（不是整行。关键字高亮显示）</td></tr></tbody></table><p>实例</p><ol><li>显示/etc/services 下3306和1521 端口信息</li></ol><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ grep -E <span class=s2>&#34;3306|1521&#34;</span> /etc/services 
</span></span><span class=line><span class=cl>mysql           3306/tcp                        <span class=c1># MySQL</span>
</span></span><span class=line><span class=cl>mysql           3306/udp                        <span class=c1># MySQL</span>
</span></span><span class=line><span class=cl>ncube-lm        1521/tcp                <span class=c1># nCube License Manager</span>
</span></span><span class=line><span class=cl>ncube-lm        1521/udp                <span class=c1># nCube License Manager</span></span></span></code></pre></td></tr></table></div></div></div></div><ol start=2><li>过滤出文件内指定字符串</li></ol><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ cat text.txt
</span></span><span class=line><span class=cl>zhangsan
</span></span><span class=line><span class=cl>lisi
</span></span><span class=line><span class=cl>oldbl
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ grep <span class=s2>&#34;lisi&#34;</span> text.txt
</span></span><span class=line><span class=cl>lisi</span></span></code></pre></td></tr></table></div></div></div></div><ol start=3><li>排除指定字符</li></ol><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ grep -v <span class=s2>&#34;lisi&#34;</span> text.txt
</span></span><span class=line><span class=cl>zhangsan
</span></span><span class=line><span class=cl>oldbl
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ grep  -n <span class=s2>&#34;555&#34;</span> a.html
</span></span><span class=line><span class=cl>6:555</span></span></code></pre></td></tr></table></div></div></div></div><ol start=4><li>一个文件有100行，只看20~30行</li></ol><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 方法1</span>
</span></span><span class=line><span class=cl>$ grep <span class=m>30</span> -B <span class=m>10</span> test.txt
</span></span><span class=line><span class=cl><span class=m>20</span>
</span></span><span class=line><span class=cl><span class=m>21</span>
</span></span><span class=line><span class=cl><span class=m>22</span>
</span></span><span class=line><span class=cl><span class=m>23</span>
</span></span><span class=line><span class=cl><span class=m>24</span>
</span></span><span class=line><span class=cl><span class=m>25</span>
</span></span><span class=line><span class=cl><span class=m>26</span>
</span></span><span class=line><span class=cl><span class=m>27</span>
</span></span><span class=line><span class=cl><span class=m>28</span>
</span></span><span class=line><span class=cl><span class=m>29</span>
</span></span><span class=line><span class=cl><span class=m>30</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 方法2</span>
</span></span><span class=line><span class=cl>$ head -30 3.txt<span class=p>|</span>tail -11
</span></span><span class=line><span class=cl><span class=m>20</span>
</span></span><span class=line><span class=cl><span class=m>21</span>
</span></span><span class=line><span class=cl><span class=m>22</span>
</span></span><span class=line><span class=cl><span class=m>23</span>
</span></span><span class=line><span class=cl><span class=m>24</span>
</span></span><span class=line><span class=cl><span class=m>25</span>
</span></span><span class=line><span class=cl><span class=m>26</span>
</span></span><span class=line><span class=cl><span class=m>27</span>
</span></span><span class=line><span class=cl><span class=m>28</span>
</span></span><span class=line><span class=cl><span class=m>29</span>
</span></span><span class=line><span class=cl><span class=m>30</span></span></span></code></pre></td></tr></table></div></div></div></div><ol start=5><li>列出文件名</li></ol><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ grep -H root /etc/passwd 
</span></span><span class=line><span class=cl>/etc/passwd:root:x:0:0:root:/root:/bin/bash
</span></span><span class=line><span class=cl>/etc/passwd:operator:x:11:0:operator:/root:/sbin/nologin</span></span></code></pre></td></tr></table></div></div></div></div><h2 id=日志查询中常用命令>日志查询中常用命令<a hidden class=anchor aria-hidden=true href=#日志查询中常用命令>#</a></h2><p><strong>打印一段时间的日志</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sed -n <span class=s1>&#39;/2019-12-28 11:26/,/2019-12-28 12:13/p&#39;</span> nohup.out</span></span></code></pre></td></tr></table></div></div></div></div><p><strong>输出日志文件中的某个日期中的ERROR的行</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sed -n <span class=s1>&#39;/^2016-06-21.*ERROR/p&#39;</span> nohup.out</span></span></code></pre></td></tr></table></div></div></div></div><p><strong>统计http相应状态码</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat looklinix.com_access.log <span class=p>|</span> cut -d <span class=s1>&#39;&#34;&#39;</span> -f3 <span class=p>|</span> cut -d <span class=s1>&#39; &#39;</span> -f2 <span class=p>|</span> sort <span class=p>|</span> uniq -c <span class=p>|</span> sort</span></span></code></pre></td></tr></table></div></div></div></div><p>使用awk</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>awk <span class=s1>&#39;{print $9}&#39;</span> looklinix.com_access.log <span class=p>|</span> sort <span class=p>|</span> uniq -c <span class=p>|</span> sort</span></span></code></pre></td></tr></table></div></div></div></div><p><strong>列出404的接口</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>awk <span class=s1>&#39;($9 ~ /404/)&#39;</span> looklinix.com_access.log <span class=p>|</span> awk <span class=s1>&#39;{print $7}&#39;</span> <span class=p>|</span> sort <span class=p>|</span> uniq -c <span class=p>|</span> sort -r</span></span></code></pre></td></tr></table></div></div></div></div><p><strong>检查404请求来自哪里</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>awk -F <span class=se>\&#34;</span> <span class=s1>&#39;($2 ~ &#34;/survey/report/na&#34;){print $1}&#39;</span> looklinix.com_access.log <span class=p>|</span> awk <span class=s1>&#39;{print $1}&#39;</span> <span class=p>|</span> sort <span class=p>|</span> uniq -c <span class=p>|</span> sort –r</span></span></code></pre></td></tr></table></div></div></div></div><p><strong>查询x 分钟内访问最多的前 10 个IP</strong></p><p>day hour minutes</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>awk -vDate<span class=o>=</span><span class=sb>`</span>date -d<span class=s1>&#39;now-30 minutes&#39;</span> +<span class=o>[</span>%d/%b/%Y:%H:%M:%S<span class=sb>`</span> <span class=s1>&#39;$4 &gt; Date {print $1}&#39;</span> /var/log/nginx/access.log <span class=p>|</span> sort <span class=p>|</span> uniq -c <span class=p>|</span> sort -nr <span class=p>|</span> head -n <span class=m>10</span></span></span></code></pre></td></tr></table></div></div></div></div><p><strong>查询请求URL数量排行</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>awk <span class=s1>&#39;{print $7}&#39;</span> /var/log/nginx/access.log <span class=p>|</span> sort <span class=p>|</span> uniq -c <span class=p>|</span> sort -nr <span class=p>|</span> head -n <span class=m>50</span></span></span></code></pre></td></tr></table></div></div></div></div><p><strong>统计所有的IP请求量</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>awk <span class=s1>&#39;{print $1}&#39;</span> access.log <span class=p>|</span> sort -n <span class=p>|</span> uniq <span class=p>|</span> wc -l</span></span></code></pre></td></tr></table></div></div></div></div><p><strong>统计某一时间段的IP请求量</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>grep <span class=s2>&#34;07/Apr/2017:0[4-5]&#34;</span> access.log <span class=p>|</span> awk <span class=s1>&#39;{print $1}&#39;</span> <span class=p>|</span> sort <span class=p>|</span> uniq -c<span class=p>|</span> sort -nr <span class=p>|</span> wc -l  </span></span></code></pre></td></tr></table></div></div></div></div><p><strong>统计IP请求数量大于一个值的排行</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>awk <span class=s1>&#39;{print $1}&#39;</span> access.log <span class=p>|</span> sort -n <span class=p>|</span>uniq -c <span class=p>|</span>awk <span class=s1>&#39;{if($1 &gt;100) print $0}&#39;</span><span class=p>|</span>sort -rn</span></span></code></pre></td></tr></table></div></div></div></div><p><strong>列出请求时间超过3s的接口</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat access.log<span class=p>|</span>awk <span class=s1>&#39;($NF &gt; 3){print $7}&#39;</span><span class=p>|</span>sort -n<span class=p>|</span>uniq -c<span class=p>|</span>sort -nr<span class=p>|</span>head -20</span></span></code></pre></td></tr></table></div></div></div></div><p><strong>获取每分钟的请求数量并输出成csv文件</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat access.log <span class=p>|</span> awk <span class=s1>&#39;{print substr($4,14,5)}&#39;</span> <span class=p>|</span> uniq -c <span class=p>|</span> awk <span class=s1>&#39;{print $2&#34;,&#34;$1}&#39;</span> &gt; access.csv</span></span></code></pre></td></tr></table></div></div></div></div><p><strong>查看搜索引擎爬虫</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 百度爬虫 降序</span>
</span></span><span class=line><span class=cl>cat access.log <span class=p>|</span> grep <span class=s2>&#34;Baiduspider&#34;</span> <span class=p>|</span> awk <span class=s1>&#39;{print $7}&#39;</span> <span class=p>|</span> sort <span class=p>|</span> uniq -c <span class=p>|</span> sort -r
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 谷歌爬虫降序</span>
</span></span><span class=line><span class=cl>cat access.log <span class=p>|</span> grep <span class=s2>&#34;Googlebot&#34;</span> <span class=p>|</span> awk <span class=s1>&#39;{print $7}&#39;</span> <span class=p>|</span> sort <span class=p>|</span> uniq -c <span class=p>|</span> sort -r
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 谷歌爬虫404的次数</span>
</span></span><span class=line><span class=cl>grep <span class=s1>&#39;Googlebot&#39;</span> access.log <span class=p>|</span>grep <span class=s1>&#39;404&#39;</span> <span class=p>|</span> wc -l</span></span></code></pre></td></tr></table></div></div></div></div></div><div class=pe-copyright><hr><blockquote><p>本文为原创内容，版权归作者所有。如需转载，请在文章中声明本文标题及链接。</p><p>文章标题：长期总结 - Linux日志查询命令</p><p>文章链接：<a href=https://www.oomkill.com/2016/08/awesome-linux-log-command/ target=_blank>https://www.oomkill.com/2016/08/awesome-linux-log-command/</a></p><p>许可协议：<a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.oomkill.com/tags/command/>Command</a></li></ul><nav class=paginav><a class=prev href=https://www.oomkill.com/2016/09/samba-network-filesystem/><span class=title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select:text"><line x1="19" y1="12" x2="5" y2="12" style="user-select:text"/><polyline points="12 19 5 12 12 5" style="user-select:text"/></polyline></svg>&nbsp;</span>
<span>网络共享 - centos7安装samba</span>
</a><a class=next href=https://www.oomkill.com/2016/08/ssh-service/><span class=title></span>
<span>SSH服务详解&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select:text"><line x1="5" y1="12" x2="19" y2="12" style="user-select:text"/><polyline points="12 5 19 12 12 19" style="user-select:text"/></svg></span></a></nav></footer><div class=pe-comments-decoration><p class=pe-comments-title></p><p class=pe-comments-subtitle></p></div><div id=pe-comments></div><script src=/js/pe-go-comment.min.86a214102576ba5f9b7bdc29eed8d58dd56e34aef80b3c65c73ea9cc88443696.js integrity="sha256-hqIUECV2ul+be9wp7tjVjdVuNK74Czxlxz6pzIhENpY="></script><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const s={src:"https://giscus.app/client.js","data-repo":"cylonchau/cylonchau.github.io","data-repo-id":"R_kgDOIRlNSQ","data-category":"Announcements","data-category-id":"DIC_kwDOIRlNSc4CXy1U","data-mapping":"pathname","data-term":"posts/awesome linux log command","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":getStoredTheme(),"data-lang":"zh-TW","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(s).forEach(([t,n])=>e.setAttribute(t,n)),document.querySelector("#pe-comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme);const n=document.querySelector("#theme-toggle-float");n&&n.addEventListener("click",setGiscusTheme)})</script></article></main><footer class=footer><span>&copy; 2024 <a href=https://www.oomkill.com/>Cylon's Collection</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> on
<a href=https://pages.github.com/ rel=noopener target=_blank>GitHub Pages</a> & Theme
        <a href=https://github.com/tofuwine/PaperMod-PE rel=noopener target=_blank>PaperMod-PE</a></span></footer><div class=pe-right-sidebar><a href=javascript:void(0); id=theme-toggle-float class=pe-float-btn><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</a><a href=#top class=pe-float-btn id=top-link><span id=pe-read-progress></span></a></div><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>