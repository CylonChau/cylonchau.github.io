<!DOCTYPE html>
<html lang="zh" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>ch01 - Linux下安装Mysql | Cylon&#39;s Collection</title>
<meta name="keywords" content="mysql, mysql安装">
<meta name="description" content="ch01 - Linux下安装Mysql - Cylon&#39;s Collection">
<meta name="author" content="cylon">
<link rel="canonical" href="https://www.oomkill.com/2017/05/ch1-mysql-deployment/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.df0e7f0648f287aca44f5b657ff5602f436346895340daaa6589b3049a979f73.css" integrity="sha256-3w5/Bkjyh6ykT1tlf/VgL0NjRolTQNqqZYmzBJqXn3M=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://www.oomkill.com/favicon.ico">
<link rel="apple-touch-icon" href="https://www.oomkill.com/apple-touch-icon.png">

<meta name="twitter:title" content="ch01 - Linux下安装Mysql | Cylon&#39;s Collection" />
<meta name="twitter:description" content="" />
<meta property="og:title" content="ch01 - Linux下安装Mysql | Cylon&#39;s Collection" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.oomkill.com/2017/05/ch1-mysql-deployment/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2017-05-12T00:00:00&#43;00:00" />
  <meta property="article:modified_time" content="2022-12-12T23:00:36&#43;08:00" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://www.oomkill.com/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "ch01 - Linux下安装Mysql",
      "item": "https://www.oomkill.com/2017/05/ch1-mysql-deployment/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "ch01 - Linux下安装Mysql | Cylon's Collection",
  "name": "ch01 - Linux下安装Mysql",
  "description": "",
  "keywords": [
    "mysql", "mysql安装"
  ],
  "wordCount" : "10236",
  "inLanguage": "zh",
  "datePublished": "2017-05-12T00:00:00Z",
  "dateModified": "2022-12-12T23:00:36+08:00",
  "author":{
    "@type": "Person",
    "name": "cylon"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.oomkill.com/2017/05/ch1-mysql-deployment/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Cylon's Collection",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.oomkill.com/favicon.ico"
    }
  }
}
</script><script type="text/javascript"
        async
        src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[\[','\]\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});

MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<style>
code.has-jax {
    font: inherit;
    font-size: 100%;
    background: inherit;
    border: inherit;
    color: #515151;
}
</style>
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary-bg: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list-page {
                background: var(--theme);
            }

            .list-page:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list-page:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

</head>

<body class=" type-posts kind-page layout-" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'auto';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.oomkill.com" accesskey="h" title="Cylon&#39;s Collection (Alt + H)">Cylon&#39;s Collection</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.oomkill.com/archives/" title="归档"
                >归档
                </a>
            </li>
            <li>
                <a href="https://www.oomkill.com/tags/" title="标签"
                >标签
                </a>
            </li>
            <li>
                <a href="https://www.oomkill.com/search/" title="搜索 (Alt &#43; /)"data-no-instant accesskey=/
                >搜索
                </a>
            </li>
            <li>
                <a href="https://www.oomkill.com/about/" title="关于"
                >关于
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header"><h1 class="post-title">ch01 - Linux下安装Mysql</h1>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>2017-05-12</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>Edited on 2022-12-12</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select: text;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" style="user-select: text;"></path><line x1="7" y1="7" x2="7" y2="7" style="user-select: text;"></line></svg>
  <span class="post-tags"><a href="https://www.oomkill.com/tags/databases/">databases</a></span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="12" cy="12" r="9"></circle><polyline points="12 7 12 12 15 15"></polyline></svg>
  <span>21 分钟</span></span>

      
      
    </div>
  </header> <div class="toc side right">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#mysql%e6%95%b0%e6%8d%ae%e5%ba%93%e7%ae%80%e4%bb%8b" aria-label="MySQL数据库简介">MySQL数据库简介</a><ul>
                        
                <li>
                    <a href="#mysql%e6%95%b0%e6%8d%ae%e5%ba%93%e5%88%86%e7%b1%bb%e4%b8%8e%e7%89%88%e6%9c%ac%e5%8d%87%e7%ba%a7" aria-label="MySQL数据库分类与版本升级">MySQL数据库分类与版本升级</a></li>
                <li>
                    <a href="#mysql%e6%95%b0%e6%8d%ae%e5%ba%93%e5%95%86%e4%b8%9a%e7%89%88%e5%92%8c%e7%a4%be%e5%8c%ba%e7%89%88%e7%9a%84%e5%8c%ba%e5%88%ab" aria-label="MySQL数据库商业版和社区版的区别">MySQL数据库商业版和社区版的区别</a></li>
                <li>
                    <a href="#alpha%e7%89%88" aria-label="Alpha版">Alpha版</a></li>
                <li>
                    <a href="#beta%e7%89%88" aria-label="Beta版">Beta版</a></li>
                <li>
                    <a href="#rc%e7%89%88" aria-label="RC版">RC版</a></li>
                <li>
                    <a href="#ga%e7%89%88" aria-label="GA版">GA版</a></li>
                <li>
                    <a href="#mysql%e5%9b%9b%e4%b8%ad%e5%8f%91%e5%b8%83%e7%89%88%e6%9c%ac%e9%80%89%e6%8b%a9%e8%af%b4%e6%98%8e" aria-label="MySQL四中发布版本选择说明">MySQL四中发布版本选择说明</a></li>
                <li>
                    <a href="#mysql%e4%ba%a7%e5%93%81%e8%b7%af%e7%ba%bf" aria-label="MySQL产品路线">MySQL产品路线</a><ul>
                        
                <li>
                    <a href="#mysql%e4%ba%a7%e5%93%81%e8%b7%af%e7%ba%bf%e5%8f%98%e6%9b%b4%e5%8e%86%e5%8f%b2%e8%83%8c%e6%99%af" aria-label="MySQL产品路线变更历史背景">MySQL产品路线变更历史背景</a></li>
                <li>
                    <a href="#50xx%e5%88%b051xx%e4%ba%a7%e5%93%81%e7%ba%bf%e4%bb%8b%e7%bb%8d" aria-label="5.0.xx到5.1.xx产品线介绍">5.0.xx到5.1.xx产品线介绍</a></li>
                <li>
                    <a href="#54xx%e5%bc%80%e5%a7%8b%e5%88%b057xx%e4%ba%a7%e5%93%81%e7%ba%bf%e7%b3%bb%e5%88%97%e4%bb%8b%e7%bb%8d" aria-label="5.4.xx开始到5.7.xx产品线系列介绍">5.4.xx开始到5.7.xx产品线系列介绍</a></li>
                <li>
                    <a href="#60xx-71xx%e4%ba%a7%e5%93%81%e7%ba%bf%e7%b3%bb%e5%88%97%e4%bb%8b%e7%bb%8d" aria-label="6.0.xx-7.1.xx产品线系列介绍">6.0.xx-7.1.xx产品线系列介绍</a></li></ul>
                </li>
                <li>
                    <a href="#mysql%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bd%af%e4%bb%b6%e5%91%bd%e5%90%8d%e4%bb%8b%e7%bb%8d" aria-label="MySQL数据库软件命名介绍">MySQL数据库软件命名介绍</a><ul>
                        
                <li>
                    <a href="#mysql%e4%ba%a7%e5%93%81%e7%89%88%e6%9c%ac%e6%9c%80%e7%bb%88%e9%80%89%e6%8b%a9%e5%bb%ba%e8%ae%ae" aria-label="MySQL产品版本最终选择建议">MySQL产品版本最终选择建议</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85mysql" aria-label="安装MySQL">安装MySQL</a><ul>
                        
                <li>
                    <a href="#%e9%87%87%e7%94%a8cmake%e6%96%b9%e5%bc%8f%e7%bc%96%e8%af%91%e5%ae%89%e8%a3%85mysql" aria-label="采用cmake方式编译安装MySQL">采用cmake方式编译安装MySQL</a><ul>
                        
                <li>
                    <a href="#%e9%87%87%e7%94%a8%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%96%b9%e5%bc%8f%e5%85%8d%e7%bc%96%e8%af%91%e5%ae%89%e8%a3%85mysql" aria-label="采用二进制方式免编译安装MySQL">采用二进制方式免编译安装MySQL</a></li>
                <li>
                    <a href="#%e5%a6%82%e4%bd%95%e6%ad%a3%e7%a1%ae%e9%80%89%e6%8b%a9mysql%e7%9a%84%e5%ae%89%e8%a3%85%e6%96%b9%e5%bc%8f" aria-label="如何正确选择MySQL的安装方式">如何正确选择MySQL的安装方式</a></li></ul>
                </li>
                <li>
                    <a href="#mysql%e4%b8%8b%e8%bd%bd" aria-label="MySQL下载">MySQL下载</a><ul>
                        
                <li>
                    <a href="#%e4%bc%81%e4%b8%9a%e5%9c%ba%e6%99%afmysql%e5%ae%89%e8%a3%85%e6%96%b9%e5%bc%8f" aria-label="企业场景MySQL安装方式">企业场景MySQL安装方式</a></li></ul>
                </li>
                <li>
                    <a href="#%e4%ba%8c%e8%bf%9b%e5%88%b6%e5%8c%85%e5%ae%89%e8%a3%85" aria-label="二进制包安装">二进制包安装</a><ul>
                        
                <li>
                    <a href="#%e5%88%9b%e5%bb%bamysql%e7%94%a8%e7%9a%84%e8%b4%a6%e5%8f%b7" aria-label="创建MySQL用的账号">创建MySQL用的账号</a></li>
                <li>
                    <a href="#%e4%ba%8c%e8%bf%9b%e5%88%b6%e6%96%b9%e5%bc%8f%e5%ae%89%e8%a3%85mysql" aria-label="二进制方式安装mysql">二进制方式安装mysql</a></li>
                <li>
                    <a href="#%e5%88%9d%e5%a7%8b%e5%8c%96mysql" aria-label="初始化MySQL">初始化MySQL</a></li>
                <li>
                    <a href="#%e5%88%9d%e5%a7%8b%e5%8c%96mysql%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" aria-label="初始化MySQL配置文件">初始化MySQL配置文件</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae%e5%90%af%e5%8a%a8mysql%e6%95%b0%e6%8d%ae%e5%ba%93" aria-label="配置启动MySql数据库">配置启动MySql数据库</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%aemysql%e5%91%bd%e4%bb%a4%e5%85%a8%e5%b1%80%e4%bd%bf%e7%94%a8" aria-label="配置mysql命令全局使用">配置mysql命令全局使用</a></li>
                <li>
                    <a href="#mysql-56-%e4%ba%8c%e8%bf%9b%e5%88%b6%e5%8c%85%e5%ae%89%e8%a3%85" aria-label="MySQL-5.6 二进制包安装">MySQL-5.6 二进制包安装</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#mysql%e5%a4%9a%e5%ae%9e%e4%be%8b" aria-label="MySQL多实例">MySQL多实例</a><ul>
                        
                <li>
                    <a href="#%e4%bb%80%e4%b9%88%e6%98%afmysql%e5%a4%9a%e5%ae%9e%e4%be%8b" aria-label="什么是MySQL多实例？">什么是MySQL多实例？</a></li>
                <li>
                    <a href="#mysql%e5%a4%9a%e5%ae%9e%e4%be%8b%e7%9a%84%e4%bd%9c%e7%94%a8%e4%b8%8e%e9%97%ae%e9%a2%98" aria-label="MySQL多实例的作用与问题">MySQL多实例的作用与问题</a><ul>
                        
                <li>
                    <a href="#%e6%9c%89%e6%95%88%e5%88%a9%e7%94%a8%e6%9c%8d%e5%8a%a1%e5%99%a8%e8%b5%84%e6%ba%90" aria-label="有效利用服务器资源">有效利用服务器资源</a></li>
                <li>
                    <a href="#%e8%8a%82%e7%ba%a6%e6%9c%8d%e5%8a%a1%e5%99%a8%e8%b5%84%e6%ba%90" aria-label="节约服务器资源">节约服务器资源</a></li></ul>
                </li>
                <li>
                    <a href="#mysql%e5%a4%9a%e5%ae%9e%e4%be%8b%e7%9a%84%e7%94%9f%e4%ba%a7%e5%ba%94%e7%94%a8%e5%9c%ba%e6%99%af" aria-label="MySQL多实例的生产应用场景">MySQL多实例的生产应用场景</a><ul>
                        
                <li>
                    <a href="#%e8%b5%84%e9%87%91%e7%b4%a7%e5%bc%a0%e5%9e%8b%e5%85%ac%e5%8f%b8%e7%9a%84%e9%80%89%e6%8b%a9" aria-label="资金紧张型公司的选择">资金紧张型公司的选择</a></li>
                <li>
                    <a href="#%e5%b9%b6%e5%8f%91%e4%b8%8d%e6%98%af%e7%89%b9%e5%88%ab%e5%a4%a7%e7%9a%84%e4%b8%9a%e5%8a%a1" aria-label="并发不是特别大的业务">并发不是特别大的业务</a></li>
                <li>
                    <a href="#%e9%97%a8%e6%88%b7%e7%bd%91%e7%ab%99%e5%ba%94%e7%94%a8mysql%e5%a4%9a%e5%ae%9e%e4%be%8b%e5%9c%ba%e6%99%af" aria-label="门户网站应用MySQL多实例场景">门户网站应用MySQL多实例场景</a></li></ul>
                </li>
                <li>
                    <a href="#mysql%e5%a4%9a%e5%ae%9e%e4%be%8b%e5%b8%b8%e8%a7%81%e7%9a%84%e9%85%8d%e7%bd%ae%e6%96%b9%e6%a1%88" aria-label="MySQL多实例常见的配置方案">MySQL多实例常见的配置方案</a><ul>
                        
                <li>
                    <a href="#%e5%8d%95%e4%b8%80%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%8d%95%e4%b8%80%e5%90%af%e5%8a%a8%e7%a8%8b%e5%ba%8f%e5%a4%9a%e5%ae%9e%e4%be%8b%e9%83%a8%e7%bd%b2%e6%96%b9%e6%a1%88" aria-label="单一配置文件、单一启动程序多实例部署方案">单一配置文件、单一启动程序多实例部署方案</a></li>
                <li>
                    <a href="#%e5%a4%9a%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%a4%9a%e5%90%af%e5%8a%a8%e7%a8%8b%e5%ba%8f%e9%83%a8%e7%bd%b2%e6%96%b9%e6%a1%88" aria-label="多配置文件多启动程序部署方案">多配置文件多启动程序部署方案</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%ae%89%e8%a3%85mysql%e5%a4%9a%e5%ae%9e%e4%be%8b" aria-label="安装MySQL多实例">安装MySQL多实例</a><ul>
                        
                <li>
                    <a href="#%e5%ae%89%e8%a3%85mysql%e9%9c%80%e8%a6%81%e7%9a%84%e4%be%9d%e8%b5%96%e5%8c%85%e5%92%8c%e7%bc%96%e8%af%91%e8%bd%af%e4%bb%b6" aria-label="安装MySQL需要的依赖包和编译软件">安装MySQL需要的依赖包和编译软件</a></li>
                <li>
                    <a href="#%e9%87%87%e7%94%a8%e7%bc%96%e8%af%91%e6%96%b9%e5%bc%8f%e5%ae%89%e8%a3%85mysql" aria-label="采用编译方式安装MySQL">采用编译方式安装MySQL</a></li>
                <li>
                    <a href="#%e5%88%9b%e5%bb%bamysql%e5%a4%9a%e5%ae%9e%e4%be%8b%e7%9a%84%e6%95%b0%e6%8d%ae%e6%96%87%e4%bb%b6%e7%9b%ae%e5%bd%95" aria-label="创建MySQL多实例的数据文件目录">创建MySQL多实例的数据文件目录</a></li>
                <li>
                    <a href="#%e5%88%9b%e5%bb%bamysql%e5%a4%9a%e5%ae%9e%e4%be%8b%e7%9a%84%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" aria-label="创建MySQL多实例的配置文件">创建MySQL多实例的配置文件</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae%e6%9d%83%e9%99%90" aria-label="配置权限">配置权限</a></li>
                <li>
                    <a href="#mysql%e7%9b%b8%e5%85%b3%e5%91%bd%e4%bb%a4%e5%8a%a0%e5%85%a5%e5%85%a8%e5%b1%80%e8%b7%af%e5%be%84%e7%9a%84%e9%85%8d%e7%bd%ae" aria-label="MySQL相关命令加入全局路径的配置">MySQL相关命令加入全局路径的配置</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%88%9d%e5%a7%8b%e5%8c%96%e5%a4%9a%e5%ae%9e%e4%be%8b%e6%95%b0%e6%8d%ae%e5%ba%93%e6%96%87%e4%bb%b6" aria-label="初始化多实例数据库文件">初始化多实例数据库文件</a><ul>
                        
                <li>
                    <a href="#%e5%88%9d%e5%a7%8b%e5%8c%96mysql%e6%95%b0%e6%8d%ae%e5%ba%93" aria-label="初始化MySQL数据库">初始化MySQL数据库</a></li>
                <li>
                    <a href="#%e5%88%9d%e5%a7%8b%e5%8c%96%e6%95%b0%e6%8d%ae%e5%8f%af%e7%9a%84%e5%8e%9f%e7%90%86%e5%8f%8a%e7%bb%93%e6%9e%9c%e8%af%b4%e6%98%8e" aria-label="初始化数据可的原理及结果说明">初始化数据可的原理及结果说明</a></li></ul>
                </li>
                <li>
                    <a href="#mysql%e5%a4%9a%e5%ae%9e%e4%be%8b%e5%90%af%e5%8a%a8%e6%95%85%e9%9a%9c%e6%8e%92%e9%94%99%e8%af%b4%e6%98%8e" aria-label="MySQL多实例启动故障排错说明">MySQL多实例启动故障排错说明</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae%e5%8f%8a%e7%ae%a1%e7%90%86mysql%e5%a4%9a%e5%ae%9e%e4%be%8b%e6%95%b0%e6%8d%ae%e5%ba%93" aria-label="配置及管理MySQL多实例数据库">配置及管理MySQL多实例数据库</a><ul>
                        
                <li>
                    <a href="#%e9%85%8d%e7%bd%aemysql%e5%a4%9a%e5%ae%9e%e4%be%8b%e6%95%b0%e6%8d%ae%e5%ba%93%e5%bc%80%e6%9c%ba%e8%87%aa%e5%90%af%e5%8a%a8" aria-label="配置MySQL多实例数据库开机自启动">配置MySQL多实例数据库开机自启动</a></li>
                <li>
                    <a href="#mysql%e5%a4%9a%e5%ae%9e%e4%be%8b%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e7%ae%a1%e7%90%86%e6%96%b9%e6%b3%95" aria-label="MySQL多实例数据库的管理方法">MySQL多实例数据库的管理方法</a></li>
                <li>
                    <a href="#%e9%87%8d%e5%90%af%e5%a4%9a%e5%ae%9e%e4%be%8b" aria-label="重启多实例">重启多实例</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%a4%9a%e5%ae%9e%e4%be%8bmysql%e7%99%bb%e9%99%86%e9%97%ae%e9%a2%98" aria-label="多实例MySQL登陆问题">多实例MySQL登陆问题</a></li>
                <li>
                    <a href="#%e5%a4%9a%e5%ae%9e%e4%be%8b%e6%9c%ac%e5%9c%b0%e7%99%bb%e9%99%86mysql" aria-label="多实例本地登陆MySQL">多实例本地登陆MySQL</a><ul>
                        
                <li>
                    <a href="#%e8%bf%9c%e7%a8%8b%e8%bf%9e%e6%8e%a5%e7%99%bb%e9%99%86mysql" aria-label="远程连接登陆mysql">远程连接登陆mysql</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e5%b8%b8%e8%a7%81%e9%94%99%e8%af%af" aria-label="常见错误">常见错误</a><ul>
                        
                <li>
                    <a href="#%e5%ae%89%e8%a3%85%e6%8a%a5%e9%94%99%e8%a7%a3%e5%86%b3" aria-label="安装报错解决">安装报错解决</a><ul>
                        
                <li>
                    <a href="#access-denied-for-user-rootlocalhost-using-password-no" aria-label="Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: NO)"><code>Access denied for user 'root'@'localhost' (using password: NO)</code></a></li>
                <li>
                    <a href="#error-cant-createwrite-to-file" aria-label="Error: Can&#39;t create/write to file"><code>Error: Can't create/write to file</code></a></li>
                <li>
                    <a href="#error-2002-hy000-cant-connect-to-local" aria-label="ERROR 2002 (HY000): Can&#39;t connect to local"><code>ERROR 2002 (HY000): Can't connect to local</code></a></li>
                <li>
                    <a href="#error-while-loading-shared-libraries" aria-label="error while loading shared libraries:"><code>error while loading shared libraries:</code></a></li>
                <li>
                    <a href="#warning-the-host-xxx" aria-label="WARNING: The host &#39;xxx&#39;"><code>WARNING: The host 'xxx'</code></a></li>
                <li>
                    <a href="#error-1004-cant-create-file" aria-label="ERROR: 1004 Can’t create file"><code>ERROR: 1004 Can’t create file</code></a></li></ul>
                </li>
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8%e9%94%99%e8%af%af%e8%a7%a3%e5%86%b3" aria-label="使用错误解决">使用错误解决</a><ul>
                        
                <li>
                    <a href="#error-2006" aria-label="ERROR 2006">ERROR 2006</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content">
    





<div class="copyrightTopBlock">
    <p>本文发布于<a href="https://www.oomkill.com/about" target="_blank">Cylon的收藏册</a>，转载请著名原文链接~</p>
    <div class="articleSuffix-bg"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 147.78 155.96"> <path d="M10.5,99.81a1.9,1.9,0,0,0-.53-.09,1.66,1.66,0,0,0-1.64,1.65A1.64,1.64,0,0,0,10,103a1.57,1.57,0,0,0,.87-.25l26.76,26.82.45-1.08L11.52,101.91A1.65,1.65,0,0,0,10.5,99.81Zm-.13,2a.57.57,0,0,1-.8,0,.58.58,0,0,1-.17-.41.58.58,0,0,1,.57-.57h0a.57.57,0,0,1,.56.58A.55.55,0,0,1,10.37,101.77Z" style="fill:#c5c9e0"></path><path d="M56.15,117.58H39.06l0-.09a1.65,1.65,0,0,0-1.36-1H37.5a1.65,1.65,0,1,0,1.56,2.19H55.7L92.92,156h41.44v-1.08h-41Zm-18.25.94a.56.56,0,0,1-.79,0,.58.58,0,0,1-.17-.41.57.57,0,0,1,.56-.57h0a.58.58,0,0,1,.57.58A.54.54,0,0,1,37.9,118.52Z" style="fill:#c5c9e0"></path><path d="M23.52,50.32a1.65,1.65,0,0,0,1.55-1.11H55.28l48-48.13h31.06V0H102.85l-48,48.13H25.07a1.64,1.64,0,0,0-2.09-1,1.64,1.64,0,0,0,.54,3.2Zm0-2.21a.57.57,0,0,1,0,1.13.57.57,0,1,1,0-1.13Z" style="fill:#c5c9e0"></path><polygon points="102.86 0 102.86 0 102.86 0 102.86 0" style="fill:#c5c9e0"></polygon><path d="M107.72,12.14h26.64V11.07H107.27L57.4,61H3.09a1.66,1.66,0,0,0-1.45-.86H1.52A1.65,1.65,0,1,0,2.81,63a1.59,1.59,0,0,0,.45-.87H57.85ZM2.05,62.23a.57.57,0,0,1-.8,0,.58.58,0,0,1-.17-.41.57.57,0,0,1,.56-.57h.09a.57.57,0,0,1,.32,1Z" style="fill:#c5c9e0"></path><path d="M134.36,43.22V42.14h-22.3l-9.62,9.63a1.64,1.64,0,0,0-2.19.77,1.61,1.61,0,0,0-.17.71,1.65,1.65,0,1,0,3.29,0,1.61,1.61,0,0,0-.16-.72l9.3-9.32Zm-32.64,10.6a.57.57,0,0,1,0-1.13.57.57,0,0,1,0,1.13Z" style="fill:#c5c9e0"></path><path d="M147,52.3l-9,9H111.48a1.64,1.64,0,0,0-1.61-1.33h-.14a1.65,1.65,0,1,0,1.6,2.41h27.19l9.26-9.29L147,52.3Zm-37.15,9.85a.56.56,0,0,1-.56-.57h0a.56.56,0,0,1,.56-.56h0a.57.57,0,1,1,0,1.13Z" style="fill:#c5c9e0"></path><path d="M66.79,75.35l11,11.06h56.53V85.33H78.27l-11-11.06H49.49L37.12,86.67a1.64,1.64,0,0,0-2.09,1,1.61,1.61,0,0,0-.09.54,1.65,1.65,0,0,0,3.29,0,1.68,1.68,0,0,0-.26-.89l12-12ZM36.58,88.79a.57.57,0,1,1,.57-.56A.57.57,0,0,1,36.58,88.79Z" style="fill:#c5c9e0"></path><path d="M110.61,95.55,92.8,113.4a1.62,1.62,0,1,0,.77.76l17.49-17.53h23.31V95.55ZM92.49,115.28a.56.56,0,0,1-.8,0,.58.58,0,0,1-.17-.41.57.57,0,0,1,.57-.57h0a.58.58,0,0,1,.56.58A.55.55,0,0,1,92.49,115.28Z" style="fill:#c5c9e0"></path><path d="M97.89,122.3H76.62L64.2,109.85a1.65,1.65,0,0,0-.77-2.2,1.77,1.77,0,0,0-.72-.17h-.14a1.65,1.65,0,0,0,.15,3.29,1.58,1.58,0,0,0,.71-.17l12.74,12.77H98.34l17.48-17.52h18.54v-1.08h-19ZM63.12,109.53a.56.56,0,0,1-.8,0,.58.58,0,0,1-.17-.41.57.57,0,0,1,1.14,0A.54.54,0,0,1,63.12,109.53Z" style="fill:#c5c9e0"></path> </svg> </div>
</div><h2 id="mysql数据库简介">MySQL数据库简介<a hidden class="anchor" aria-hidden="true" href="#mysql数据库简介">¶</a></h2>
<p>编程语言排名：http://www.tiobe.com/tiobe-index</p>
<p>数据库排名：http://db-engines.com/en/ranking</p>
<h3 id="mysql数据库分类与版本升级">MySQL数据库分类与版本升级<a hidden class="anchor" aria-hidden="true" href="#mysql数据库分类与版本升级">¶</a></h3>
<p>MySQL数据库官网为http://www.mysql.com，其发布的MySQL版本采用双授权政策，和大多数开源产品的路线一样，分别为社区版和商业版，而这两个版本又各自分四个版本依次发布，这四个版本为Alpha版、Beta版、RC版和GA版（GA正式发布版）</p>
<h3 id="mysql数据库商业版和社区版的区别">MySQL数据库商业版和社区版的区别<a hidden class="anchor" aria-hidden="true" href="#mysql数据库商业版和社区版的区别">¶</a></h3>
<p>在前面的内容已经阐述过了，MySQL的版本发布采用双授权政策，即分为社区版和商业版，而这两个版本又各自分四个版本依次发布：Alpha版、Beta版、RC版和GA版（GA正式发布版）</p>
<h3 id="alpha版">Alpha版<a hidden class="anchor" aria-hidden="true" href="#alpha版">¶</a></h3>
<p>Alpha版一般只在开发的公司内部运行，不对外公开。主要死开发者自己对产品进行测试，检查产品是否存在缺陷、错误，验证产品功能与说明书、用户手册是否一致。MySQL是属于开放源代码的开源产品，因此需要世界各地开发者、爱好者和用户参与软件的开发测试和手册编写等工作。所以会对外公布此版本的源码和产品，方便任何人可以参与开发测试工作，甚至编写与修改用户手册。</p>
<h3 id="beta版">Beta版<a hidden class="anchor" aria-hidden="true" href="#beta版">¶</a></h3>
<p>Beta版一般是完成功能的开发和所有的测试工作时候的产品，不会存在较大的功能或性能BUG，并且邀请或提供给公户体验与测试，以便更全面地测试软件的不足之处或存在的问题。</p>
<h3 id="rc版">RC版<a hidden class="anchor" aria-hidden="true" href="#rc版">¶</a></h3>
<p>RC版属于生产环境发布之前的一个小版本或称候选版，是根据Beta测试结果，收集到的BUG或缺陷之处等收集到信息，进行修复和完善之后的新一版本</p>
<h3 id="ga版">GA版<a hidden class="anchor" aria-hidden="true" href="#ga版">¶</a></h3>
<p>GA版是软件产品正式发布的版本，也称生产版本的产品。一般情况下，企业生产环境都会选择GA版本的MySQL软件，用于真实的生产环境中。偶尔有个别的大型企业会追求新功能驱动而牺牲稳定性使用其他版本，但这个是个例。</p>
<h3 id="mysql四中发布版本选择说明">MySQL四中发布版本选择说明<a hidden class="anchor" aria-hidden="true" href="#mysql四中发布版本选择说明">¶</a></h3>
<p>MySQL AB官方网站会把五种数据库版本都提供下载，主要是MySQL数据库属于开发源代码的数据库产品，鼓励全球的技术爱好者参与研发、测试、文档编写和经验分享，甚至包过产品发展规划，对于Development版本、Alpha版本和Beta版本是绝对不允许使用在任何生产环境，毕竟这是一个GA版本之前，也即生产版本发布之前的一个小版本。另外，对MySQL数据库GA版本，也是需要慎重选择，开源社区产品毕竟不是经过严格的测试工序完成的产品，是全球开源技术人员的资源完成的，会存在比商业产品稳定性弱的缺陷。更严格的选择见后文。</p>
<h3 id="mysql产品路线">MySQL产品路线<a hidden class="anchor" aria-hidden="true" href="#mysql产品路线">¶</a></h3>
<h4 id="mysql产品路线变更历史背景">MySQL产品路线变更历史背景<a hidden class="anchor" aria-hidden="true" href="#mysql产品路线变更历史背景">¶</a></h4>
<p>早起MySQL也是遵循版本号逐渐增加的方式发展的，格式例如：mysql-x.xx.xx.tar.gz，例如DBA都非常熟悉的生产场景版本：4.1.7、5.0.56等。</p>
<p>近几年，为了提高MySQL产品的竞争优势、以及提高性能、降低开发维护成本等原因，同时，更方便企业用户更精准的选择适合的版本产品用于自己的企业生产环境中。
MySQL在发展到5.1系列版本之后，重新规划为3条产品线</p>
<h4 id="50xx到51xx产品线介绍">5.0.xx到5.1.xx产品线介绍<a hidden class="anchor" aria-hidden="true" href="#50xx到51xx产品线介绍">¶</a></h4>
<p>第一条产品线：5.0.xx及升级到5.1.xx的产品系列，这条产品线继续完善与改进其用户体验和性能，同时增加新功能，这条路线可以说是MySQL早起产品的延续系列，这一系列的产品发布情况及历史版本如下：
MySQL 5.1是当前稳定（产品质量）发布系列。只针对漏洞修复重新发布；没有增加会影响稳定性的新功能。</p>
<ul>
<li>MySQL 5.1:Previous stable(production-quality) release
MySQL 5.0是前一稳定（产品质量）发布系列。只针对严重漏洞修复和安全修复重新发布；没有增加会影响该系列的重要功能。</li>
<li>MySQL 5.0:Old stable release nearing the end of the product lifecycle
MySQL 4.0和3.23是旧的稳定(产品质量)发布系列。该版本不再使用，新的发布只用来修复特别严重的漏洞(以前的安全问题)。</li>
</ul>
<h4 id="54xx开始到57xx产品线系列介绍">5.4.xx开始到5.7.xx产品线系列介绍<a hidden class="anchor" aria-hidden="true" href="#54xx开始到57xx产品线系列介绍">¶</a></h4>
<p>为了更好的整合MySQL AB公司社区和第三方公司开发的新存储引擎，以及吸收新的实现算法等，从而更好的支持SMP架构，提高性能而做了大量的代码重构。版本号为从5.4.xx开始，目前发展到了5.6.x
主流：互联网公司用mysql5.5，逐步过渡到5.6。</p>
<h4 id="60xx-71xx产品线系列介绍">6.0.xx-7.1.xx产品线系列介绍<a hidden class="anchor" aria-hidden="true" href="#60xx-71xx产品线系列介绍">¶</a></h4>
<p>第三条产品线：为了更好的推广MySQL Cluster版本，以及提高MySQL Cluster的性能和稳定性，以及功能改进和增加，以及改动mysql基础功能，使其对Cluster存储引擎提供更有效地支持与优化。版本号为6.0.xx开发，目前发展到7.1.xx</p>
<h3 id="mysql数据库软件命名介绍">MySQL数据库软件命名介绍<a hidden class="anchor" aria-hidden="true" href="#mysql数据库软件命名介绍">¶</a></h3>
<p>MySQL数据库软件的名字是由3个数字和一个后缀组成的版本号。例如，像 <code>mysql-5.0.56.tar.gz</code> 的版本号这样解释：</p>
<ul>
<li>第一个数字（5）为主版本号，描述了文件格式。所有版本5发行都有相同文件格式。</li>
<li>第二个数字（0）为发行级别，主版本号和发行级别组合到一起便构成了发行序列号。</li>
<li>第三个数字（56 为在此发行系列的版本号，随每个新分发版本递增。通常你需要已经选择的发行(release)的最新版本。</li>
</ul>
<p>每次更新后，版本字符串的最后一个数字递增。如果相对于前一个版本增加了新功能或有微小的不兼容性，字符串的第二个数字递增。如果文件格式改变，第一个数字递增。
后缀显示发现的稳定性级别。通过一系列后缀显示如何改进稳定性。可能的后缀有：</p>
<p><em><strong>alpha</strong></em> 表明发行包含大量未被彻底测试的新代码。已知的缺陷应该在新闻小节被记录。请参见附录D：MySQL变更史。在大多数alpha版本中也有新的命令和扩展。alpha版本也可能有主要代码更改等开发。但我们在发布前一定对其进行测试。</p>
<p><em><strong>beta</strong></em> 意味着该版本功能是完整的，并且所有的新代码被测试了，没有增加重要的新特征，应该没有已知的缺陷。当alpha版本至少一个月没有出现报导的致命漏洞，并且没有计划增加导致已经实施的功能不稳定的新功能时，版本则从alpha版变为beta版。在以后的beta版、发布版或产品发布中，所有API、外部可视结构和SQL命令列均不再更改。</p>
<p><em><strong>rc</strong></em> 是发布代表；是一个发行了一段时间的beta版本，看起来应该运行正常。只增加了很小的修复。(发布代表即以前所称的gamma 版)
如果没有后缀，这意味着该版本已经在很多地方运行一段时间了，而且没有非平台特定的缺陷报告。只增加了关键漏洞修复修复。这就是我们称为一个产品（稳定）或“通用”版本的东西。</p>
<p>MySQL的命名机制于其它产品稍有不同。一般情况，我们可以很放心地使用已经投放市场两周而没有被相同发布系列的新版本所代替的版本。</p>
<h4 id="mysql产品版本最终选择建议">MySQL产品版本最终选择建议<a hidden class="anchor" aria-hidden="true" href="#mysql产品版本最终选择建议">¶</a></h4>
<ul>
<li>稳定版：选择开源的社区版的稳定GA版本。</li>
<li>产品线：可以选择5.1或5.5，互联网公司主流5.5，其次是5.1和5.6</li>
<li>选择MySQL数据库GA版本发布后6个月以上的GA版本</li>
<li>选择前后几个月没有打的BUG修复的版本，二不是大量修复BUG的集中版本</li>
<li>最好向后较长时间没有更新发布的版本</li>
<li>考虑开发人员开发程序使用的版本是否兼容你选择的版本</li>
<li>作为内部开发测试数据库环境，跑大概3-6个月的时间</li>
<li>优先企业非核心业务采用新版本的数据库GA版本软件</li>
<li>向DBA高手请教，使用真正的高手们使用过得好用的GA版本产品</li>
<li>经过上述工序后，若是没有重要功能BUG或性能瓶颈，则可以开始开率作为任何业务数据服务的后端数据库软件。</li>
</ul>
<h2 id="安装mysql">安装MySQL<a hidden class="anchor" aria-hidden="true" href="#安装mysql">¶</a></h2>
<p>最正宗的产品线5.1及以前：常规的编译方式安装MySQL</p>
<p>所谓常规方式编译安装MySQL就是延续早起MySQL的3部曲安装方式，即 <code>./configure; make; make install</code></p>
<p>此种方式适合所有 MySQL 5.0.xx ~ 5.1.xx产品系列，是最常规的编译方式。</p>
<h3 id="采用cmake方式编译安装mysql">采用cmake方式编译安装MySQL<a hidden class="anchor" aria-hidden="true" href="#采用cmake方式编译安装mysql">¶</a></h3>
<p>由于MySQL 5.5.xx ~ 5.6.xx 产品系列特殊性，所以编译方式也和早期的产品安装方式不同，采用cmake或gmake方式编译安装。即 <code>./cmake;make;make install</code>，生产场景具体命令及参数为</p>
<h4 id="采用二进制方式免编译安装mysql">采用二进制方式免编译安装MySQL<a hidden class="anchor" aria-hidden="true" href="#采用二进制方式免编译安装mysql">¶</a></h4>
<p>采用二进制方式免编译安装MySQL，这种方式和yum/rpm包安装方式类似，适合类MySQL产品系列，不需要负载的编译设置及编译时间等待，直接解压下载的软件包，初始化可完成mysql的安装启动。</p>
<h4 id="如何正确选择mysql的安装方式">如何正确选择MySQL的安装方式<a hidden class="anchor" aria-hidden="true" href="#如何正确选择mysql的安装方式">¶</a></h4>
<p>yum/rpm安装适合对数据库要求不太高的场合，例如并发不大，公司内部，企业内部的一些应用场景。二进制免安装比较简单方便，适合5.0-5.1和5.5-5.6系列，是很多专业DBA的选择，普通linux运维人员多采用编译的方式，5.0-5.1采用的常规方式，5.5-5.6采用cmake方式。</p>
<p>建议，安装机器较少，推荐cmake方式，数量多了就用二进制免安装。</p>
<h3 id="mysql下载">MySQL下载<a hidden class="anchor" aria-hidden="true" href="#mysql下载">¶</a></h3>
<p><a href="http://www.mysql.com">http://www.mysql.com</a></p>
<ul>
<li>enterprise：企业版 商业版</li>
<li>community：社区版</li>
<li>yum repository：yum仓库（centos redhat fedora）</li>
<li>apt repository：apt-get仓库（debian Ubuntu）</li>
<li>SUSE repository：suse仓库</li>
<li>window：windows版</li>
</ul>
<h4 id="企业场景mysql安装方式">企业场景MySQL安装方式<a hidden class="anchor" aria-hidden="true" href="#企业场景mysql安装方式">¶</a></h4>
<table>
<thead>
<tr>
<th style="text-align:center">序号</th>
<th>安装方式</th>
<th>特点说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1   </td>
<td>yum/rpm包安装</td>
<td>简单、速度快，但是不能定制安装，入门新手常用这种方式</td>
</tr>
<tr>
<td style="text-align:center">2</td>
<td>二进制安装</td>
<td><font style="background:#fee904;" size=2> 解压软件</font>，简单配置后就能使用，<font style="background:#fee904;" size=2>不用安装</font>，速度较快，专业DBA喜欢这种方式。软件名如：<br><font style="background:#fee904;" size=2>linux-5.5.32-linux2.6-x86_64.tar.gz</font><br><font style="background:#fee904;" size=2>mysql-5.6.33-linux-glibc2.5-x86_64.tar</font></td>
</tr>
<tr>
<td style="text-align:center">3</td>
<td>源码编译安装</td>
<td>可以定制安装，但是安装时间长，例如：字符集安装路径等，软件名：<font style="background:#fee904;" size=2>linux-5.5.32.tar.gz</font>。<br>针对mysql5.1；<br>mysql5.5以上 <code>./cmake</code> ; <code>gmake;gmake instal</code> ;</td>
</tr>
<tr>
<td style="text-align:center">4</td>
<td>源码软件结合yum/rpm安装</td>
<td>把源码软件制作成符合要求的rpm，放到yum仓库里，然后通过yum来安装，结合上面1和3的优点，即安装快速，可任意定制参数，但是安装者需要具备更深能力。</td>
</tr>
</tbody>
</table>
<p>默认路径 usr/local/mysql</p>
<p>大型门户把源码根据企业的需求制作成rpm，搭建yum仓库，yum install xxx -y</p>
<h3 id="二进制包安装">二进制包安装<a hidden class="anchor" aria-hidden="true" href="#二进制包安装">¶</a></h3>
<h4 id="创建mysql用的账号">创建MySQL用的账号<a hidden class="anchor" aria-hidden="true" href="#创建mysql用的账号">¶</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">useradd -s /sbin/nologin -M mysql
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="二进制方式安装mysql">二进制方式安装mysql<a hidden class="anchor" aria-hidden="true" href="#二进制方式安装mysql">¶</a></h4>
<p>解压软件包</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tar -zxf mysql-5.5.32-linux2.6-x86_64.tar.gz
</span></span></code></pre></td></tr></table>
</div>
</div><p>移动目录</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mv mysql-5.5.32-linux2.6-x86_64 /app/mysql-5.5.32
</span></span></code></pre></td></tr></table>
</div>
</div><p>创建软连接，生成去掉版本号的路径方便访问</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ln -s /app/mysql-5.5.32/ /app/mysql
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p><font color="#0215cd" size=2>提示：操作到此部，相当于编译安装make install之后</font></p>
<hr>
<h4 id="初始化mysql">初始化MySQL<a hidden class="anchor" aria-hidden="true" href="#初始化mysql">¶</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ /app/mysql/scripts/mysql_install_db <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--basedir<span class="o">=</span>/app/mysql/ <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--datadir<span class="o">=</span>/app/mysql/data <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--user<span class="o">=</span>mysql
</span></span><span class="line"><span class="cl">WARNING: The host <span class="s1">&#39;centos&#39;</span> could not be looked up with resolveip.
</span></span><span class="line"><span class="cl">This probably means that your libc libraries are not <span class="m">100</span> % compatible
</span></span><span class="line"><span class="cl">with this binary MySQL version. The MySQL daemon, mysqld, should work
</span></span><span class="line"><span class="cl">normally with the exception that host name resolving will not work.
</span></span><span class="line"><span class="cl">This means that you should use IP addresses instead of hostnames
</span></span><span class="line"><span class="cl">when specifying MySQL privileges !
</span></span><span class="line"><span class="cl">Installing MySQL system tables...
</span></span><span class="line"><span class="cl">OK
</span></span><span class="line"><span class="cl">Filling <span class="nb">help</span> tables...
</span></span><span class="line"><span class="cl">OK
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">To start mysqld at boot <span class="nb">time</span> you have to copy
</span></span><span class="line"><span class="cl">support-files/mysql.server to the right place <span class="k">for</span> your system
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">.....
</span></span><span class="line"><span class="cl">.....
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">You can start the MySQL daemon with:
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /app/mysql/ <span class="p">;</span> /app/mysql//bin/mysqld_safe <span class="p">&amp;</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">You can <span class="nb">test</span> the MySQL daemon with mysql-test-run.pl
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> /app/mysql//mysql-test <span class="p">;</span> perl mysql-test-run.pl
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Please report any problems with the /app/mysql//scripts/mysqlbug script!
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="初始化mysql配置文件">初始化MySQL配置文件<a hidden class="anchor" aria-hidden="true" href="#初始化mysql配置文件">¶</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ls /app/mysql/support-files/*.cnf
</span></span><span class="line"><span class="cl">my-huge.cnf
</span></span><span class="line"><span class="cl">my-innodb-heavy-4G.cnf
</span></span><span class="line"><span class="cl">my-large.cnf
</span></span><span class="line"><span class="cl">my-medium.cnf
</span></span><span class="line"><span class="cl">my-small.cnf
</span></span><span class="line"><span class="cl"> <span class="c1"># my-medium.cnf &lt; my-small.cnf &lt; my-small.cnf &lt; my-huge.cnf &lt; my-innodb-heavy-4G.cnf</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>虚拟机测试环境下选择my-small.cnf配置模板。如果是生产环境可以根据硬件配置选择高级的配置文件</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cp /app/mysql/support-files/my-small.cnf /etc/my.cnf
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="配置启动mysql数据库">配置启动MySql数据库<a hidden class="anchor" aria-hidden="true" href="#配置启动mysql数据库">¶</a></h4>
<p>设置启动脚本
二进制默认安装路径是/usr/local/mysql，启动脚本里是/usr/local/mysql都需要替换</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 启动脚本</span>
</span></span><span class="line"><span class="cl">/app/mysql/bin/mysqld_safe
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 替换命令</span>
</span></span><span class="line"><span class="cl">sed -i <span class="s1">&#39;s#/usr/local/mysql#/app/mysql#g&#39;</span> /app/mysql/bin/mysqld_safe
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>启动数据库</strong></p>
</blockquote>
<ol>
<li>传统方式</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cp mysql.server /etc/init.d/mysqld
</span></span><span class="line"><span class="cl">sed -i <span class="s1">&#39;s#/usr/local/mysql#/app/mysql#g&#39;</span> /etc/init.d/mysqld
</span></span><span class="line"><span class="cl">chmod +x /etc/init.d/mysqld
</span></span><span class="line"><span class="cl">killall mysqld
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ /etc/init.d/mysqld start
</span></span><span class="line"><span class="cl">Starting MySQL.. SUCCESS!
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ /etc/init.d/mysqld stop
</span></span><span class="line"><span class="cl">Shutting down MySQL. SUCCESS!
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">$ /app/mysql/bin/mysqld_safe <span class="p">&amp;</span> <span class="c1">#&lt;==“&amp;”作用是在后台执行MySQL服务</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>mysql启动错误</strong></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ ./mysql start
</span></span><span class="line"><span class="cl">Starting MySQL...
</span></span><span class="line"><span class="cl">$ <span class="m">170521</span> 22:59:38 mysqld_safe error: log-error <span class="nb">set</span> to <span class="s1">&#39;/data/3306/logs/mysql_3306.err&#39;</span>, however file don<span class="s1">&#39;t exists. Create writable for user &#39;</span>mysql<span class="err">&#39;</span>.
</span></span></code></pre></td></tr></table>
</div>
</div><p>mysqlbug <a href="https://bugs.mysql.com/bug.php?id=84427">https://bugs.mysql.com/bug.php?id=84427</a></p>
<blockquote>
<p><strong>检查MySQL数据库是否启动</strong></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ lsof -i :3306
</span></span><span class="line"><span class="cl">COMMAND   PID    USER    FD   TYPE  DEVICE  SIZE/OFF  NODE  NAME
</span></span><span class="line"><span class="cl">mysqld    <span class="m">38313</span>  mysql   10u  IPv4  <span class="m">73384</span>   0t0       TCP   *:mysql <span class="o">(</span>LISTEN<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="配置mysql命令全局使用">配置mysql命令全局使用<a hidden class="anchor" aria-hidden="true" href="#配置mysql命令全局使用">¶</a></h4>
<blockquote>
<p><strong>配置全局路径的意义</strong></p>
</blockquote>
<p>如果不为MySQL的命令配置全局路径，就无法直接在命令行输入mysql这样的命令，只能用全局命令</p>
<p>方法1：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">vi /etc/profile
</span></span><span class="line"><span class="cl"><span class="nv">PATH</span><span class="o">=</span><span class="s2">&#34;/app/mysql/bin:</span><span class="nv">$PATH</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">source</span> /etc/profile
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;PATH=&#34;/app/mysql/bin:$PATH&#34;&#39;</span> &gt;&gt;/etc/profile <span class="o">&amp;&amp;</span> . /etc/profile
</span></span></code></pre></td></tr></table>
</div>
</div><p>方法2：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 尽量往前面拷，要不会和系统yum安装的mysql冲突</span>
</span></span><span class="line"><span class="cl">cp /app/mysql/bin/* /usr/local/sbin 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ which mysql
</span></span><span class="line"><span class="cl"><span class="c1"># 如果找到的是 /usr/bin是系统yum安装的，不要让我们安装的和yum安装的冲突</span>
</span></span><span class="line"><span class="cl">/app/mysql/bin/mysql  
</span></span></code></pre></td></tr></table>
</div>
</div><p>方法3：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ln -s /app/mysql/bin/* /usr/local/sbin/
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p><strong><font color="#0215cd" size=2>特别强调：必须把MySQL命令路径放在PATH路径中的前面，否则可能会导使用了mysql等命令和编译安装的不是一个，进而产生错误。</font></strong></p>
<hr>
<p>yum安装MySQL命令访问编译安装的服务器而出来问题：http://oldboy.blog.51cto/25614110/011</p>
<h4 id="mysql-56-二进制包安装">MySQL-5.6 二进制包安装<a hidden class="anchor" aria-hidden="true" href="#mysql-56-二进制包安装">¶</a></h4>
<p>安装成功提示：与MySQL 5.5.x一样看到两个OK即安装完毕</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ /app/mysql/scripts/mysql_install_db <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--basedir<span class="o">=</span>/app/mysql/ <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--datadir<span class="o">=</span>/app/mysql/data <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--user<span class="o">=</span>mysql
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">WARNING: The host <span class="s1">&#39;lamp_server&#39;</span> could not be looked up with /app/mysql//bin/resolveip.
</span></span><span class="line"><span class="cl">This probably means that your libc libraries are not <span class="m">100</span> % compatible
</span></span><span class="line"><span class="cl">with this binary MySQL version. The MySQL daemon, mysqld, should work
</span></span><span class="line"><span class="cl">normally with the exception that host name resolving will not work.
</span></span><span class="line"><span class="cl">This means that you should use IP addresses instead of hostnames
</span></span><span class="line"><span class="cl">when specifying MySQL privileges !
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Installing MySQL system tables...2016-09-28 17:45:23 <span class="m">0</span> <span class="o">[</span>Warning<span class="o">]</span> TIMESTAMP with implicit DEFAULT
</span></span><span class="line"><span class="cl">....
</span></span><span class="line"><span class="cl">....
</span></span><span class="line"><span class="cl">OK
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Filling <span class="nb">help</span> tables...2016-09-28 17:45:28 <span class="m">0</span> 
</span></span><span class="line"><span class="cl"><span class="o">[</span>Warning<span class="o">]</span> TIMESTAMP with implicit DEFAULT value is deprecated. 
</span></span><span class="line"><span class="cl">Please use --explicit_defaults_for_timestamp server option <span class="o">(</span>see documentation <span class="k">for</span> more details<span class="o">)</span>.
</span></span><span class="line"><span class="cl">....
</span></span></code></pre></td></tr></table>
</div>
</div><p>将启动脚本复制到/etc/ini.d下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cp support-files/mysql.server /etc/init.d/mysqld
</span></span><span class="line"><span class="cl">cp my.cnf /etc/my.cnf <span class="c1">#←修改配置文件</span>
</span></span><span class="line"><span class="cl">vi /etc/my.cnf
</span></span></code></pre></td></tr></table>
</div>
</div><p>[mysqld] 中添加：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">basedir</span> <span class="o">=</span> /usr/local/mysql
</span></span><span class="line"><span class="cl"><span class="nv">datadir</span> <span class="o">=</span> /usr/local/mysql/data
</span></span><span class="line"><span class="cl"><span class="nv">port</span> <span class="o">=</span> <span class="m">3306</span>
</span></span><span class="line"><span class="cl"><span class="nv">server_id</span> <span class="o">=</span> <span class="m">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>将全局启动命令做个链接</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ln -s /app/mysql/bin/mysql /usr/bin
</span></span><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;PATH=/app/mysql/bin:</span><span class="nv">$PATH</span><span class="s2">&#34;</span> &gt;&gt;/etc/profile
</span></span></code></pre></td></tr></table>
</div>
</div><p>mysql5.6二进制后登陆</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$  mysql -uroot -p
</span></span><span class="line"><span class="cl">Welcome to the MySQL monitor.  Commands end with <span class="p">;</span> or <span class="se">\g</span>.
</span></span><span class="line"><span class="cl">Your MySQL connection id is <span class="m">2</span>
</span></span><span class="line"><span class="cl">Server version: 5.6.33 MySQL Community Server <span class="o">(</span>GPL<span class="o">)</span>
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Copyright <span class="o">(</span>c<span class="o">)</span> 2000, 2016, Oracle and/or its affiliates. All rights reserved.
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Oracle is a registered trademark of Oracle Corporation and/or its
</span></span><span class="line"><span class="cl">affiliates. Other names may be trademarks of their respective
</span></span><span class="line"><span class="cl">owners.
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">Type <span class="s1">&#39;help;&#39;</span> or <span class="s1">&#39;\h&#39;</span> <span class="k">for</span> help. Type <span class="s1">&#39;\c&#39;</span> to clear the current input statement.
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">mysql&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="mysql多实例">MySQL多实例<a hidden class="anchor" aria-hidden="true" href="#mysql多实例">¶</a></h2>
<h3 id="什么是mysql多实例">什么是MySQL多实例？<a hidden class="anchor" aria-hidden="true" href="#什么是mysql多实例">¶</a></h3>
<p>简单的说，MySQL多实例就是一台服务器上同时开启多个不同的服务器端口（如3306、3307），同时运行多个MySQL服务器进程，这些服务进程通过不同socket监听不同的服务端口来提供服务。</p>
<p>这些MySQL多实例共用一套MySQL安装程序，使用不同的my.cnf（也可相同）配置文件、启动程序（也可以相同）的数据文件。在提供服务时，多实例MySQL在逻辑上看来是各自独立的，他们根据配置文件的对应设定值，获得服务器相应数量的硬件资源。</p>
<p>MySQL多实例就相当于房子的多个我是，每个实例可以看做一件我是，整个服务器就是一套房子，服务器的硬件资源（cpu,mem,disk）、软件资源（centos）可以看做房子的卫生间、厨房、客厅，是房子的公用资源。</p>
<p>nginx apache Haproxy memcached redis等都可配置多实例。</p>
<h3 id="mysql多实例的作用与问题">MySQL多实例的作用与问题<a hidden class="anchor" aria-hidden="true" href="#mysql多实例的作用与问题">¶</a></h3>
<h4 id="有效利用服务器资源">有效利用服务器资源<a hidden class="anchor" aria-hidden="true" href="#有效利用服务器资源">¶</a></h4>
<p>当单个服务器资源有剩余时，可以充分利用剩余的资源提供更多的服务，实现资源的逻辑隔离。</p>
<h4 id="节约服务器资源">节约服务器资源<a hidden class="anchor" aria-hidden="true" href="#节约服务器资源">¶</a></h4>
<p>当公司自己紧张，但是数据库又需要各自尽量独立地提供服务，而且需要主从复制等技术，多实例就再好不过了。</p>
<p>当某个数据库实例并发很高或者有SQL慢查询时，整个实例会消耗大量的系统CPU、磁盘IO等资源，导致服务器上的其他数据库实例提供服务的质量一起下降。会存在资源互抢占问题。不同实例获取的资源是相对立的，无法像虚拟化一样完全隔离。</p>
<h3 id="mysql多实例的生产应用场景">MySQL多实例的生产应用场景<a hidden class="anchor" aria-hidden="true" href="#mysql多实例的生产应用场景">¶</a></h3>
<h4 id="资金紧张型公司的选择">资金紧张型公司的选择<a hidden class="anchor" aria-hidden="true" href="#资金紧张型公司的选择">¶</a></h4>
<p>若公司资金紧张，公司业务访问量又不太大，但又希望不同业务的数据库服务各自尽量独立的提供服务而互相不收影响，同时，还需要主从复制等技术提供备份或读写分离服务，那么，多实例就再好不过了。比如：可以通过3台服务器部署9-15个实例，交叉做主从复制、数据备份及读写分离，这样就可达到9-15太服务器每个只装一个数据库才有的效果。这里要强调的是，所谓的尽量独立是相对的。</p>
<h4 id="并发不是特别大的业务">并发不是特别大的业务<a hidden class="anchor" aria-hidden="true" href="#并发不是特别大的业务">¶</a></h4>
<p>当公司业务访问量不太大的时候，服务器的资源基本都是浪费的，这时就很适合多实例的应用，如果对SQL语句的优化做的比较好，MySQL多实例会是一个很值得使用的技术，及时并发很大，合理分配好系统资源以及搭配好系统服务，也不会有太大问题</p>
<h4 id="门户网站应用mysql多实例场景">门户网站应用MySQL多实例场景<a hidden class="anchor" aria-hidden="true" href="#门户网站应用mysql多实例场景">¶</a></h4>
<p>门户网站通常都会使用多实例，因为配置硬件好的服务器，可节省IDC机柜空间，同时，跑多实例也会减少硬件资源跑不满的浪费。一般是丛库多实例，例如某部门中使用的IBM服务器为48核，96GB内存，一台服务器跑3-4个实例。(高配多实例，节省机柜空间，虚拟化也是这样)</p>
<h3 id="mysql多实例常见的配置方案">MySQL多实例常见的配置方案<a hidden class="anchor" aria-hidden="true" href="#mysql多实例常见的配置方案">¶</a></h3>
<h4 id="单一配置文件单一启动程序多实例部署方案">单一配置文件、单一启动程序多实例部署方案<a hidden class="anchor" aria-hidden="true" href="#单一配置文件单一启动程序多实例部署方案">¶</a></h4>
<p>下面是MySQL官方文档提到的单一配置文件、单一启动程序多实例部署方案，不推荐此方案，这里仅作为知识点提及，不在涉及此方案说明。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>mysqld_multi<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">mysqld</span><span class="o">=</span>/usr/bin/mysqld_safe
</span></span><span class="line"><span class="cl"><span class="nv">mysqladmin</span><span class="o">=</span>/usr/bin/mysqladmin
</span></span><span class="line"><span class="cl"><span class="nv">user</span><span class="o">=</span>mysql
</span></span><span class="line"><span class="cl"><span class="o">[</span>mysql1<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">socket</span><span class="o">=</span>/var/lib/mysql/mysql.sock
</span></span><span class="line"><span class="cl"><span class="nv">port</span><span class="o">=</span><span class="m">3306</span>
</span></span><span class="line"><span class="cl">pid-file<span class="o">=</span>/var/lib/mysql/mysql.pid
</span></span><span class="line"><span class="cl"><span class="nv">datadir</span><span class="o">=</span>/var/lib/mysql
</span></span><span class="line"><span class="cl"><span class="nv">user</span><span class="o">=</span>mysql
</span></span><span class="line"><span class="cl"><span class="o">[</span>mysql1<span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="nv">socket</span><span class="o">=</span>/var/lib/mysql/mysql.sock
</span></span><span class="line"><span class="cl"><span class="nv">port</span><span class="o">=</span><span class="m">3306</span>
</span></span><span class="line"><span class="cl">pid-file<span class="o">=</span>/var/lib/mysql/mysql.pid
</span></span><span class="line"><span class="cl"><span class="nv">datadir</span><span class="o">=</span>/var/lib/mysql
</span></span><span class="line"><span class="cl"><span class="nv">user</span><span class="o">=</span>mysql
</span></span><span class="line"><span class="cl">skip-name-resolve
</span></span><span class="line"><span class="cl">server-id<span class="o">=</span><span class="m">10</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mysql_multi --config-file<span class="o">=</span>/data/mysql/my_multi.cnf start 1,2 <span class="c1">#&lt;==启动命令</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>对于该方案，缺点是耦合度太高，一个配置文件，不好管理。工作开发和运维的统一。原则：降低耦合度。</p>
<h4 id="多配置文件多启动程序部署方案">多配置文件多启动程序部署方案<a hidden class="anchor" aria-hidden="true" href="#多配置文件多启动程序部署方案">¶</a></h4>
<p>以下是已经部署好的MySQL-5.5双实例的目录信息及文件注释说明</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">data
</span></span><span class="line"><span class="cl">├── <span class="m">3306</span>
</span></span><span class="line"><span class="cl">│   ├── my.cnf   <span class="c1">#&lt;==配置文件</span>
</span></span><span class="line"><span class="cl">│ ├── data     <span class="c1">#&lt;==数据文件</span>
</span></span><span class="line"><span class="cl">│   └── mysql <span class="c1">#&lt;==多实例启动脚本</span>
</span></span><span class="line"><span class="cl">└── <span class="m">3307</span>
</span></span><span class="line"><span class="cl">    ├── my.cnf
</span></span><span class="line"><span class="cl">└── mysql
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="安装mysql多实例">安装MySQL多实例<a hidden class="anchor" aria-hidden="true" href="#安装mysql多实例">¶</a></h3>
<h4 id="安装mysql需要的依赖包和编译软件">安装MySQL需要的依赖包和编译软件<a hidden class="anchor" aria-hidden="true" href="#安装mysql需要的依赖包和编译软件">¶</a></h4>
<p>安装MySQL之前需要安装MySQL依赖包</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">yum install -y libaio-devel ncurses-devel
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>安装编译MySQL需要的软件</strong></p>
</blockquote>
<p>因MySQL5.5系列采用的cmake编译，需要先下载安装cmake</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">yum install cmake -y
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="采用编译方式安装mysql">采用编译方式安装MySQL<a hidden class="anchor" aria-hidden="true" href="#采用编译方式安装mysql">¶</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">tar zxf mysql-5.5.52.tar.gz
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> mysql-5.5.52
</span></span></code></pre></td></tr></table>
</div>
</div><p>编译参数</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">cmake . -DCMAKE_INSTALL_PREFIX<span class="o">=</span>/app/mysql-5.5.54 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-DMSQL_DATADIR<span class="o">=</span>/app/mysql-5.5.54/data <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-DMYSQL_UNIX_ADDR<span class="o">=</span>/app/mysql-5.5.54/tmp/mysql.sock <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-DDEFAULT_CHARSET<span class="o">=</span>utf8 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-DDEFAULT_COLLATION<span class="o">=</span>utf8_general_ci <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-DEXTRA_CHARSETS<span class="o">=</span>gbk,gb2312,utf8,ascii <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-DENABLED_LOCAL_INFILE<span class="o">=</span>ON <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-DWITH_INNOBASE_STORAGE_ENGINE<span class="o">=</span><span class="m">1</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-DWITH_FEDERATED_STORAGE_ENGINE<span class="o">=</span><span class="m">1</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-DWITH_BLACKHOLE_STORAGE_ENGINE<span class="o">=</span><span class="m">1</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-DWITH_EXAMPLE_STORAGE_ENGINE<span class="o">=</span><span class="m">1</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-DWITHOUT_PARTITION_STORAGE_ENGINE<span class="o">=</span><span class="m">1</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-DWITH_FAST_MUTEXES<span class="o">=</span><span class="m">1</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-DWITH_ZLIB<span class="o">=</span>bundled <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-DENABLED_LOCAL_INFILE<span class="o">=</span><span class="m">1</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-DWITH_READLINE<span class="o">=</span><span class="m">1</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-DWITH_EMBEDDED_SERVER<span class="o">=</span><span class="m">1</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>-DWITH_DEBUG<span class="o">=</span><span class="m">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>创建软连接</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ln -s /app/mysql-5.5.54/ /app/mysql
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="创建mysql多实例的数据文件目录">创建MySQL多实例的数据文件目录<a hidden class="anchor" aria-hidden="true" href="#创建mysql多实例的数据文件目录">¶</a></h4>
<p>在企业中，通常以 <code>/data</code> 目录作为MySQL多实例总的根目录，然后规划不同的数字（即MySQL实例端口号）作为/data下面的二级目录，不同的二级目录对应的数字就作为MySQL实例的端口号，以区别不同的实例，数字对应的二级目录下包含MySQL的数据文件、配置文件及启动文件等。
创建数据目录</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mkdir -p /data/<span class="o">{</span>3306,3307<span class="o">}</span>/data 
</span></span><span class="line"><span class="cl"><span class="c1"># 多个可以依次累加，生产环境中一般3-4个实例为最佳。</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="创建mysql多实例的配置文件">创建MySQL多实例的配置文件<a hidden class="anchor" aria-hidden="true" href="#创建mysql多实例的配置文件">¶</a></h4>
<p>MySQL数据库默认为用户提供了多个配置文件模板，用户可以根据服务器硬件配置的大小来选择。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$  ls /app/mysql/support-files/my*.cnf
</span></span><span class="line"><span class="cl">my-huge.cnf             
</span></span><span class="line"><span class="cl">my-medium.cnf
</span></span><span class="line"><span class="cl">my-innodb-heavy-4G.cnf  
</span></span><span class="line"><span class="cl">my-small.cnf
</span></span><span class="line"><span class="cl">my-large.cnf
</span></span></code></pre></td></tr></table>
</div>
</div><p>上面是单实例的默认配置文件模板，如果配置多实例，和单实例会有不同。为了让MySQL多实例之间彼此独立，因此要为每一个实例建立一个my.cnf配置文件和一个启动文件mysql，让他们分别对应自己的数据文件目录data
创建配置文件及目录略，一般都是用配置好的配置文件与脚本</p>
<h4 id="配置权限">配置权限<a hidden class="anchor" aria-hidden="true" href="#配置权限">¶</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$  find /data -type f -name <span class="s1">&#39;mysql&#39;</span> <span class="c1">#&lt;==启动脚本中存在mysql密码要注意权限</span>
</span></span><span class="line"><span class="cl">/data/3306/mysql
</span></span><span class="line"><span class="cl">/data/3307/mysql
</span></span><span class="line"><span class="cl">find /data -type f -name <span class="s1">&#39;mysql&#39;</span><span class="p">|</span>xargs chmod <span class="m">700</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="mysql相关命令加入全局路径的配置">MySQL相关命令加入全局路径的配置<a hidden class="anchor" aria-hidden="true" href="#mysql相关命令加入全局路径的配置">¶</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s2">&#34;PATH=/app/mysql/bin:</span><span class="nv">$PATH</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">ln -s /app/mysql/bin/* /usr/sbin/ 
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="初始化多实例数据库文件">初始化多实例数据库文件<a hidden class="anchor" aria-hidden="true" href="#初始化多实例数据库文件">¶</a></h3>
<p>上述步骤全部配置完毕后，就可以初始化数据库文件了，这个步骤其实也可以在编译安装MySQL之后就操作，只不过放到这里更合理，</p>
<h4 id="初始化mysql数据库">初始化MySQL数据库<a hidden class="anchor" aria-hidden="true" href="#初始化mysql数据库">¶</a></h4>
<p>初始化数据库会有很多提示，如果没有error级别的错误，有两个ok字样表示初始化成功，否则就解决初始化问题</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> /app/mysql/script/
</span></span><span class="line"><span class="cl">./mysql_install_db <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--basedir<span class="o">=</span>/app/mysql/ <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--datedir<span class="o">=</span>/data/3306/data <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--user<span class="o">=</span>mysql
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">./mysql_install_db <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--basedir<span class="o">=</span>/app/mysql/ <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--datadir<span class="o">=</span>/data/3306/data <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--user<span class="o">=</span>mysql <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--defaults-file<span class="o">=</span>/data/3306/my.cnf
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="初始化数据可的原理及结果说明">初始化数据可的原理及结果说明<a hidden class="anchor" aria-hidden="true" href="#初始化数据可的原理及结果说明">¶</a></h4>
<p>初始化数据库的实质就是创建基础的数据库系统的库文件，例如：生成MySQL库表等。
初始化数据可偶查看对应实例的数据目录，可以看到多了一些文件
启动MySQL多实例数据库</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">/data/3306/mysql start
</span></span><span class="line"><span class="cl">/data/3307/mysql start
</span></span><span class="line"><span class="cl"> 
</span></span><span class="line"><span class="cl">$ netstat -nltup       
</span></span><span class="line"><span class="cl">tcp      <span class="m">0</span>      <span class="m">0</span> 0.0.0.0:3306    0.0.0.0:*    LISTEN     38980/mysqld        
</span></span><span class="line"><span class="cl">tcp      <span class="m">0</span>      <span class="m">0</span> 0.0.0.0:3307    0.0.0.0:*    LISTEN     22942/mysqld        
</span></span><span class="line"><span class="cl">tcp      <span class="m">0</span>      <span class="m">0</span> :::52113             :::*    LISTEN     1123/sshd  
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="mysql多实例启动故障排错说明">MySQL多实例启动故障排错说明<a hidden class="anchor" aria-hidden="true" href="#mysql多实例启动故障排错说明">¶</a></h3>
<p>如果MySQL多实例有服务没有被启动，排查办法如下：</p>
<p>如果发现没有显示MySQL对应实例的端口，请稍微等待几秒再检查，MySQL服务的启动比web服务慢一些</p>
<p>如果还是不行，请查看MySQL服务对应实例的错误日志，错误日志路径在my.cnf配置的最下面定义。</p>
<p>例如3306的错误日志为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>mysqld_safe<span class="o">]</span>
</span></span><span class="line"><span class="cl">log-error<span class="o">=</span>/data/3306/mysql_3306.err
</span></span><span class="line"><span class="cl">pid-file<span class="o">=</span>/data/3306/mysqld.pid
</span></span></code></pre></td></tr></table>
</div>
</div><ol>
<li>细看所有执行命令返回屏幕输出，不要忽略关键的输出内容。</li>
<li>辅助查看系统日志/var/log/message</li>
<li>如果是MySQL关联了其他服务。要同时查看相关服务的日志</li>
</ol>
<h3 id="配置及管理mysql多实例数据库">配置及管理MySQL多实例数据库<a hidden class="anchor" aria-hidden="true" href="#配置及管理mysql多实例数据库">¶</a></h3>
<h4 id="配置mysql多实例数据库开机自启动">配置MySQL多实例数据库开机自启动<a hidden class="anchor" aria-hidden="true" href="#配置mysql多实例数据库开机自启动">¶</a></h4>
<p>服务的开机自启动很关键，MySQL多实例的启动也不例外。</p>
<blockquote>
<p><strong>登陆MySQL测试</strong></p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">$ mysql -S /data/3306/mysql.sock  #←socket用于区别不同的实例
</span></span><span class="line"><span class="cl">Welcome to the MySQL monitor.  Commands end with ; or \g.
</span></span><span class="line"><span class="cl">.....
</span></span><span class="line"><span class="cl">Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the current input statement.
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="mysql多实例数据库的管理方法">MySQL多实例数据库的管理方法<a hidden class="anchor" aria-hidden="true" href="#mysql多实例数据库的管理方法">¶</a></h4>
<p>MySQL安装完成后，默认root账户是没有密码的，登陆不同的实例需要指定不同实例的socket路径及文件，在my.cnf中指定的。注意：不同的socket虽然名字相同，但是路径是不同的，因此是不同的文件。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">mysql -S /data/3306/mysql.sock
</span></span><span class="line"><span class="cl">mysql -S /data/3307/mysql.sock
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="重启多实例">重启多实例<a hidden class="anchor" aria-hidden="true" href="#重启多实例">¶</a></h4>
<p>若要重启多实例数据库也需要进行相应的配置。在重启数据库前，需要调整不同实例启动文件里对应的数据库密码：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sed -n <span class="s1">&#39;13p&#39;</span> mysql
</span></span><span class="line"><span class="cl">sed -i <span class="s1">&#39;s#mysql_pwd=&#34;oldboy&#34;#mysql_pwd=&#34;111&#34;#g&#39;</span> mysql ../3307/mysql
</span></span><span class="line"><span class="cl">sed -i <span class="s1">&#39;s#mysql_pwd=&#34;oldboy&#34;#mysql_pwd=&#34;111&#34;#g&#39;</span> mysql ../3307/mysql
</span></span><span class="line"><span class="cl">sed -n <span class="s1">&#39;13p&#39;</span> mysql
</span></span></code></pre></td></tr></table>
</div>
</div><p>由于选择了<code>mysqladmin shutdown</code>的停止方式，所以停止数据库时，需要在启动文件里配置数据库的密码。上面由于密码不对，顾提示密码不对的错误</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ /data/3306/mysql stop
</span></span><span class="line"><span class="cl">Stoping MySQL...
</span></span><span class="line"><span class="cl">/app/mysql/bin/mysqladmin: connect to server at <span class="s1">&#39;localhost&#39;</span> failed
</span></span><span class="line"><span class="cl">error: <span class="s1">&#39;Access denied for user &#39;</span>root<span class="s1">&#39;@&#39;</span>localhost<span class="s1">&#39; (using password: YES)&#39;</span>
</span></span><span class="line"><span class="cl">$ /data/3306/mysql stop -S /data/3306/mysql.sock   
</span></span><span class="line"><span class="cl">Stoping MySQL...
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<p>提示：禁止使用pkill、kill -9 killall -9等命令强制杀死数据库，这回引起数据库无法启动等故障发生。</p>
<hr>
<h3 id="多实例mysql登陆问题">多实例MySQL登陆问题<a hidden class="anchor" aria-hidden="true" href="#多实例mysql登陆问题">¶</a></h3>
<h3 id="多实例本地登陆mysql">多实例本地登陆MySQL<a hidden class="anchor" aria-hidden="true" href="#多实例本地登陆mysql">¶</a></h3>
<p>多实例本地登陆一般是通过socket文件来指定具体登陆到那个实例的，此文件的具体位置是在mysql编译过程或my.cnf文件里指定的。在本地登陆数据库时，登陆程序会通过socket文件来判断登陆的是哪个数据库实例。</p>
<p>例如：通过mysql -uroot -p111 -S /data/3307/mysql.sock可知，登陆的是3307实例。mysql.sock是MySQL服务器端与本地MySQL客户端进行通信的Unix套接字文件。</p>
<h4 id="远程连接登陆mysql">远程连接登陆mysql<a hidden class="anchor" aria-hidden="true" href="#远程连接登陆mysql">¶</a></h4>
<p>远程登陆MySQL多实例中的一个实例时，通过TCP端口(port)来指定所要登陆的MySQL实例，此端口的配置是在MySQL配置文件my.cnf指定的</p>
<p>例如：在<code>mysql -uroot -p111 -h192.16-P3307 -P</code>为端口参数，后面接具体的实例端口，端口是一种 “逻辑连接位置” ，是客户端程序被分派到计算机上特殊服务程序的一种方式，强调提前在192.168.1.2上对该用户做授权。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">DROP</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="s1">&#39;monitor&#39;</span><span class="o">@</span><span class="s1">&#39;%&#39;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">user</span><span class="p">,</span><span class="k">host</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">mysql</span><span class="p">.</span><span class="k">user</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">+</span><span class="c1">----------+------------+
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">user</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="k">host</span><span class="w">    </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">+</span><span class="c1">----------+------------+
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">root</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="mi">127</span><span class="p">.</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">root</span><span class="w">     </span><span class="o">|</span><span class="w"> </span><span class="n">localhost</span><span class="w">  </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">+</span><span class="c1">----------+------------+
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">--MySQL的用户加主机名组成一个用户
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="k">user</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">+</span><span class="c1">----------------+
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">user</span><span class="p">()</span><span class="w">         </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">+</span><span class="c1">----------------+
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">root</span><span class="o">@</span><span class="n">localhost</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">+</span><span class="c1">----------------+
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="常见错误">常见错误<a hidden class="anchor" aria-hidden="true" href="#常见错误">¶</a></h2>
<h3 id="安装报错解决">安装报错解决<a hidden class="anchor" aria-hidden="true" href="#安装报错解决">¶</a></h3>
<h4 id="access-denied-for-user-rootlocalhost-using-password-no"><code>Access denied for user 'root'@'localhost' (using password: NO)</code><a hidden class="anchor" aria-hidden="true" href="#access-denied-for-user-rootlocalhost-using-password-no">¶</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">ERROR</span><span class="w"> </span><span class="mi">1045</span><span class="w"> </span><span class="p">(</span><span class="mi">28000</span><span class="p">):</span><span class="w"> </span><span class="k">Access</span><span class="w"> </span><span class="n">denied</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="s1">&#39;root&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span><span class="w"> </span><span class="p">(</span><span class="k">using</span><span class="w"> </span><span class="n">password</span><span class="p">:</span><span class="w"> </span><span class="k">NO</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>问题原因：密码不对哦</p>
<h4 id="error-cant-createwrite-to-file"><code>Error: Can't create/write to file</code><a hidden class="anchor" aria-hidden="true" href="#error-cant-createwrite-to-file">¶</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">Error</span><span class="p">:</span><span class="w"> </span><span class="n">Can</span><span class="s1">&#39;t create/write to file &#39;</span><span class="o">/</span><span class="n">tmp</span><span class="o">/#</span><span class="n">sql_4f4_0</span><span class="p">.</span><span class="n">MYD</span><span class="s1">&#39; (Errcode: 17)
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>问题原因： 权限问题</p>
<p>解决方法：<code>chmod -R 1777 /tmp</code></p>
<h4 id="error-2002-hy000-cant-connect-to-local"><code>ERROR 2002 (HY000): Can't connect to local</code><a hidden class="anchor" aria-hidden="true" href="#error-2002-hy000-cant-connect-to-local">¶</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">ERROR</span><span class="w"> </span><span class="mi">2002</span><span class="w"> </span><span class="p">(</span><span class="n">HY000</span><span class="p">):</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Can</span><span class="s1">&#39;t connect to local MySQL server through socket &#39;</span><span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">run</span><span class="o">/</span><span class="n">mysqld</span><span class="o">/</span><span class="n">mysqld</span><span class="p">.</span><span class="n">sock</span><span class="s1">&#39; (2)
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>问题原因：⑴ 服务没启动 ⑵ 配置文件中socket文件与编译时指定路径不一致</p>
<p>解决方法：⑴ 启动服务 ⑵ 多实例启动指定socket文件</p>
<h4 id="error-while-loading-shared-libraries"><code>error while loading shared libraries:</code><a hidden class="anchor" aria-hidden="true" href="#error-while-loading-shared-libraries">¶</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">$ /app/mysql/scripts/mysql_install_db <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--basedir<span class="o">=</span>/app/mysql/ <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--datadir<span class="o">=</span>/app/mysql/data <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--user<span class="o">=</span>mysql
</span></span><span class="line"><span class="cl">Installing MySQL system tables...
</span></span><span class="line"><span class="cl">/app/mysql//bin/mysqld:error <span class="k">while</span> loading shared libraries: libaio.so.1: cannot open shared object file: No such file or directory
</span></span></code></pre></td></tr></table>
</div>
</div><p>问题原因：缺少libaio包支持</p>
<p>解决方法：安装后重新初始化即可</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">yum -install libaio* -y
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="warning-the-host-xxx"><code>WARNING: The host 'xxx'</code><a hidden class="anchor" aria-hidden="true" href="#warning-the-host-xxx">¶</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">WARNING: The host <span class="s1">&#39;centos&#39;</span> could not be looked up with resolveip.
</span></span></code></pre></td></tr></table>
</div>
</div><p>问题原因：需要修改主机名的解析，使其和uname -n一样</p>
<h4 id="error-1004-cant-create-file"><code>ERROR: 1004 Can’t create file</code><a hidden class="anchor" aria-hidden="true" href="#error-1004-cant-create-file">¶</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ERROR: <span class="m">1004</span> Can’t create file <span class="s1">&#39;/tmp/#sql300e_1_0.frm&#39;</span> <span class="o">(</span>error: 13<span class="o">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>解决：原因是/tmp权限有问题(不解决，后面可能无法登陆数据库)</p>
<h3 id="使用错误解决">使用错误解决<a hidden class="anchor" aria-hidden="true" href="#使用错误解决">¶</a></h3>
<h4 id="error-2006">ERROR 2006<a hidden class="anchor" aria-hidden="true" href="#error-2006">¶</a></h4>
<p>在大批量导入数据库时，出现如下错误</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ERROR <span class="m">2006</span> <span class="o">(</span>HY000<span class="o">)</span>: MySQL server has gone away
</span></span><span class="line"><span class="cl">No connection. Trying to reconnect...
</span></span></code></pre></td></tr></table>
</div>
</div><p>排查思路：后来检查了没有导入成功的几篇文章，其大小都在8MB以上，会不会是单条记录太大了导致出现<code>ERROR 2006 (HY000): MySQL server has gone away</code>的呢？</p>
<p><strong>查看允许的最大值</strong></p>
<p>登陆MySQL后，使用如下命令查询：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="k">global</span><span class="w"> </span><span class="n">variables</span><span class="w"> </span><span class="k">like</span><span class="w"> </span><span class="s1">&#39;max_allowed_packet&#39;</span><span class="p">;</span><span class="w">   
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">+</span><span class="c1">--------------------+---------+
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Variable_name</span><span class="w">      </span><span class="o">|</span><span class="w"> </span><span class="n">Value</span><span class="w">   </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">+</span><span class="c1">--------------------+---------+
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">max_allowed_packet</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">8388608</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">+</span><span class="c1">--------------------+---------+
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>上限是刚好8MB，怪不得报错。</p>
<blockquote>
<p>即时生效方法</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">set</span><span class="w"> </span><span class="k">global</span><span class="w"> </span><span class="n">max_allowed_packet</span><span class="o">=</span><span class="mi">1024</span><span class="o">*</span><span class="mi">1024</span><span class="o">*</span><span class="mi">16</span><span class="p">;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>可在不重启MySQL的情况下立即生效，但是重启后就会恢复原样。</p>
<blockquote>
<p>永久生效方法</p>
</blockquote>
<p>编辑 <code>/etc/my.cnf</code> ，将</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">max_allowed_packet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="n">M</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>修改为</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">max_allowed_packet</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="n">M</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>之后重新导入，就不会产生ERROR 2006 (HY000): MySQL server has gone away错误了。
Unknown/unsupported storage engine: Innodb
Plugin &lsquo;InnoDB&rsquo; init function returned error.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="n">warnings</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">+</span><span class="c1">---------+------+----------------------------------------+
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="k">Level</span><span class="w">   </span><span class="o">|</span><span class="w"> </span><span class="n">Code</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Message</span><span class="w">                                </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">+</span><span class="c1">---------+------+----------------------------------------+
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">|</span><span class="w"> </span><span class="n">Warning</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">1292</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">Truncated</span><span class="w"> </span><span class="n">incorrect</span><span class="w"> </span><span class="n">DOUBLE</span><span class="w"> </span><span class="n">value</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Y &#39;</span><span class="w"> </span><span class="o">|</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">+</span><span class="c1">---------+------+----------------------------------------+
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="mi">64</span><span class="w"> </span><span class="k">rows</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="w"> </span><span class="n">sec</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div>

    
    


<div class="copyrightBlock" >
    <div class="articleSuffix-bg"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 147.78 155.96"> <path d="M10.5,99.81a1.9,1.9,0,0,0-.53-.09,1.66,1.66,0,0,0-1.64,1.65A1.64,1.64,0,0,0,10,103a1.57,1.57,0,0,0,.87-.25l26.76,26.82.45-1.08L11.52,101.91A1.65,1.65,0,0,0,10.5,99.81Zm-.13,2a.57.57,0,0,1-.8,0,.58.58,0,0,1-.17-.41.58.58,0,0,1,.57-.57h0a.57.57,0,0,1,.56.58A.55.55,0,0,1,10.37,101.77Z" style="fill:#c5c9e0"></path><path d="M56.15,117.58H39.06l0-.09a1.65,1.65,0,0,0-1.36-1H37.5a1.65,1.65,0,1,0,1.56,2.19H55.7L92.92,156h41.44v-1.08h-41Zm-18.25.94a.56.56,0,0,1-.79,0,.58.58,0,0,1-.17-.41.57.57,0,0,1,.56-.57h0a.58.58,0,0,1,.57.58A.54.54,0,0,1,37.9,118.52Z" style="fill:#c5c9e0"></path><path d="M23.52,50.32a1.65,1.65,0,0,0,1.55-1.11H55.28l48-48.13h31.06V0H102.85l-48,48.13H25.07a1.64,1.64,0,0,0-2.09-1,1.64,1.64,0,0,0,.54,3.2Zm0-2.21a.57.57,0,0,1,0,1.13.57.57,0,1,1,0-1.13Z" style="fill:#c5c9e0"></path><polygon points="102.86 0 102.86 0 102.86 0 102.86 0" style="fill:#c5c9e0"></polygon><path d="M107.72,12.14h26.64V11.07H107.27L57.4,61H3.09a1.66,1.66,0,0,0-1.45-.86H1.52A1.65,1.65,0,1,0,2.81,63a1.59,1.59,0,0,0,.45-.87H57.85ZM2.05,62.23a.57.57,0,0,1-.8,0,.58.58,0,0,1-.17-.41.57.57,0,0,1,.56-.57h.09a.57.57,0,0,1,.32,1Z" style="fill:#c5c9e0"></path><path d="M134.36,43.22V42.14h-22.3l-9.62,9.63a1.64,1.64,0,0,0-2.19.77,1.61,1.61,0,0,0-.17.71,1.65,1.65,0,1,0,3.29,0,1.61,1.61,0,0,0-.16-.72l9.3-9.32Zm-32.64,10.6a.57.57,0,0,1,0-1.13.57.57,0,0,1,0,1.13Z" style="fill:#c5c9e0"></path><path d="M147,52.3l-9,9H111.48a1.64,1.64,0,0,0-1.61-1.33h-.14a1.65,1.65,0,1,0,1.6,2.41h27.19l9.26-9.29L147,52.3Zm-37.15,9.85a.56.56,0,0,1-.56-.57h0a.56.56,0,0,1,.56-.56h0a.57.57,0,1,1,0,1.13Z" style="fill:#c5c9e0"></path><path d="M66.79,75.35l11,11.06h56.53V85.33H78.27l-11-11.06H49.49L37.12,86.67a1.64,1.64,0,0,0-2.09,1,1.61,1.61,0,0,0-.09.54,1.65,1.65,0,0,0,3.29,0,1.68,1.68,0,0,0-.26-.89l12-12ZM36.58,88.79a.57.57,0,1,1,.57-.56A.57.57,0,0,1,36.58,88.79Z" style="fill:#c5c9e0"></path><path d="M110.61,95.55,92.8,113.4a1.62,1.62,0,1,0,.77.76l17.49-17.53h23.31V95.55ZM92.49,115.28a.56.56,0,0,1-.8,0,.58.58,0,0,1-.17-.41.57.57,0,0,1,.57-.57h0a.58.58,0,0,1,.56.58A.55.55,0,0,1,92.49,115.28Z" style="fill:#c5c9e0"></path><path d="M97.89,122.3H76.62L64.2,109.85a1.65,1.65,0,0,0-.77-2.2,1.77,1.77,0,0,0-.72-.17h-.14a1.65,1.65,0,0,0,.15,3.29,1.58,1.58,0,0,0,.71-.17l12.74,12.77H98.34l17.48-17.52h18.54v-1.08h-19ZM63.12,109.53a.56.56,0,0,1-.8,0,.58.58,0,0,1-.17-.41.57.57,0,0,1,1.14,0A.54.54,0,0,1,63.12,109.53Z" style="fill:#c5c9e0"></path> </svg> </div>
    <p>本文发布于<a href="https://www.oomkill.com/about" target="_blank">Cylon的收藏册</a>，转载请著名原文链接~</p>
    <p>链接：<a href="https://www.oomkill.com/2017/05/ch1-mysql-deployment/" target="_blank">https://www.oomkill.com/2017/05/ch1-mysql-deployment/</a></p>
    <p style="margin-bottom: 0px;">版权：本作品采用<a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">「署名-非商业性使用-相同方式共享 4.0 国际」</a> 许可协议进行许可。</p>
    </div>
</div>
  </div>

  <footer class="post-footer">
    
<nav class="paginav">
  <a class="prev" href="https://www.oomkill.com/2017/05/ch3-mysql-backup-and-restore/">
    <span class="title"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select: text;"><line x1="19" y1="12" x2="5" y2="12" style="user-select: text;"></line><polyline points="12 19 5 12 12 5" style="user-select: text;"></polyline>
      </polyline></svg>&nbsp; </span>
    
    <span>ch03 - MySQL的备份与恢复</span>
  </a>
  <a class="next" href="https://www.oomkill.com/2017/05/rsync/" >
    <span class="title"> </span>
    
    <span>同步工具rsync使用指南&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select: text;"><line x1="5" y1="12" x2="19" y2="12" style="user-select: text;"></line><polyline points="12 5 19 12 12 19" style="user-select: text;"></polyline></svg></span>
  </a>
</nav>

  </footer>

  
  <div class="pagination__title">
    <span class="pagination__title-h"></span>
  </div>
  
  
  
  
    <div class="comments-separator"></div>
    

  

  
    
      <div class="comments-separator"></div>
<div class="comments">
    <script>
    function loadComment() {
        let theme = localStorage.getItem('pref-theme') === 'dark' ? 'dark' : 'light';
        let s = document.createElement('script');
        s.src = 'https://giscus.app/client.js';
        s.setAttribute('data-repo', 'cylonchau\/cylonchau.github.io');
        s.setAttribute('data-repo-id', 'R_kgDOIRlNSQ');
        s.setAttribute('data-category', 'Announcements');
        s.setAttribute('data-category-id', 'DIC_kwDOIRlNSc4CXy1U');
        s.setAttribute('data-mapping', 'title');
        s.setAttribute('data-reactions-enabled', '1');
        s.setAttribute('data-emit-metadata', '1');
        s.setAttribute('data-input-position', 'top');
        s.setAttribute('data-lang', 'zh-TW');
        s.setAttribute('data-theme', theme);
        s.setAttribute('crossorigin', 'anonymous');
        s.setAttribute('async', '');
        document.querySelector('div.comments').innerHTML = '';
        document.querySelector('div.comments').appendChild(s);
    }
    loadComment();
    </script>
</div>
</article>
    </main>
    
<footer class="footer">
  <p>
  Copyright
  <span>&copy; 2024 <a href="https://www.oomkill.com">Cylon&#39;s Collection</a></span></p>
  <span style="display: inline-block; margin-left: 1em;">
    Powered by
    <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> on github-page & Theme
    <a href="https://github.com/reorx/hugo-PaperModX/" rel="noopener" target="_blank">PaperModX</a>
  </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <span class="topInner">
        <svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z"/>
        </svg>
        <span id="read_progress"></span>
    </span>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '1' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>

<script>
  document.addEventListener('scroll', function (e) {
      const readProgress = document.getElementById("read_progress");
      const scrollHeight = document.documentElement.scrollHeight;
      const clientHeight = document.documentElement.clientHeight;
      const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
      readProgress.innerText = ((scrollTop / (scrollHeight - clientHeight)).toFixed(2) * 100).toFixed(0);
  })
</script>

<script>
  var menu = document.getElementById('menu')
  if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
          localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
  }

  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
          e.preventDefault();
          var id = this.getAttribute("href").substr(1);
          if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
              document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                  behavior: "smooth"
              });
          } else {
              document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
          }
          if (id === "top") {
              history.replaceState(null, null, " ");
          } else {
              history.pushState(null, null, `#${id}`);
          }
      });
  });
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
      if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
          mybutton.style.visibility = "visible";
          mybutton.style.opacity = "1";
      } else {
          mybutton.style.visibility = "hidden";
          mybutton.style.opacity = "0";
      }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>
<script>
  document.querySelectorAll('pre > code').forEach((codeblock) => {
    const container = codeblock.parentNode.parentNode;

    const copybutton = document.createElement('button');
    copybutton.classList.add('copy-code');
    copybutton.innerText = 'copy';

    function copyingDone() {
      copybutton.innerText = 'copied';
      setTimeout(() => {
        copybutton.innerText = 'copy';
      }, 2000);
    }

    copybutton.addEventListener('click', (cb) => {
      if ('clipboard' in navigator) {
        navigator.clipboard.writeText(codeblock.textContent);
        copyingDone();
        return;
      }

      const range = document.createRange();
      range.selectNodeContents(codeblock);
      const selection = window.getSelection();
      selection.removeAllRanges();
      selection.addRange(range);
      try {
        document.execCommand('copy');
        copyingDone();
      } catch (e) { };
      selection.removeRange(range);
    });

    if (container.classList.contains("highlight")) {
      container.appendChild(copybutton);
    } else if (container.parentNode.firstChild == container) {
      
    } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
      
      codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
    } else {
      
      codeblock.parentNode.appendChild(copybutton);
    }
  });
</script>




<script>
  
  
  (function() {
    const enableTocScroll = '1' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

<script src="/js/instantclick.min.js" data-no-instant
></script>
<script data-no-instant>
  
  
  
  
  
  
  InstantClick.init();
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.6.0/mermaid.min.js" crossorigin="anonymous"></script>
<script>
    mermaid.init(undefined, '.language-mermaid');
</script>
</body>

</html>
