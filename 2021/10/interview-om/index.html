<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>运维类面试题收集 | Cylon's Collection</title>
<meta name=keywords content="SA"><meta name=description content="如何优化 Linux系统（笼统） 不用root，添加普通用户，通过sudo授权管理 更改默认的远程连接SSH服务端口及禁止root用户远程连接 定时自动更新服务器时间 配置国内yum源 关闭selinux及iptables（iptables工作场景如果有外网IP一定要打开，高并发除外） 调整文件描述符的数量 精简开机启动服务（crond rsyslog network sshd） 内核参数优化（/etc/sysctl.conf） 更改字符集，支持中文，但建议还是用英文字符集，防止乱码 锁定关键系统文件 清空/etc/issue，去除系统及内核版本登录前的屏幕显示 基础命令 ps aux 中的VSZ代表什么意思，RSS代表什么意思 VSZ:虚拟内存集,进程占用的虚拟内存空间 RSS:物理内存集,进程战用实际物理内存空间 shell下32位随机密码生成 text 1 cat /dev/urandom | head -1 | md5sum | head -c 32 >> /pass 将生成的32位随机数 保存到/pass文件里了
统计出nginx的access.log中访问量最多的5个IP text 1 cat access_log | awk '{print $1}' | sort | uniq -c | sort -n -r | head -5 web与lb 讲述一下LVS三种模式的工作过程 LVS负载的原理，和Nginx负载有啥区别 VS/NAT：（Virtual Server via Network Address Translation）"><meta name=author content="cylon"><link rel=canonical href=https://www.oomkill.com/2021/10/interview-om/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://www.oomkill.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.oomkill.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.oomkill.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.oomkill.com/favicon.ico><link rel=mask-icon href=https://www.oomkill.com/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://www.oomkill.com/2021/10/interview-om/><noscript><style>#theme-toggle,#top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link crossorigin=anonymous href=/assets/css/pe.min.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/pe.min.js></script><link rel=stylesheet href=https://cdn.staticfile.net/font-awesome/6.5.1/css/all.min.css><link rel=stylesheet href=https://cdn.staticfile.net/font-awesome/6.5.1/css/v4-shims.min.css><script id=MathJax-script async src=https://cdn.staticfile.net/mathjax/3.2.2/es5/tex-chtml.js></script><script>MathJax={tex:{displayMath:[["$$","$$"]],inlineMath:[["\\$","\\$"]]}}</script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"><meta property="og:title" content="运维类面试题收集"><meta property="og:description" content="如何优化 Linux系统（笼统） 不用root，添加普通用户，通过sudo授权管理 更改默认的远程连接SSH服务端口及禁止root用户远程连接 定时自动更新服务器时间 配置国内yum源 关闭selinux及iptables（iptables工作场景如果有外网IP一定要打开，高并发除外） 调整文件描述符的数量 精简开机启动服务（crond rsyslog network sshd） 内核参数优化（/etc/sysctl.conf） 更改字符集，支持中文，但建议还是用英文字符集，防止乱码 锁定关键系统文件 清空/etc/issue，去除系统及内核版本登录前的屏幕显示 基础命令 ps aux 中的VSZ代表什么意思，RSS代表什么意思 VSZ:虚拟内存集,进程占用的虚拟内存空间 RSS:物理内存集,进程战用实际物理内存空间 shell下32位随机密码生成 text 1 cat /dev/urandom | head -1 | md5sum | head -c 32 >> /pass 将生成的32位随机数 保存到/pass文件里了
统计出nginx的access.log中访问量最多的5个IP text 1 cat access_log | awk '{print $1}' | sort | uniq -c | sort -n -r | head -5 web与lb 讲述一下LVS三种模式的工作过程 LVS负载的原理，和Nginx负载有啥区别 VS/NAT：（Virtual Server via Network Address Translation）"><meta property="og:type" content="article"><meta property="og:url" content="https://www.oomkill.com/2021/10/interview-om/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-10-01T00:00:00+00:00"><meta property="article:modified_time" content="2023-03-18T23:00:36+08:00"><meta property="og:site_name" content="Cylon's Collection"><meta name=twitter:card content="summary"><meta name=twitter:title content="运维类面试题收集"><meta name=twitter:description content="如何优化 Linux系统（笼统） 不用root，添加普通用户，通过sudo授权管理 更改默认的远程连接SSH服务端口及禁止root用户远程连接 定时自动更新服务器时间 配置国内yum源 关闭selinux及iptables（iptables工作场景如果有外网IP一定要打开，高并发除外） 调整文件描述符的数量 精简开机启动服务（crond rsyslog network sshd） 内核参数优化（/etc/sysctl.conf） 更改字符集，支持中文，但建议还是用英文字符集，防止乱码 锁定关键系统文件 清空/etc/issue，去除系统及内核版本登录前的屏幕显示 基础命令 ps aux 中的VSZ代表什么意思，RSS代表什么意思 VSZ:虚拟内存集,进程占用的虚拟内存空间 RSS:物理内存集,进程战用实际物理内存空间 shell下32位随机密码生成 text 1 cat /dev/urandom | head -1 | md5sum | head -c 32 >> /pass 将生成的32位随机数 保存到/pass文件里了
统计出nginx的access.log中访问量最多的5个IP text 1 cat access_log | awk '{print $1}' | sort | uniq -c | sort -n -r | head -5 web与lb 讲述一下LVS三种模式的工作过程 LVS负载的原理，和Nginx负载有啥区别 VS/NAT：（Virtual Server via Network Address Translation）"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.oomkill.com/posts/"},{"@type":"ListItem","position":2,"name":"运维类面试题收集","item":"https://www.oomkill.com/2021/10/interview-om/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"运维类面试题收集","name":"运维类面试题收集","description":"如何优化 Linux系统（笼统） 不用root，添加普通用户，通过sudo授权管理 更改默认的远程连接SSH服务端口及禁止root用户远程连接 定时自动更新服务器时间 配置国内yum源 关闭selinux及iptables（iptables工作场景如果有外网IP一定要打开，高并发除外） 调整文件描述符的数量 精简开机启动服务（crond rsyslog network sshd） 内核参数优化（/etc/sysctl.conf） 更改字符集，支持中文，但建议还是用英文字符集，防止乱码 锁定关键系统文件 清空/etc/issue，去除系统及内核版本登录前的屏幕显示 基础命令 ps aux 中的VSZ代表什么意思，RSS代表什么意思 VSZ:虚拟内存集,进程占用的虚拟内存空间 RSS:物理内存集,进程战用实际物理内存空间 shell下32位随机密码生成 text 1 cat /dev/urandom | head -1 | md5sum | head -c 32 \u0026gt;\u0026gt; /pass 将生成的32位随机数 保存到/pass文件里了\n统计出nginx的access.log中访问量最多的5个IP text 1 cat access_log | awk \u0026#39;{print $1}\u0026#39; | sort | uniq -c | sort -n -r | head -5 web与lb 讲述一下LVS三种模式的工作过程 LVS负载的原理，和Nginx负载有啥区别 VS/NAT：（Virtual Server via Network Address Translation）","keywords":["SA"],"articleBody":"如何优化 Linux系统（笼统） 不用root，添加普通用户，通过sudo授权管理 更改默认的远程连接SSH服务端口及禁止root用户远程连接 定时自动更新服务器时间 配置国内yum源 关闭selinux及iptables（iptables工作场景如果有外网IP一定要打开，高并发除外） 调整文件描述符的数量 精简开机启动服务（crond rsyslog network sshd） 内核参数优化（/etc/sysctl.conf） 更改字符集，支持中文，但建议还是用英文字符集，防止乱码 锁定关键系统文件 清空/etc/issue，去除系统及内核版本登录前的屏幕显示 基础命令 ps aux 中的VSZ代表什么意思，RSS代表什么意思 VSZ:虚拟内存集,进程占用的虚拟内存空间 RSS:物理内存集,进程战用实际物理内存空间 shell下32位随机密码生成 text 1 cat /dev/urandom | head -1 | md5sum | head -c 32 \u003e\u003e /pass 将生成的32位随机数 保存到/pass文件里了\n统计出nginx的access.log中访问量最多的5个IP text 1 cat access_log | awk '{print $1}' | sort | uniq -c | sort -n -r | head -5 web与lb 讲述一下LVS三种模式的工作过程 LVS负载的原理，和Nginx负载有啥区别 VS/NAT：（Virtual Server via Network Address Translation）\n也就是网络地址翻译技术实现虚拟服务器，当用户请求到达调度器时，调度器将请求报文的目标地址（即虚拟IP地址）改写成选定的Real Server地址，同时报文的目标端口也改成选定的Real Server的相应端口，最后将报文请求发送到选定的Real Server。在服务器端得到数据后，Real Server返回数据给用户时，需要再次经过负载调度器将报文的源地址和源端口改成虚拟IP地址和相应端口，然后把数据发送给用户，完成整个负载调度过程。\n可以看出，在NAT方式下，用户请求和响应报文都必须经过Director Server地址重写，当用户请求越来越多时，调度器的处理能力将称为瓶颈。\nVS/TUN ：即（Virtual Server via IP Tunneling）\n也就是IP隧道技术实现虚拟服务器。它的连接调度和管理与VS/NAT方式一样，只是它的报文转发方法不同，VS/TUN方式中，调度器采用IP隧道技术将用户请求转发到某个Real Server，而这个Real Server将直接响应用户的请求，不再经过前端调度器，此外，对Real Server的地域位置没有要求，可以和Director Server位于同一个网段，也可以是独立的一个网络。因此，在TUN方式中，调度器将只处理用户的报文请求，集群系统的吞吐量大大提高。\nVS/DR： 即（Virtual Server via Direct Routing）\n也就是用直接路由技术实现虚拟服务器。它的连接调度和管理与VS/NAT和VS/TUN中的一样，但它的报文转发方法又有不同，VS/DR通过改写请求报文的MAC地址，将请求发送到Real Server，而Real Server将响应直接返回给客户，免去了VS/TUN中的IP隧道开销。这种方式是三种负载调度机制中性能最高最好的，但是必须要求Director Server与Real Server都有一块网卡连在同一物理网段上。\n回答负载调度算法，IPVS实现在八种负载调度算法，我们常用的有四种调度算法（轮叫调度、加权轮叫调度、最少链接调度、加权最少链接调度）。一般说了这四种就够了，也不会需要你详细解释这四种算法的。你只要把上面3种负载均衡技术讲明白面试官就对这道问题很满意了。\nlvs与nginx的区别： LVS的优点：\n抗负载能力强、工作在第4层仅作分发之用，没有流量的产生，这个特点也决定了它在负载均衡软件里的性能最强的；无流量，同时保证了均衡器IO的性能不会受到大流量的影响； 工作稳定，自身有完整的双机热备方案，如LVS+Keepalived和LVS+Heartbeat； 应用范围比较广，可以对所有应用做负载均衡； 配置性比较低，这是一个缺点也是一个优点，因为没有可太多配置的东西，所以并不需要太多接触，大大减少了人为出错的几率。 LVS的缺点：\n软件本身不支持正则处理，不能做动静分离，这就凸显了Nginx/HAProxy+Keepalived的优势。 如果网站应用比较庞大，LVS/DR+Keepalived就比较复杂了，特别是后面有Windows Server应用的机器，实施及配置还有维护过程就比较麻烦，相对而言，Nginx/HAProxy+Keepalived就简单一点 Nginx的优点：\n工作在OSI第7层，可以针对http应用做一些分流的策略。比如针对域名、目录结构。它的正则比HAProxy更为强大和灵活； Nginx对网络的依赖非常小，理论上能ping通就就能进行负载功能，这个也是它的优势所在； Nginx安装和配置比较简单，测试起来比较方便； 可以承担高的负载压力且稳定，一般能支撑超过几万次的并发量； Nginx可以通过端口检测到服务器内部的故障，比如根据服务器处理网页返回的状态码、超时等等，并且会把返回错误的请求重新提交到另一个节点； Nginx不仅仅是一款优秀的负载均衡器/反向代理软件，它同时也是功能强大的Web应用服务器。LNMP现在也是非常流行的web环境，大有和LAMP环境分庭抗礼之势，Nginx在处理静态页面、特别是抗高并发方面相对apache有优势； Nginx的缺点：\nNginx不支持url来检测。 Nginx仅能支持http和Email，这个它的弱势。 Nginx的Session的保持，Cookie的引导能力相对欠缺。 apache工作模式 查看apache工作模式 apachectl -l|sed -n '/worker\\|prefork/p'\nprefork使用的是多个子进程，而每个子进程只有一个线程，每个进程在某个确定的时间只能维持一个连接.\nworker模式是Apache2.X新引进来的模式，是线程与进程的结合，在worker模式下会有多个子进程，每个进程又会有多个线程。每个线程在某个确定的时间只能维持一个连接。\nevent模式：event和 worker模式很像，最大的区别在于，它解决了keep-alive场景下 ，长期被占用的线程的资源浪费问题。\nevent MPM中，会有一个专门的线程来管理这些keep-alive类型的线程，当有真实请求过来的时候，将请求传递给服务线程，执行完毕后，又允许它释放。这样，一个线程就能处理几个请求了，实现了异步非阻塞。\nevent MPM在遇到某些不兼容的模块时，会失效，将会回退到worker模式，一个工作线程处理一个请求。官方自带的模块，全部是支持eventMPM的。\n优缺点\n优点：内存占用比prefork模式低，适合高并发高流量HTTP服务。\n缺点：假如一个线程崩溃，整个进程就会连同其任何线程一起“死掉”.由于线程贡献内存空间，所以一个程序在运行时必须被系统识别为“每个线程都是安全的”服务稳定性不如prefork模式。\nhttps://github.com/PlutoaCharon/LiunxNotes/blob/master/Liunx%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/Linux%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86%E7%B1%BB/Apache.md\nkubernetes Kubernetes有哪些不同类型的服务？ cluster ip Node Port Load Balancer Extrenal Name 什么是ETCD？ Etcd是用Go编程语言编写的，是一个分布式键值存储，用于协调分布式工作。因此，Etcd存储Kubernetes集群的配置数据，表示在任何给定时间点的集群状态。\n什么是Ingress网络，它是如何工作的？ Ingress网络是一组规则，充当Kubernetes集群的入口点。这允许入站连接，可以将其配置为通过可访问的URL，负载平衡流量或通过提供基于名称的虚拟主机从外部提供服务。因此，Ingress是一个API对象，通常通过HTTP管理集群中服务的外部访问，是暴露服务的最有效方式。\n什么是Headless Service？ Headless Service类似于“普通”服务，但没有群集IP。此服务使您可以直接访问pod，而无需通过代理访问它。\n什么是集群联邦？ 在联邦集群的帮助下，可以将多个Kubernetes集群作为单个集群进行管理。因此，您可以在数据中心/云中创建多个Kubernetes集群，并使用联邦来在一个位置控制/管理它们。\n联合集群可以通过执行以下两项操作来实现此目的。请参考下图。\nkube-proxy的作用 kube-proxy运行在所有节点上，它监听apiserver中service和endpoint的变化情况，创建路由规则以提供服务IP和负载均衡功能。简单理解此进程是Service的透明代理兼负载均衡器，其核心功能是将到某个Service的访问请求转发到后端的多个Pod实例上。\nkube-proxy iptables的原理 Kubernetes从1.2版本开始，将iptables作为kube-proxy的默认模式。iptables模式下的kube-proxy不再起到Proxy的作用，其核心功能：通过API Server的Watch接口实时跟踪Service与Endpoint的变更信息，并更新对应的iptables规则，Client的请求流量则通过iptables的NAT机制“直接路由”到目标Pod。\nkube-proxy ipvs的原理 IPVS在Kubernetes1.11中升级为GA稳定版。IPVS则专门用于高性能负载均衡，并使用更高效的数据结构（Hash表），允许几乎无限的规模扩张，因此被kube-proxy采纳为最新模式。\n在IPVS模式下，使用iptables的扩展ipset，而不是直接调用iptables来生成规则链。iptables规则链是一个线性的数据结构，ipset则引入了带索引的数据结构，因此当规则很多时，也可以很高效地查找和匹配。\n可以将ipset简单理解为一个IP（段）的集合，这个集合的内容可以是IP地址、IP网段、端口等，iptables可以直接添加规则对这个“可变的集合”进行操作，这样做的好处在于可以大大减少iptables规则的数量，从而减少性能损耗。\nkube-proxy ipvs和iptables的异同 iptables与IPVS都是基于Netfilter实现的，但因为定位不同，二者有着本质的差别：iptables是为防火墙而设计的；IPVS则专门用于高性能负载均衡，并使用更高效的数据结构（Hash表），允许几乎无限的规模扩张。\n与iptables相比，IPVS拥有以下明显优势：\n为大型集群提供了更好的可扩展性和性能； 支持比iptables更复杂的复制均衡算法（最小负载、最少连接、加权等）； 支持服务器健康检查和连接重试等功能； 可以动态修改ipset的集合，即使iptables的规则正在使用这个集合。 Kubernetes镜像的下载策略 Kubernetes的镜像下载策略有三种：Always、Never、IFNotPresent。\nAlways：镜像标签为latest时，总是从指定的仓库中获取镜像。 Never：禁止从仓库中下载镜像，也就是说只能使用本地镜像。 IfNotPresent：仅当本地没有对应镜像时，才从目标仓库中下载。默认的镜像下载策略是：当镜像标签是latest时，默认策略是Always；当镜像标签是自定义时（也就是标签不是latest），那么默认策略是IfNotPresent。 简述Kubernetes Scheduler使用哪两种算法将Pod绑定到worker节点 Kubernetes Scheduler根据如下两种调度算法将 Pod 绑定到最合适的工作节点：\n预选（Predicates）：输入是所有节点，输出是满足预选条件的节点。kube-scheduler根据预选策略过滤掉不满足策略的Nodes。如果某节点的资源不足或者不满足预选策略的条件则无法通过预选。如“Node的label必须与Pod的Selector一致”。 优选（Priorities）：输入是预选阶段筛选出的节点，优选会根据优先策略为通过预选的Nodes进行打分排名，选择得分最高的Node。例如，资源越富裕、负载越小的Node可能具有越高的排名。 zabbix 简述Zabbix-proxy使用场景 监控远程位置，解决跨机房 监控主机多，性能跟不上，延迟大 解决网络不稳定 zabbix 是怎么实施监控的 agentd需要安装到被监控的主机上，它负责定期收集各项数据，并发送到zabbix server端，zabbix server将数据存储到数据库中，zabbix web根据数据在前端进行展现和绘图。这里agentd收集数据分为主动和被动两种模式：\n主动：agent请求server获取主动的监控项列表，并主动将监控项内需要检测的数据提交给server/proxy\n被动：server向agent请求获取监控项的数据，agent返回数据。\n主动模式被动模式：默认为zabbix-agent被动模式\n1.被动模式（zabbix-server轮询检测zabbix-agent）\n2.主动模式（zabbix-agent主动上报给zabbix-server）优\n1.当（Queue）队列中有大量的延迟监控项\n2.当监控主机超过300+ ,建议使用主动模式\nzabbix 怎么开启自定义监控 1、写一个脚本用于获取待监控服务的一些状态信息。\n2、在zabbix客户端的配置文件zabbix_agentd.conf中添加上自定义的“UserParameter”，目的是方便zabbix调用我们上面写的那个脚本去获取待监控服务的信息。\n3、在zabbix服务端使用zabbix_get测试是否能够通过第二步定义的参数去获取zabbix客户端收集的数据。\n4、在zabbix服务端的web界面中新建模板，同时第一步的脚本能够获取什么信息就添加上什么监控项，“键值”设置成前面配置的“UserParameter”的值。\n5、数据显示图表，直接新建图形并选择上一步的监控项来生成动态图表即可。\niptables iptables四表五链（必问题） 表：\nnat 用于网络地址解析 mangle mangle包， 特定数据包的更改，好比head,content filter default表，用于过滤包 raw 优先级最高，用于pretouting和output ,使用raw表，能够跳过NAT表和ip_conntrack处理,即再也不作地址转换和数据包的连接跟踪处理了 链：\nprerouting,\ninput\nforword\noutput\npostrouting\niptables和firewalld的基本区别是什么呢？ 在linux中，防火墙的概念是 Linux 内核网络堆栈中的网络数据包进行操作的规则集合，而iptables则是这些用来操作这些规则的用户空间命令行工具，通过将规则格式化为内核数据结构转发为内核。\nfirewalld是fedora的一个开源项目，是iptables/nftables命令的封装，实现了更多动态防火墙的概念，并且加入更多用户鉴权，GUI管理等。\n类似于http是tcp的wapper，firewalld则是iptables的wapper。\n什么是iptables中的目标值（能被指定为目标），他们有什么用 下面是在iptables中可以指定为目标的值：\nACCEPT : 接受包 QUEUE : 将包传递到用户空间 (应用程序和驱动所在的地方) DROP : 丢弃包 RETURN : 将控制权交回调用的链并且为当前链中的包停止执行下一调用规则 ","wordCount":"259","inLanguage":"zh","datePublished":"2021-10-01T00:00:00Z","dateModified":"2023-03-18T23:00:36+08:00","author":{"@type":"Person","name":"cylon"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.oomkill.com/2021/10/interview-om/"},"publisher":{"@type":"Organization","name":"Cylon's Collection","logo":{"@type":"ImageObject","url":"https://www.oomkill.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.oomkill.com/><img src=https://www.oomkill.com/favicon.ico alt aria-label=logo height=20>Cylon's Collection</a><div class=logo-switches><button id=theme-toggle><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.oomkill.com/archives><span>归档</span></a></li><li><a href=https://www.oomkill.com/tags><span>标签</span></a></li><li><a href=https://www.oomkill.com/search><span>搜索</span></a></li><li><a href=https://www.oomkill.com/about accesskey=/><span>关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">运维类面试题收集</h1><div class=post-meta><span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg><span>2021-10-01</span></span>&nbsp;·&nbsp;<span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text" style="user-select:text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z" style="user-select:text"/><polyline points="14 2 14 8 20 8" style="user-select:text"/><line x1="16" y1="13" x2="8" y2="13" style="user-select:text"/><line x1="16" y1="17" x2="8" y2="17" style="user-select:text"/><polyline points="10 9 9 9 8 9" style="user-select:text"/></svg><span>259 字</span></span>&nbsp;·&nbsp;<span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><span>2 分钟</span></span>
<span class=pe-post-meta-item>&nbsp;·&nbsp;<svg t="1714036239378" fill="currentcolor" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="6659" width="256" height="256"><path d="M690 78.2c-18.6-18.8-49-19-67.8-.4s-19 49-.4 67.8l255.4 258.6c67.8 68.6 67.8 178.8.0 247.4L653.4 878.2c-18.6 18.8-18.4 49.2.4 67.8s49.2 18.4 67.8-.4l224-226.4c104.8-106 104.8-276.4.0-382.4L690 78.2zM485.4 101.4c-24-24-56.6-37.4-90.6-37.4H96C43 64 0 107 0 160v299c0 34 13.4 66.6 37.4 90.6l336 336c50 50 131 50 181 0l267-267c50-50 50-131 0-181l-336-336zM96 160h299c8.4.0 16.6 3.4 22.6 9.4l336 336c12.4 12.4 12.4 32.8.0 45.2l-267 267c-12.4 12.4-32.8 12.4-45.2.0l-336-336c-6-6-9.4-14.2-9.4-22.6V160zm192 128a64 64 0 10-128 0 64 64 0 10128 0z" p-id="6660"/></svg></span><ul class=pe-post-meta-item><a href=https://www.oomkill.com/tags/interview/>#Interview</a></ul>&nbsp;·&nbsp;<span id=busuanzi_container_page_pv>本文阅读量 <span id=busuanzi_value_page_pv></span> 次</span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details><summary><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e5%a6%82%e4%bd%95%e4%bc%98%e5%8c%96-linux%e7%b3%bb%e7%bb%9f%e7%ac%bc%e7%bb%9f aria-label="如何优化 Linux系统（笼统）">如何优化 Linux系统（笼统）</a><ul><li><a href=#%e5%9f%ba%e7%a1%80%e5%91%bd%e4%bb%a4 aria-label=基础命令>基础命令</a><li><a href=#ps-aux-%e4%b8%ad%e7%9a%84vsz%e4%bb%a3%e8%a1%a8%e4%bb%80%e4%b9%88%e6%84%8f%e6%80%9drss%e4%bb%a3%e8%a1%a8%e4%bb%80%e4%b9%88%e6%84%8f%e6%80%9d aria-label="ps aux 中的VSZ代表什么意思，RSS代表什么意思">ps aux 中的VSZ代表什么意思，RSS代表什么意思</a><li><a href=#shell%e4%b8%8b32%e4%bd%8d%e9%9a%8f%e6%9c%ba%e5%af%86%e7%a0%81%e7%94%9f%e6%88%90 aria-label=shell下32位随机密码生成>shell下32位随机密码生成</a><li><a href=#%e7%bb%9f%e8%ae%a1%e5%87%banginx%e7%9a%84accesslog%e4%b8%ad%e8%ae%bf%e9%97%ae%e9%87%8f%e6%9c%80%e5%a4%9a%e7%9a%845%e4%b8%aaip aria-label=统计出nginx的access.log中访问量最多的5个IP>统计出nginx的access.log中访问量最多的5个IP</a></ul><li><a href=#web%e4%b8%8elb aria-label=web与lb>web与lb</a><li><a href=#%e8%ae%b2%e8%bf%b0%e4%b8%80%e4%b8%8blvs%e4%b8%89%e7%a7%8d%e6%a8%a1%e5%bc%8f%e7%9a%84%e5%b7%a5%e4%bd%9c%e8%bf%87%e7%a8%8b aria-label=讲述一下LVS三种模式的工作过程>讲述一下LVS三种模式的工作过程</a><ul><li><a href=#lvs%e8%b4%9f%e8%bd%bd%e7%9a%84%e5%8e%9f%e7%90%86%e5%92%8cnginx%e8%b4%9f%e8%bd%bd%e6%9c%89%e5%95%a5%e5%8c%ba%e5%88%ab aria-label=LVS负载的原理，和Nginx负载有啥区别>LVS负载的原理，和Nginx负载有啥区别</a><li><a href=#lvs%e4%b8%8enginx%e7%9a%84%e5%8c%ba%e5%88%ab aria-label=lvs与nginx的区别：>lvs与nginx的区别：</a><li><a href=#apache%e5%b7%a5%e4%bd%9c%e6%a8%a1%e5%bc%8f aria-label=apache工作模式>apache工作模式</a><li><a href=#kubernetes aria-label=kubernetes>kubernetes</a><li><a href=#kubernetes%e6%9c%89%e5%93%aa%e4%ba%9b%e4%b8%8d%e5%90%8c%e7%b1%bb%e5%9e%8b%e7%9a%84%e6%9c%8d%e5%8a%a1 aria-label=Kubernetes有哪些不同类型的服务？>Kubernetes有哪些不同类型的服务？</a><li><a href=#%e4%bb%80%e4%b9%88%e6%98%afetcd aria-label=什么是ETCD？>什么是ETCD？</a><li><a href=#%e4%bb%80%e4%b9%88%e6%98%afingress%e7%bd%91%e7%bb%9c%e5%ae%83%e6%98%af%e5%a6%82%e4%bd%95%e5%b7%a5%e4%bd%9c%e7%9a%84 aria-label=什么是Ingress网络，它是如何工作的？>什么是Ingress网络，它是如何工作的？</a><li><a href=#%e4%bb%80%e4%b9%88%e6%98%afheadless-service aria-label="什么是Headless Service？">什么是Headless Service？</a><li><a href=#%e4%bb%80%e4%b9%88%e6%98%af%e9%9b%86%e7%be%a4%e8%81%94%e9%82%a6 aria-label=什么是集群联邦？>什么是集群联邦？</a><li><a href=#kube-proxy%e7%9a%84%e4%bd%9c%e7%94%a8 aria-label=kube-proxy的作用>kube-proxy的作用</a><li><a href=#kube-proxy-iptables%e7%9a%84%e5%8e%9f%e7%90%86 aria-label="kube-proxy iptables的原理">kube-proxy iptables的原理</a><li><a href=#kube-proxy-ipvs%e7%9a%84%e5%8e%9f%e7%90%86 aria-label="kube-proxy ipvs的原理">kube-proxy ipvs的原理</a><li><a href=#kube-proxy-ipvs%e5%92%8ciptables%e7%9a%84%e5%bc%82%e5%90%8c aria-label="kube-proxy ipvs和iptables的异同">kube-proxy ipvs和iptables的异同</a><li><a href=#kubernetes%e9%95%9c%e5%83%8f%e7%9a%84%e4%b8%8b%e8%bd%bd%e7%ad%96%e7%95%a5 aria-label=Kubernetes镜像的下载策略>Kubernetes镜像的下载策略</a><li><a href=#%e7%ae%80%e8%bf%b0kubernetes-scheduler%e4%bd%bf%e7%94%a8%e5%93%aa%e4%b8%a4%e7%a7%8d%e7%ae%97%e6%b3%95%e5%b0%86pod%e7%bb%91%e5%ae%9a%e5%88%b0worker%e8%8a%82%e7%82%b9 aria-label="简述Kubernetes Scheduler使用哪两种算法将Pod绑定到worker节点">简述Kubernetes Scheduler使用哪两种算法将Pod绑定到worker节点</a></ul><li><a href=#zabbix aria-label=zabbix>zabbix</a><ul><li><a href=#%e7%ae%80%e8%bf%b0zabbix-proxy%e4%bd%bf%e7%94%a8%e5%9c%ba%e6%99%af aria-label=简述Zabbix-proxy使用场景>简述Zabbix-proxy使用场景</a><li><a href=#zabbix-%e6%98%af%e6%80%8e%e4%b9%88%e5%ae%9e%e6%96%bd%e7%9b%91%e6%8e%a7%e7%9a%84 aria-label="zabbix 是怎么实施监控的">zabbix 是怎么实施监控的</a><li><a href=#zabbix-%e6%80%8e%e4%b9%88%e5%bc%80%e5%90%af%e8%87%aa%e5%ae%9a%e4%b9%89%e7%9b%91%e6%8e%a7 aria-label="zabbix 怎么开启自定义监控">zabbix 怎么开启自定义监控</a></ul><li><a href=#iptables aria-label=iptables>iptables</a><ul><li><a href=#iptables%e5%9b%9b%e8%a1%a8%e4%ba%94%e9%93%be%e5%bf%85%e9%97%ae%e9%a2%98 aria-label=iptables四表五链（必问题）>iptables四表五链（必问题）</a><li><a href=#iptables%e5%92%8cfirewalld%e7%9a%84%e5%9f%ba%e6%9c%ac%e5%8c%ba%e5%88%ab%e6%98%af%e4%bb%80%e4%b9%88%e5%91%a2 aria-label=iptables和firewalld的基本区别是什么呢？>iptables和firewalld的基本区别是什么呢？</a><li><a href=#%e4%bb%80%e4%b9%88%e6%98%afiptables%e4%b8%ad%e7%9a%84%e7%9b%ae%e6%a0%87%e5%80%bc%e8%83%bd%e8%a2%ab%e6%8c%87%e5%ae%9a%e4%b8%ba%e7%9b%ae%e6%a0%87%e4%bb%96%e4%bb%ac%e6%9c%89%e4%bb%80%e4%b9%88%e7%94%a8 aria-label=什么是iptables中的目标值（能被指定为目标），他们有什么用>什么是iptables中的目标值（能被指定为目标），他们有什么用</a></li></div></details></div></aside><script src=/js/pe-toc.min.445eb1bfc5e85dd13b9519fcc2a806522e9629b6224a2974052789ba00ab78af.js integrity="sha256-RF6xv8XoXdE7lRn8wqgGUi6WKbYiSil0BSeJugCreK8="></script><div class=post-content><h2 id=如何优化-linux系统笼统>如何优化 Linux系统（笼统）<a hidden class=anchor aria-hidden=true href=#如何优化-linux系统笼统>#</a></h2><ul><li>不用root，添加普通用户，通过sudo授权管理</li><li>更改默认的远程连接SSH服务端口及禁止root用户远程连接</li><li>定时自动更新服务器时间</li><li>配置国内yum源</li><li>关闭selinux及iptables（iptables工作场景如果有外网IP一定要打开，高并发除外）</li><li>调整文件描述符的数量</li><li>精简开机启动服务（crond rsyslog network sshd）</li><li>内核参数优化（/etc/sysctl.conf）</li><li>更改字符集，支持中文，但建议还是用英文字符集，防止乱码</li><li>锁定关键系统文件</li><li>清空/etc/issue，去除系统及内核版本登录前的屏幕显示</li></ul><h3 id=基础命令>基础命令<a hidden class=anchor aria-hidden=true href=#基础命令>#</a></h3><h3 id=ps-aux-中的vsz代表什么意思rss代表什么意思>ps aux 中的VSZ代表什么意思，RSS代表什么意思<a hidden class=anchor aria-hidden=true href=#ps-aux-中的vsz代表什么意思rss代表什么意思>#</a></h3><ul><li>VSZ:虚拟内存集,进程占用的虚拟内存空间</li><li>RSS:物理内存集,进程战用实际物理内存空间</li></ul><h3 id=shell下32位随机密码生成>shell下32位随机密码生成<a hidden class=anchor aria-hidden=true href=#shell下32位随机密码生成>#</a></h3><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>text</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>cat /dev/urandom | head -1 | md5sum | head -c 32 &gt;&gt; /pass</span></span></code></pre></td></tr></table></div></div></div></div><p>将生成的32位随机数 保存到/pass文件里了</p><h3 id=统计出nginx的accesslog中访问量最多的5个ip>统计出nginx的access.log中访问量最多的5个IP<a hidden class=anchor aria-hidden=true href=#统计出nginx的accesslog中访问量最多的5个ip>#</a></h3><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>text</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>cat access_log | awk  &#39;{print $1}&#39; | sort | uniq -c | sort -n -r | head -5</span></span></code></pre></td></tr></table></div></div></div></div><h2 id=web与lb>web与lb<a hidden class=anchor aria-hidden=true href=#web与lb>#</a></h2><h2 id=讲述一下lvs三种模式的工作过程>讲述一下LVS三种模式的工作过程<a hidden class=anchor aria-hidden=true href=#讲述一下lvs三种模式的工作过程>#</a></h2><h3 id=lvs负载的原理和nginx负载有啥区别>LVS负载的原理，和Nginx负载有啥区别<a hidden class=anchor aria-hidden=true href=#lvs负载的原理和nginx负载有啥区别>#</a></h3><ul><li><p><strong>VS/NAT：（Virtual Server via Network Address Translation）</strong></p><p>也就是网络地址翻译技术实现虚拟服务器，当用户请求到达调度器时，调度器将请求报文的目标地址（即虚拟IP地址）改写成选定的Real Server地址，同时报文的目标端口也改成选定的Real Server的相应端口，最后将报文请求发送到选定的Real Server。在服务器端得到数据后，Real Server返回数据给用户时，需要再次经过负载调度器将报文的源地址和源端口改成虚拟IP地址和相应端口，然后把数据发送给用户，完成整个负载调度过程。</p><p>可以看出，在NAT方式下，用户请求和响应报文都必须经过Director Server地址重写，当用户请求越来越多时，调度器的处理能力将称为瓶颈。</p></li><li><p><strong>VS/TUN ：即（Virtual Server via IP Tunneling）</strong></p><p>也就是IP隧道技术实现虚拟服务器。它的连接调度和管理与VS/NAT方式一样，只是它的报文转发方法不同，VS/TUN方式中，调度器采用IP隧道技术将用户请求转发到某个Real Server，而这个Real Server将直接响应用户的请求，不再经过前端调度器，此外，对Real Server的地域位置没有要求，可以和Director Server位于同一个网段，也可以是独立的一个网络。因此，在TUN方式中，调度器将只处理用户的报文请求，集群系统的吞吐量大大提高。</p></li><li><p><strong>VS/DR： 即（Virtual Server via Direct Routing）</strong></p><p>也就是用直接路由技术实现虚拟服务器。它的连接调度和管理与VS/NAT和VS/TUN中的一样，但它的报文转发方法又有不同，VS/DR通过改写请求报文的MAC地址，将请求发送到Real Server，而Real Server将响应直接返回给客户，免去了VS/TUN中的IP隧道开销。这种方式是三种负载调度机制中性能最高最好的，但是必须要求Director Server与Real Server都有一块网卡连在同一物理网段上。</p></li></ul><p>回答负载调度算法，IPVS实现在八种负载调度算法，我们常用的有四种调度算法（轮叫调度、加权轮叫调度、最少链接调度、加权最少链接调度）。一般说了这四种就够了，也不会需要你详细解释这四种算法的。你只要把上面3种负载均衡技术讲明白面试官就对这道问题很满意了。</p><h3 id=lvs与nginx的区别>lvs与nginx的区别：<a hidden class=anchor aria-hidden=true href=#lvs与nginx的区别>#</a></h3><p>LVS的优点：</p><ul><li>抗负载能力强、工作在第4层仅作分发之用，没有流量的产生，这个特点也决定了它在负载均衡软件里的性能最强的；无流量，同时保证了均衡器IO的性能不会受到大流量的影响；</li><li>工作稳定，自身有完整的双机热备方案，如LVS+Keepalived和LVS+Heartbeat；</li><li>应用范围比较广，可以对所有应用做负载均衡；</li><li>配置性比较低，这是一个缺点也是一个优点，因为没有可太多配置的东西，所以并不需要太多接触，大大减少了人为出错的几率。</li></ul><p>LVS的缺点：</p><ul><li>软件本身不支持正则处理，不能做动静分离，这就凸显了Nginx/HAProxy+Keepalived的优势。</li><li>如果网站应用比较庞大，LVS/DR+Keepalived就比较复杂了，特别是后面有Windows Server应用的机器，实施及配置还有维护过程就比较麻烦，相对而言，Nginx/HAProxy+Keepalived就简单一点</li></ul><p>Nginx的优点：</p><ul><li>工作在OSI第7层，可以针对http应用做一些分流的策略。比如针对域名、目录结构。它的正则比HAProxy更为强大和灵活；</li><li>Nginx对网络的依赖非常小，理论上能ping通就就能进行负载功能，这个也是它的优势所在；</li><li>Nginx安装和配置比较简单，测试起来比较方便；</li><li>可以承担高的负载压力且稳定，一般能支撑超过几万次的并发量；</li><li>Nginx可以通过端口检测到服务器内部的故障，比如根据服务器处理网页返回的状态码、超时等等，并且会把返回错误的请求重新提交到另一个节点；</li><li>Nginx不仅仅是一款优秀的负载均衡器/反向代理软件，它同时也是功能强大的Web应用服务器。LNMP现在也是非常流行的web环境，大有和LAMP环境分庭抗礼之势，Nginx在处理静态页面、特别是抗高并发方面相对apache有优势；</li></ul><p>Nginx的缺点：</p><ul><li>Nginx不支持url来检测。</li><li>Nginx仅能支持http和Email，这个它的弱势。</li><li>Nginx的Session的保持，Cookie的引导能力相对欠缺。</li></ul><h3 id=apache工作模式>apache工作模式<a hidden class=anchor aria-hidden=true href=#apache工作模式>#</a></h3><p>查看apache工作模式
<code>apachectl -l|sed -n '/worker\|prefork/p'</code></p><ul><li><p>prefork使用的是多个子进程，而每个子进程只有一个线程，每个进程在某个确定的时间只能维持一个连接.</p></li><li><p>worker模式是Apache2.X新引进来的模式，是线程与进程的结合，在worker模式下会有多个子进程，每个进程又会有多个线程。每个线程在某个确定的时间只能维持一个连接。</p></li><li><p>event模式：event和 worker模式很像，最大的区别在于，它解决了<code>keep-alive</code>场景下 ，长期被占用的线程的资源浪费问题。</p><p><code>event</code> MPM中，会有一个专门的线程来管理这些<code>keep-alive</code>类型的线程，当有真实请求过来的时候，将请求传递给服务线程，执行完毕后，又允许它释放。这样，一个线程就能处理几个请求了，实现了异步非阻塞。</p><p><code>event</code> MPM在遇到某些不兼容的模块时，会失效，将会回退到worker模式，一个工作线程处理一个请求。官方自带的模块，全部是支持<code>event</code>MPM的。</p></li></ul><p>优缺点</p><ul><li><p>优点：内存占用比prefork模式低，适合高并发高流量HTTP服务。</p></li><li><p>缺点：假如一个线程崩溃，整个进程就会连同其任何线程一起“死掉”.由于线程贡献内存空间，所以一个程序在运行时必须被系统识别为“每个线程都是安全的”服务稳定性不如prefork模式。</p></li></ul><p><a href=https://github.com/PlutoaCharon/LiunxNotes/blob/master/Liunx%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/Linux%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86%E7%B1%BB/Apache.md target=_blank rel="noopener nofollow noreferrer">https://github.com/PlutoaCharon/LiunxNotes/blob/master/Liunx%E9%9D%A2%E8%AF%95%E7%AC%94%E8%AE%B0/Linux%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86%E7%B1%BB/Apache.md</a></p><h3 id=kubernetes>kubernetes<a hidden class=anchor aria-hidden=true href=#kubernetes>#</a></h3><h3 id=kubernetes有哪些不同类型的服务>Kubernetes有哪些不同类型的服务？<a hidden class=anchor aria-hidden=true href=#kubernetes有哪些不同类型的服务>#</a></h3><ul><li>cluster ip</li><li>Node Port</li><li>Load Balancer</li><li>Extrenal Name</li></ul><h3 id=什么是etcd>什么是ETCD？<a hidden class=anchor aria-hidden=true href=#什么是etcd>#</a></h3><p>Etcd是用Go编程语言编写的，是一个分布式键值存储，用于协调分布式工作。因此，Etcd存储Kubernetes集群的配置数据，表示在任何给定时间点的集群状态。</p><h3 id=什么是ingress网络它是如何工作的>什么是Ingress网络，它是如何工作的？<a hidden class=anchor aria-hidden=true href=#什么是ingress网络它是如何工作的>#</a></h3><p><a href="https://link.zhihu.com/?target=https%3A//www.edureka.co/blog/kubernetes-networking%3Futm_source%3Dmedium%26utm_medium%3Dcontent-link%26utm_campaign%3Dkubernetes-interview-questions%26source%3Dpost_page---------------------------" target=_blank rel="noopener nofollow noreferrer">Ingress网络</a>是一组规则，充当Kubernetes集群的入口点。这允许入站连接，可以将其配置为通过可访问的URL，负载平衡流量或通过提供基于名称的虚拟主机从外部提供服务。因此，Ingress是一个API对象，通常通过HTTP管理集群中服务的外部访问，是暴露服务的最有效方式。</p><h3 id=什么是headless-service>什么是Headless Service？<a hidden class=anchor aria-hidden=true href=#什么是headless-service>#</a></h3><p>Headless Service类似于“普通”服务，但没有群集IP。此服务使您可以直接访问pod，而无需通过代理访问它。</p><h3 id=什么是集群联邦>什么是集群联邦？<a hidden class=anchor aria-hidden=true href=#什么是集群联邦>#</a></h3><p>在联邦集群的帮助下，可以将多个Kubernetes集群作为单个集群进行管理。因此，您可以在数据中心/云中创建多个Kubernetes集群，并使用联邦来在一个位置控制/管理它们。</p><p>联合集群可以通过执行以下两项操作来实现此目的。请参考下图。</p><h3 id=kube-proxy的作用>kube-proxy的作用<a hidden class=anchor aria-hidden=true href=#kube-proxy的作用>#</a></h3><p>kube-proxy运行在所有节点上，它监听apiserver中service和endpoint的变化情况，创建路由规则以提供服务IP和负载均衡功能。简单理解此进程是Service的透明代理兼负载均衡器，其核心功能是将到某个Service的访问请求转发到后端的多个Pod实例上。</p><h3 id=kube-proxy-iptables的原理>kube-proxy iptables的原理<a hidden class=anchor aria-hidden=true href=#kube-proxy-iptables的原理>#</a></h3><p>Kubernetes从1.2版本开始，将iptables作为kube-proxy的默认模式。iptables模式下的kube-proxy不再起到Proxy的作用，其核心功能：通过API Server的Watch接口实时跟踪Service与Endpoint的变更信息，并更新对应的iptables规则，Client的请求流量则通过iptables的NAT机制“直接路由”到目标Pod。</p><h3 id=kube-proxy-ipvs的原理>kube-proxy ipvs的原理<a hidden class=anchor aria-hidden=true href=#kube-proxy-ipvs的原理>#</a></h3><p>IPVS在Kubernetes1.11中升级为GA稳定版。IPVS则专门用于高性能负载均衡，并使用更高效的数据结构（Hash表），允许几乎无限的规模扩张，因此被kube-proxy采纳为最新模式。</p><p>在IPVS模式下，使用iptables的扩展ipset，而不是直接调用iptables来生成规则链。iptables规则链是一个线性的数据结构，ipset则引入了带索引的数据结构，因此当规则很多时，也可以很高效地查找和匹配。</p><p>可以将ipset简单理解为一个IP（段）的集合，这个集合的内容可以是IP地址、IP网段、端口等，iptables可以直接添加规则对这个“可变的集合”进行操作，这样做的好处在于可以大大减少iptables规则的数量，从而减少性能损耗。</p><h3 id=kube-proxy-ipvs和iptables的异同>kube-proxy ipvs和iptables的异同<a hidden class=anchor aria-hidden=true href=#kube-proxy-ipvs和iptables的异同>#</a></h3><p>iptables与IPVS都是基于Netfilter实现的，但因为定位不同，二者有着本质的差别：iptables是为防火墙而设计的；IPVS则专门用于高性能负载均衡，并使用更高效的数据结构（Hash表），允许几乎无限的规模扩张。</p><p>与iptables相比，IPVS拥有以下明显优势：</p><ul><li>为大型集群提供了更好的可扩展性和性能；</li><li>支持比iptables更复杂的复制均衡算法（最小负载、最少连接、加权等）；</li><li>支持服务器健康检查和连接重试等功能；</li><li>可以动态修改ipset的集合，即使iptables的规则正在使用这个集合。</li></ul><h3 id=kubernetes镜像的下载策略>Kubernetes镜像的下载策略<a hidden class=anchor aria-hidden=true href=#kubernetes镜像的下载策略>#</a></h3><p>Kubernetes的镜像下载策略有三种：Always、Never、IFNotPresent。</p><ul><li>Always：镜像标签为latest时，总是从指定的仓库中获取镜像。</li><li>Never：禁止从仓库中下载镜像，也就是说只能使用本地镜像。</li><li>IfNotPresent：仅当本地没有对应镜像时，才从目标仓库中下载。默认的镜像下载策略是：当镜像标签是latest时，默认策略是Always；当镜像标签是自定义时（也就是标签不是latest），那么默认策略是IfNotPresent。</li></ul><h3 id=简述kubernetes-scheduler使用哪两种算法将pod绑定到worker节点>简述Kubernetes Scheduler使用哪两种算法将Pod绑定到worker节点<a hidden class=anchor aria-hidden=true href=#简述kubernetes-scheduler使用哪两种算法将pod绑定到worker节点>#</a></h3><p>Kubernetes Scheduler根据如下两种调度算法将 Pod 绑定到最合适的工作节点：</p><ul><li>预选（Predicates）：输入是所有节点，输出是满足预选条件的节点。kube-scheduler根据预选策略过滤掉不满足策略的Nodes。如果某节点的资源不足或者不满足预选策略的条件则无法通过预选。如“Node的label必须与Pod的Selector一致”。</li><li>优选（Priorities）：输入是预选阶段筛选出的节点，优选会根据优先策略为通过预选的Nodes进行打分排名，选择得分最高的Node。例如，资源越富裕、负载越小的Node可能具有越高的排名。</li></ul><h2 id=zabbix>zabbix<a hidden class=anchor aria-hidden=true href=#zabbix>#</a></h2><h3 id=简述zabbix-proxy使用场景>简述Zabbix-proxy使用场景<a hidden class=anchor aria-hidden=true href=#简述zabbix-proxy使用场景>#</a></h3><ul><li>监控远程位置，解决跨机房</li><li>监控主机多，性能跟不上，延迟大</li><li>解决网络不稳定</li></ul><h3 id=zabbix-是怎么实施监控的>zabbix 是怎么实施监控的<a hidden class=anchor aria-hidden=true href=#zabbix-是怎么实施监控的>#</a></h3><p>agentd需要安装到被监控的主机上，它负责定期收集各项数据，并发送到zabbix server端，zabbix server将数据存储到数据库中，zabbix web根据数据在前端进行展现和绘图。这里agentd收集数据分为主动和被动两种模式：</p><p>主动：agent请求server获取主动的监控项列表，并主动将监控项内需要检测的数据提交给server/proxy</p><p>被动：server向agent请求获取监控项的数据，agent返回数据。</p><ul><li><p>主动模式被动模式：默认为zabbix-agent被动模式</p></li><li><p>1.被动模式（zabbix-server轮询检测zabbix-agent）</p></li><li><p>2.主动模式（zabbix-agent主动上报给zabbix-server）优</p></li><li><p>1.当（Queue）队列中有大量的延迟监控项</p></li><li><p>2.当监控主机超过300+ ,建议使用主动模式</p></li></ul><h3 id=zabbix-怎么开启自定义监控>zabbix 怎么开启自定义监控<a hidden class=anchor aria-hidden=true href=#zabbix-怎么开启自定义监控>#</a></h3><p>1、写一个脚本用于获取待监控服务的一些状态信息。</p><p>2、在zabbix客户端的配置文件zabbix_agentd.conf中添加上自定义的“UserParameter”，目的是方便zabbix调用我们上面写的那个脚本去获取待监控服务的信息。</p><p>3、在zabbix服务端使用zabbix_get测试是否能够通过第二步定义的参数去获取zabbix客户端收集的数据。</p><p>4、在zabbix服务端的web界面中新建模板，同时第一步的脚本能够获取什么信息就添加上什么监控项，“键值”设置成前面配置的“UserParameter”的值。</p><p>5、数据显示图表，直接新建图形并选择上一步的监控项来生成动态图表即可。</p><h2 id=iptables>iptables<a hidden class=anchor aria-hidden=true href=#iptables>#</a></h2><h3 id=iptables四表五链必问题>iptables四表五链（必问题）<a hidden class=anchor aria-hidden=true href=#iptables四表五链必问题>#</a></h3><p>表：</p><ul><li>nat 用于网络地址解析</li><li>mangle mangle包， 特定数据包的更改，好比head,content</li><li>filter default表，用于过滤包</li><li>raw 优先级最高，用于pretouting和output ,使用raw表，能够跳过NAT表和ip_conntrack处理,即再也不作地址转换和数据包的连接跟踪处理了</li></ul><p>链：</p><ul><li><p>prerouting,</p></li><li><p>input</p></li><li><p>forword</p></li><li><p>output</p></li><li><p>postrouting</p></li></ul><h3 id=iptables和firewalld的基本区别是什么呢>iptables和firewalld的基本区别是什么呢？<a hidden class=anchor aria-hidden=true href=#iptables和firewalld的基本区别是什么呢>#</a></h3><p>在linux中，防火墙的概念是 Linux 内核网络堆栈中的网络数据包进行操作的规则集合，而iptables则是这些用来操作这些规则的<strong>用户空间</strong>命令行工具，通过将规则格式化为内核数据结构转发为内核。</p><p>firewalld是fedora的一个开源项目，是iptables/nftables命令的封装，实现了更多动态防火墙的概念，并且加入更多用户鉴权，GUI管理等。</p><p>类似于http是tcp的wapper，firewalld则是iptables的wapper。</p><h3 id=什么是iptables中的目标值能被指定为目标他们有什么用>什么是iptables中的目标值（能被指定为目标），他们有什么用<a hidden class=anchor aria-hidden=true href=#什么是iptables中的目标值能被指定为目标他们有什么用>#</a></h3><p>下面是在iptables中可以指定为目标的值：</p><ul><li>ACCEPT : 接受包</li><li>QUEUE : 将包传递到用户空间 (应用程序和驱动所在的地方)</li><li>DROP : 丢弃包</li><li>RETURN : 将控制权交回调用的链并且为当前链中的包停止执行下一调用规则</li></ul></div><div class=pe-copyright><hr><blockquote><p>本文为原创内容，版权归作者所有。如需转载，请在文章中声明本文标题及链接。</p><p>文章标题：运维类面试题收集</p><p>文章链接：<a href=https://www.oomkill.com/2021/10/interview-om/ target=_blank>https://www.oomkill.com/2021/10/interview-om/</a></p><p>许可协议：<a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></p></blockquote></div><div class=comments-separator></div><h3 class=relatedContentTitle>相关阅读</h3><ul class=relatedContent><li><a href=/2021/10/interview-go/><span>go面试题收集</span></a></li><li><a href=/2021/10/interview-kubernetes/><span>kubernetes面试题收集</span></a></li><li><a href=/2021/10/interview-linux/><span>操作系统类面试题收集</span></a></li><li><a href=/2021/10/interview-monitor/><span>监控类面试题</span></a></li><li><a href=/2021/10/interview-network/><span>网络基础面试题收集</span></a></li></ul><div class=comments-separator></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.oomkill.com/tags/interview/>Interview</a></li></ul><nav class=paginav><a class=prev href=https://www.oomkill.com/2021/10/interview-network/><span class=title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select:text"><line x1="19" y1="12" x2="5" y2="12" style="user-select:text"/><polyline points="12 19 5 12 12 5" style="user-select:text"/></polyline></svg>&nbsp;</span>
<span>网络基础面试题收集</span>
</a><a class=next href=https://www.oomkill.com/2021/07/wsl-share-to-win/><span class=title></span>
<span>WSL与Windows环境共享&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select:text"><line x1="5" y1="12" x2="19" y2="12" style="user-select:text"/><polyline points="12 5 19 12 12 19" style="user-select:text"/></svg></span></a></nav></footer><div class=pe-comments-decoration><p class=pe-comments-title></p><p class=pe-comments-subtitle></p></div><div id=pe-comments></div><script src=/js/pe-go-comment.min.86a214102576ba5f9b7bdc29eed8d58dd56e34aef80b3c65c73ea9cc88443696.js integrity="sha256-hqIUECV2ul+be9wp7tjVjdVuNK74Czxlxz6pzIhENpY="></script><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const s={src:"https://giscus.app/client.js","data-repo":"cylonchau/cylonchau.github.io","data-repo-id":"R_kgDOIRlNSQ","data-category":"Announcements","data-category-id":"DIC_kwDOIRlNSc4CXy1U","data-mapping":"pathname","data-term":"posts/interview-om","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":getStoredTheme(),"data-lang":"zh-TW","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(s).forEach(([t,n])=>e.setAttribute(t,n)),document.querySelector("#pe-comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme);const n=document.querySelector("#theme-toggle-float");n&&n.addEventListener("click",setGiscusTheme)})</script></article></main><footer class=footer><span>&copy; 2024 <a href=https://www.oomkill.com/>Cylon's Collection</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> on
<a href=https://pages.github.com/ rel=noopener target=_blank>GitHub Pages</a> & Theme
        <a href=https://github.com/tofuwine/PaperMod-PE rel=noopener target=_blank>PaperMod-PE</a></span><div class=busuanzi-footer style="font-family:helvetica neue,Helvetica,Arial,sans-serif;text-align:center;padding:4px 0;color:#999"><span id=busuanzi_container_site_pv style=margin-right:8px;font-size:.85em>本站总访问量<span id=busuanzi_value_site_pv style=font-weight:500>0</span>次
</span><span id=busuanzi_container_site_uv style=font-size:.85em>本站访客数<span id=busuanzi_value_site_uv style=font-weight:500>0</span>人次</span></div></footer><div class=pe-right-sidebar><a href=javascript:void(0); id=theme-toggle-float class=pe-float-btn><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</a><a href=#top class=pe-float-btn id=top-link><span id=pe-read-progress></span></a></div><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>