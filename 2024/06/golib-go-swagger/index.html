<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Go每日一库 - 使用 gin + goswagger 构建 REST API 文档 | Cylon's Collection</title><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NP3JNCPR" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><meta name=keywords content="golang,Go每日一库 - go-swagger"><meta name=description content="OpenAPI 什么是OpenAPI Swagger 是一套围绕 OpenAPI 规范构建的开源工具，可帮助我们设计，构建，记录和使用 REST API。
OpenAPI 规范（前名称为 Swagger 规范）是 REST API 的 API 描述格式。包括：
可用端点 ( 例如 /users) 以及每个 endpoint 上的操作 (例如 GET /users, POST /users) 操作参数，每个操作的输入和输出 认证方法 联系信息，许可证，使用条款等其他信息。 什么是 Swagger？ Swagger 是一组围绕 OpenAPI 规范构建的开源工具，有助于用户设计，构建，记录和使用 REST API，支持整个 API 生命周期的开发，从设计和文档到测试和部署。
使用 Swagger 的目的 标准化文档格式：Swagger (OpenAPI) 采用了准化 API 文档格式。通过使用 Swaggo（将注释转换为 Swagger2.0文档的包） 生成 Swagger 文档，Swagger 的结构化格式的文档，使开发人员更容易理解产品的 API 交互。 交互式文档体验：Swagger UI 与 Swaggo 集成，提供交互式且用户友好的界面，用于测试 API。Swaggo提供了一个自动生成的界面，允许开发人员浏览 Endpoint，查看请求/响应示例，甚至可以直接从文档执行 API 请求。这种交互式体验可提高开发人员的工作效率并加速 API 的采用。 自动且最新的文档：Swaggo 可自动从用户的 Go 代码生成 API 文档。这种自动化无需手动维护单独的文档文件。Swaggo 直接从用户的代码库中提取信息，包括 endpoint 详细信息，请求/响应模型和注释。使用这种方法可确保用户的 API 文档随着代码的更新而保持最新。 Swagger 与 Gin 的集成 拉取 Swaggo 使用如下命令下载swag"><meta name=author content="cylon"><link rel=canonical href=https://www.oomkill.com/2024/06/golib-go-swagger/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://www.oomkill.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.oomkill.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.oomkill.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.oomkill.com/favicon.ico><link rel=mask-icon href=https://www.oomkill.com/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://www.oomkill.com/2024/06/golib-go-swagger/><noscript><style>#theme-toggle,#top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link crossorigin=anonymous href=/assets/css/pe.min.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/pe.min.js></script><link rel=stylesheet href=https://cdn.staticfile.net/font-awesome/6.5.1/css/all.min.css><link rel=stylesheet href=https://cdn.staticfile.net/font-awesome/6.5.1/css/v4-shims.min.css><script id=MathJax-script async src=https://cdn.staticfile.net/mathjax/3.2.2/es5/tex-chtml.js></script><script>MathJax={tex:{displayMath:[["$$","$$"]],inlineMath:[["\\$","\\$"]]}}</script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-NP3JNCPR")</script><meta property="og:title" content="Go每日一库 - 使用 gin + goswagger 构建 REST API 文档"><meta property="og:description" content="OpenAPI 什么是OpenAPI Swagger 是一套围绕 OpenAPI 规范构建的开源工具，可帮助我们设计，构建，记录和使用 REST API。
OpenAPI 规范（前名称为 Swagger 规范）是 REST API 的 API 描述格式。包括：
可用端点 ( 例如 /users) 以及每个 endpoint 上的操作 (例如 GET /users, POST /users) 操作参数，每个操作的输入和输出 认证方法 联系信息，许可证，使用条款等其他信息。 什么是 Swagger？ Swagger 是一组围绕 OpenAPI 规范构建的开源工具，有助于用户设计，构建，记录和使用 REST API，支持整个 API 生命周期的开发，从设计和文档到测试和部署。
使用 Swagger 的目的 标准化文档格式：Swagger (OpenAPI) 采用了准化 API 文档格式。通过使用 Swaggo（将注释转换为 Swagger2.0文档的包） 生成 Swagger 文档，Swagger 的结构化格式的文档，使开发人员更容易理解产品的 API 交互。 交互式文档体验：Swagger UI 与 Swaggo 集成，提供交互式且用户友好的界面，用于测试 API。Swaggo提供了一个自动生成的界面，允许开发人员浏览 Endpoint，查看请求/响应示例，甚至可以直接从文档执行 API 请求。这种交互式体验可提高开发人员的工作效率并加速 API 的采用。 自动且最新的文档：Swaggo 可自动从用户的 Go 代码生成 API 文档。这种自动化无需手动维护单独的文档文件。Swaggo 直接从用户的代码库中提取信息，包括 endpoint 详细信息，请求/响应模型和注释。使用这种方法可确保用户的 API 文档随着代码的更新而保持最新。 Swagger 与 Gin 的集成 拉取 Swaggo 使用如下命令下载swag"><meta property="og:type" content="article"><meta property="og:url" content="https://www.oomkill.com/2024/06/golib-go-swagger/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-06-19T00:00:00+00:00"><meta property="article:modified_time" content="2024-06-19T23:10:36+08:00"><meta property="og:site_name" content="Cylon's Collection"><meta name=twitter:card content="summary"><meta name=twitter:title content="Go每日一库 - 使用 gin + goswagger 构建 REST API 文档"><meta name=twitter:description content="OpenAPI 什么是OpenAPI Swagger 是一套围绕 OpenAPI 规范构建的开源工具，可帮助我们设计，构建，记录和使用 REST API。
OpenAPI 规范（前名称为 Swagger 规范）是 REST API 的 API 描述格式。包括：
可用端点 ( 例如 /users) 以及每个 endpoint 上的操作 (例如 GET /users, POST /users) 操作参数，每个操作的输入和输出 认证方法 联系信息，许可证，使用条款等其他信息。 什么是 Swagger？ Swagger 是一组围绕 OpenAPI 规范构建的开源工具，有助于用户设计，构建，记录和使用 REST API，支持整个 API 生命周期的开发，从设计和文档到测试和部署。
使用 Swagger 的目的 标准化文档格式：Swagger (OpenAPI) 采用了准化 API 文档格式。通过使用 Swaggo（将注释转换为 Swagger2.0文档的包） 生成 Swagger 文档，Swagger 的结构化格式的文档，使开发人员更容易理解产品的 API 交互。 交互式文档体验：Swagger UI 与 Swaggo 集成，提供交互式且用户友好的界面，用于测试 API。Swaggo提供了一个自动生成的界面，允许开发人员浏览 Endpoint，查看请求/响应示例，甚至可以直接从文档执行 API 请求。这种交互式体验可提高开发人员的工作效率并加速 API 的采用。 自动且最新的文档：Swaggo 可自动从用户的 Go 代码生成 API 文档。这种自动化无需手动维护单独的文档文件。Swaggo 直接从用户的代码库中提取信息，包括 endpoint 详细信息，请求/响应模型和注释。使用这种方法可确保用户的 API 文档随着代码的更新而保持最新。 Swagger 与 Gin 的集成 拉取 Swaggo 使用如下命令下载swag"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.oomkill.com/posts/"},{"@type":"ListItem","position":2,"name":"Go每日一库 - 使用 gin + goswagger 构建 REST API 文档","item":"https://www.oomkill.com/2024/06/golib-go-swagger/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Go每日一库 - 使用 gin + goswagger 构建 REST API 文档","name":"Go每日一库 - 使用 gin \u002b goswagger 构建 REST API 文档","description":"OpenAPI 什么是OpenAPI Swagger 是一套围绕 OpenAPI 规范构建的开源工具，可帮助我们设计，构建，记录和使用 REST API。\nOpenAPI 规范（前名称为 Swagger 规范）是 REST API 的 API 描述格式。包括：\n可用端点 ( 例如 /users) 以及每个 endpoint 上的操作 (例如 GET /users, POST /users) 操作参数，每个操作的输入和输出 认证方法 联系信息，许可证，使用条款等其他信息。 什么是 Swagger？ Swagger 是一组围绕 OpenAPI 规范构建的开源工具，有助于用户设计，构建，记录和使用 REST API，支持整个 API 生命周期的开发，从设计和文档到测试和部署。\n使用 Swagger 的目的 标准化文档格式：Swagger (OpenAPI) 采用了准化 API 文档格式。通过使用 Swaggo（将注释转换为 Swagger2.0文档的包） 生成 Swagger 文档，Swagger 的结构化格式的文档，使开发人员更容易理解产品的 API 交互。 交互式文档体验：Swagger UI 与 Swaggo 集成，提供交互式且用户友好的界面，用于测试 API。Swaggo提供了一个自动生成的界面，允许开发人员浏览 Endpoint，查看请求/响应示例，甚至可以直接从文档执行 API 请求。这种交互式体验可提高开发人员的工作效率并加速 API 的采用。 自动且最新的文档：Swaggo 可自动从用户的 Go 代码生成 API 文档。这种自动化无需手动维护单独的文档文件。Swaggo 直接从用户的代码库中提取信息，包括 endpoint 详细信息，请求/响应模型和注释。使用这种方法可确保用户的 API 文档随着代码的更新而保持最新。 Swagger 与 Gin 的集成 拉取 Swaggo 使用如下命令下载swag","keywords":["golang","Go每日一库 - go-swagger"],"articleBody":"OpenAPI 什么是OpenAPI Swagger 是一套围绕 OpenAPI 规范构建的开源工具，可帮助我们设计，构建，记录和使用 REST API。\nOpenAPI 规范（前名称为 Swagger 规范）是 REST API 的 API 描述格式。包括：\n可用端点 ( 例如 /users) 以及每个 endpoint 上的操作 (例如 GET /users, POST /users) 操作参数，每个操作的输入和输出 认证方法 联系信息，许可证，使用条款等其他信息。 什么是 Swagger？ Swagger 是一组围绕 OpenAPI 规范构建的开源工具，有助于用户设计，构建，记录和使用 REST API，支持整个 API 生命周期的开发，从设计和文档到测试和部署。\n使用 Swagger 的目的 标准化文档格式：Swagger (OpenAPI) 采用了准化 API 文档格式。通过使用 Swaggo（将注释转换为 Swagger2.0文档的包） 生成 Swagger 文档，Swagger 的结构化格式的文档，使开发人员更容易理解产品的 API 交互。 交互式文档体验：Swagger UI 与 Swaggo 集成，提供交互式且用户友好的界面，用于测试 API。Swaggo提供了一个自动生成的界面，允许开发人员浏览 Endpoint，查看请求/响应示例，甚至可以直接从文档执行 API 请求。这种交互式体验可提高开发人员的工作效率并加速 API 的采用。 自动且最新的文档：Swaggo 可自动从用户的 Go 代码生成 API 文档。这种自动化无需手动维护单独的文档文件。Swaggo 直接从用户的代码库中提取信息，包括 endpoint 详细信息，请求/响应模型和注释。使用这种方法可确保用户的 API 文档随着代码的更新而保持最新。 Swagger 与 Gin 的集成 拉取 Swaggo 使用如下命令下载swag\nbash 1 $ go install github.com/swaggo/swag/cmd/swag 与 Gin 的集成 添加通用注释 swaggo 中包含两种注释，通用注释与 API 注释，通用注释是用于程序 main.go 中，标记文档的信息，API 注释是用于标注每个接口的信息。\n下载相关包 bash 1 2 3 $ go install github.com/swaggo/swag/cmd/swag $ go get -v github.com/swaggo/gin-swagger # gin-swagger middleware $ go get -v github.com/swaggo/files # swagger embed files 在项目 main.go 源代码中添加通用的 API 注释： go 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 // @title Swagger Example API // @version 1.0 // @description This is a sample server celler server. // @termsOfService http://swagger.io/terms/ // @contact.name API Support // @contact.url http://www.swagger.io/support // @contact.email support@swagger.io // @license.name Apache 2.0 // @license.url http://www.apache.org/licenses/LICENSE-2.0.html // @host localhost:8080 // @BasePath /api/v1 // @securityDefinitions.basic BasicAuth // @externalDocs.description OpenAPI // @externalDocs.url https://swagger.io/resources/open-api/ func main() { r := gin.Default() ... } 为 Swagger Docs 添加路由 以将中间件添加到您的 Gin 应用程序中。在您的路由函数中或者主函数中，添加如下下代码：\n此代码为 Swagger UI 设置了一条路由，并告诉它在指定的 URL 处查找 Swagger 文档。\ngo 1 2 3 4 5 6 7 8 9 10 11 // 默认路由 r := gin.Default() url := ginSwagger.URL(\"http://localhost:8080/swagger/doc.json\") r.GET(\" /swagger/*any\", ginSwagger.WrapHandler(swaggerFiles.Handler, url)) // 路由组 // 如果已存在路由组，可以在对应注册路由的函数中添加 docs 路径 func RegisteredRouter(e *gin.Engine) { e.Handle(\"GET\", \"/swagger/*any\", ginSwagger.WrapHandler(swaggerFiles.Handler, ginSwagger.URL(\"/swagger/doc.json\"))) ... } 向 Gin API 服务器添加 API 注释 go 1 2 3 4 5 6 7 8 9 10 11 12 13 // ShowAccount godoc // @Summary Show an account // @Description get string by ID // @Tags accounts // @Accept json // @Produce json // @Param id path int true \"Account ID\" // @Success 200 {object} model.Account // @Failure 400 {object} httputil.HTTPError // @Failure 404 {object} httputil.HTTPError // @Failure 500 {object} httputil.HTTPError // @Router /accounts/{id} [get] func (c *Controller) ShowAccount(ctx *gin.Context) { 生成 Swagger 文档 将注释添加到代码后，可以通过运行以下命令生成 Swagger 文档\nbash 1 $ swag init -g cmd/main.go --output ./docs/ --packageName docs 此命令将会在项目中 docks 文件夹中生成一个文件 doc.json 。我们之前添加的中间件将使用此文件在 Swagger UI 中显示文档。\n确保导入了生成的包 docs/docs.go 文件，这样特定的配置文件才会被初始化。如果通用 API 注释没有写在 main.go 中，可以使用 -g 参数来告知 swag-cli\nbash 1 $ swag init -g http/api.go 访问 swagger 文档 在完成上述步骤后，可以浏览器中访问 http://{project_domain}/swagger/index.html，来查看 swagger 文档，这个路径取决于在 gin 路由里配置的路径。\nswagger 注释 通用 API 注释 注释 说明 示例 title 必填 应用程序的名称。 // @title Swagger Example API version 必填 提供应用程序API的版本。 // @version 1.0 description 应用程序的简短描述。 // @description This is a sample server celler server. tag.name 标签的名称。 // @tag.name This is the name of the tag tag.description 标签的描述。 // @tag.description Cool Description tag.docs.url 标签的外部文档的URL。 // @tag.docs.url https://example.com tag.docs.description 标签的外部文档说明。 // @tag.docs.description Best example documentation termsOfService API的服务条款。 // @termsOfService http://swagger.io/terms/ contact.name 公开的API的联系信息。 // @contact.name API Support contact.url 联系信息的URL。 必须采用网址格式。 // @contact.url http://www.swagger.io/support contact.email 联系人/组织的电子邮件地址。 必须采用电子邮件地址的格式。 // @contact.email support@swagger.io license.name 必填 用于API的许可证名称。 // @license.name Apache 2.0 license.url 用于API的许可证的URL。 必须采用网址格式。 // @license.url http://www.apache.org/licenses/LICENSE-2.0.html host 运行API的主机（主机名或IP地址）。 // @host localhost:8080 BasePath 运行API的基本路径。 // @BasePath /api/v1 accept API 可以使用的 MIME 类型列表。 请注意，Accept 仅影响具有请求正文的操作，例如 POST、PUT 和 PATCH。 值必须如“Mime类型”中所述。 // @accept json produce API可以生成的MIME类型的列表。值必须如“Mime类型”中所述。 // @produce json query.collection.format 请求URI query里数组参数的默认格式：csv，multi，pipes，tsv，ssv。 如果未设置，则默认为csv。 // @query.collection.format multi schemes 用空格分隔的请求的传输协议。 // @schemes http https externalDocs.description Description of the external document. // @externalDocs.description OpenAPI externalDocs.url URL of the external document. // @externalDocs.url https://swagger.io/resources/open-api/ x-name 扩展的键必须以x-开头，并且只能使用json值 // @x-example-key {“key”: “value”} API 注释 注释 描述 description 操作行为的详细说明。 description.markdown 应用程序的简短描述。该描述将从名为 endpointname.md 的文件中读取。 id 用于标识操作的唯一字符串。在所有 API 操作中必须唯一。 tags 每个 API 操作的标签列表，以逗号分隔。 summary 该操作的简短摘要。 accept API 可以使用的 MIME 类型列表。 请注意，Accept 仅影响具有请求正文的操作，例如 POST、PUT 和 PATCH。 值必须如 “Mime类型” 中所述。 produce API可以生成的MIME类型的列表。值必须如 “Mime类型” 中所述。 param 用空格分隔的参数。\nparam name,\nparam type,\ndata type,\nis mandatory?,\ncomment attribute(optional) security 每个 API 操作的安全性。 success 以空格分隔的成功响应。return code,{param type},data type,comment failure 以空格分隔的故障响应。return code,{param type},data type,comment response 与success、failure作用相同 header 以空格分隔的头字段。 return code,{param type},data type,comment router 以空格分隔的路径定义。 path,[httpMethod] deprecatedrouter 与router相同，但是是deprecated的。 x-name 扩展字段必须以 x- 开头，并且只能使用 json 值。 deprecated 将当前 API 操作的所有路径设置为deprecated 安全相关参数 注释 描述 参数 示例 securitydefinitions.basic Basic auth. // @securityDefinitions.basic BasicAuth securitydefinitions.apikey API key auth. in, name // @securityDefinitions.apikey ApiKeyAuth securitydefinitions.oauth2.application OAuth2 application auth. tokenUrl, scope // @securitydefinitions.oauth2.application OAuth2Application securitydefinitions.oauth2.implicit OAuth2 implicit auth. authorizationUrl, scope // @securitydefinitions.oauth2.implicit OAuth2Implicit securitydefinitions.oauth2.password OAuth2 password auth. tokenUrl, scope // @securitydefinitions.oauth2.password OAuth2Password securitydefinitions.oauth2.accessCode OAuth2 access code auth. tokenUrl, authorizationUrl, scope // @securitydefinitions.oauth2.accessCode OAuth2AccessCode troubleshooting Failed to load API definition. 引用了 swaggo 的文件必须添加下面包引用\ngo 1 _ \"project_root_dir/cmd/docs\" failed to load api definition. not found /swagger/v1/swagger.json 指定 doc 文档路径必须写对 [ginSwagger.URL(\"/swagger/doc.json\")]\ngo 1 2 3 4 5 6 7 8 9 // 默认路由 r := gin.Default() url := ginSwagger.URL(\"http://localhost:8080/swagger/doc.json\") r.GET(\" /swagger/*any\", ginSwagger.WrapHandler(swaggerFiles.Handler, url)) // 路由组 // 如果已存在路由组，可以在对应注册路由的函数中添加 docs 路径 func RegisteredRouter(e *gin.Engine) { e.Handle(\"GET\", \"/swagger/*any\", ginSwagger.WrapHandler(swaggerFiles.Handler, ginSwagger.URL(\"/swagger/doc.json\"))) cannot find type definition: api_query.UserQuery 如果参数引用了一个对象，不可以写成 \u0026api_query.UserQuery 的格式\nParseComment error in file :missing required param comment parameters “xxx” 你的项目内其他非 API 接口的函数不能使用与 API 注释相同格式的注释\ncannot find type definition: errcode.Error Reference [1] “Failed to load API definition” / “not yet registered swag” error when rendering docs page #830\n[2] localhost:8080/swagger returns 404 page not found #2\n[3] Implementing Swagger in Go Projects\n[4] How to add Swagger in Golang Gin.\n[5] Swagger使用的时候报错：Failed to load API definition\n[6] README_zh-CN.md\n[7] Golang swaggo rendering error: “Failed to load API definition” and “Fetch error doc.json”\n","wordCount":"865","inLanguage":"zh","datePublished":"2024-06-19T00:00:00Z","dateModified":"2024-06-19T23:10:36+08:00","author":{"@type":"Person","name":"cylon"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.oomkill.com/2024/06/golib-go-swagger/"},"publisher":{"@type":"Organization","name":"Cylon's Collection","logo":{"@type":"ImageObject","url":"https://www.oomkill.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.oomkill.com/><img src=https://www.oomkill.com/favicon.ico alt aria-label=logo height=20>Cylon's Collection</a><div class=logo-switches><button id=theme-toggle><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.oomkill.com/archives><span>归档</span></a></li><li><a href=https://www.oomkill.com/tags><span>标签</span></a></li><li><a href=https://www.oomkill.com/search><span>搜索</span></a></li><li><a href=https://www.oomkill.com/about accesskey=/><span>关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Go每日一库 - 使用 gin + goswagger 构建 REST API 文档</h1><div class=post-meta><span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg><span>2024-06-19</span></span>&nbsp;·&nbsp;<span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text" style="user-select:text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z" style="user-select:text"/><polyline points="14 2 14 8 20 8" style="user-select:text"/><line x1="16" y1="13" x2="8" y2="13" style="user-select:text"/><line x1="16" y1="17" x2="8" y2="17" style="user-select:text"/><polyline points="10 9 9 9 8 9" style="user-select:text"/></svg><span>865 字</span></span>&nbsp;·&nbsp;<span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><span>5 分钟</span></span>
<span class=pe-post-meta-item>&nbsp;·&nbsp;<svg t="1714036239378" fill="currentcolor" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="6659" width="256" height="256"><path d="M690 78.2c-18.6-18.8-49-19-67.8-.4s-19 49-.4 67.8l255.4 258.6c67.8 68.6 67.8 178.8.0 247.4L653.4 878.2c-18.6 18.8-18.4 49.2.4 67.8s49.2 18.4 67.8-.4l224-226.4c104.8-106 104.8-276.4.0-382.4L690 78.2zM485.4 101.4c-24-24-56.6-37.4-90.6-37.4H96C43 64 0 107 0 160v299c0 34 13.4 66.6 37.4 90.6l336 336c50 50 131 50 181 0l267-267c50-50 50-131 0-181l-336-336zM96 160h299c8.4.0 16.6 3.4 22.6 9.4l336 336c12.4 12.4 12.4 32.8.0 45.2l-267 267c-12.4 12.4-32.8 12.4-45.2.0l-336-336c-6-6-9.4-14.2-9.4-22.6V160zm192 128a64 64 0 10-128 0 64 64 0 10128 0z" p-id="6660"/></svg></span><ul class=pe-post-meta-item><a href=https://www.oomkill.com/tags/go/>#Go</a></ul></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details><summary><span class=details>目录</span></summary><div class=inner><ul><li><a href=#openapi aria-label=OpenAPI>OpenAPI</a><ul><li><a href=#%e4%bb%80%e4%b9%88%e6%98%afopenapi aria-label=什么是OpenAPI>什么是OpenAPI</a><li><a href=#%e4%bb%80%e4%b9%88%e6%98%af-swagger aria-label="什么是 Swagger？">什么是 Swagger？</a><li><a href=#%e4%bd%bf%e7%94%a8-swagger-%e7%9a%84%e7%9b%ae%e7%9a%84 aria-label="使用 Swagger 的目的">使用 Swagger 的目的</a></ul><li><a href=#swagger-%e4%b8%8e-gin-%e7%9a%84%e9%9b%86%e6%88%90 aria-label="Swagger 与 Gin 的集成">Swagger 与 Gin 的集成</a><ul><li><a href=#%e6%8b%89%e5%8f%96-swaggo aria-label="拉取 Swaggo">拉取 Swaggo</a><li><a href=#%e4%b8%8e-gin-%e7%9a%84%e9%9b%86%e6%88%90 aria-label="与 Gin 的集成">与 Gin 的集成</a><ul><li><a href=#%e6%b7%bb%e5%8a%a0%e9%80%9a%e7%94%a8%e6%b3%a8%e9%87%8a aria-label=添加通用注释>添加通用注释</a><li><a href=#%e4%b8%ba-swagger-docs-%e6%b7%bb%e5%8a%a0%e8%b7%af%e7%94%b1 aria-label="为 Swagger Docs 添加路由">为 Swagger Docs 添加路由</a><li><a href=#%e5%90%91-gin-api-%e6%9c%8d%e5%8a%a1%e5%99%a8%e6%b7%bb%e5%8a%a0-api-%e6%b3%a8%e9%87%8a aria-label="向 Gin API 服务器添加 API 注释">向 Gin API 服务器添加 API 注释</a><li><a href=#%e7%94%9f%e6%88%90-swagger-%e6%96%87%e6%a1%a3 aria-label="生成 Swagger 文档">生成 Swagger 文档</a></ul><li><a href=#%e8%ae%bf%e9%97%ae-swagger-%e6%96%87%e6%a1%a3 aria-label="访问 swagger 文档">访问 swagger 文档</a></ul><li><a href=#swagger-%e6%b3%a8%e9%87%8a aria-label="swagger 注释">swagger 注释</a><ul><li><a href=#%e9%80%9a%e7%94%a8-api-%e6%b3%a8%e9%87%8a aria-label="通用 API 注释">通用 API 注释</a><li><a href=#api-%e6%b3%a8%e9%87%8a aria-label="API 注释">API 注释</a><li><a href=#%e5%ae%89%e5%85%a8%e7%9b%b8%e5%85%b3%e5%8f%82%e6%95%b0 aria-label=安全相关参数>安全相关参数</a></ul><li><a href=#troubleshooting aria-label=troubleshooting>troubleshooting</a><ul><li><a href=#failed-to-load-api-definition aria-label="Failed to load API definition.">Failed to load API definition.</a><li><a href=#failed-to-load-api-definition-not-found-swaggerv1swaggerjson aria-label="failed to load api definition. not found /swagger/v1/swagger.json">failed to load api definition. not found /swagger/v1/swagger.json</a><li><a href=#cannot-find-type-definition-api_queryuserquery aria-label="cannot find type definition: api_query.UserQuery">cannot find type definition: api_query.UserQuery</a><li><a href=#parsecomment-error-in-file--missing-required-param-comment-parameters-xxx aria-label="ParseComment error in file  :missing required param comment parameters &amp;ldquo;xxx&amp;rdquo;">ParseComment error in file :missing required param comment parameters &ldquo;xxx&rdquo;</a><li><a href=#cannot-find-type-definition-errcodeerror aria-label="cannot find type definition: errcode.Error">cannot find type definition: errcode.Error</a></ul><li><a href=#reference aria-label=Reference>Reference</a></li></div></details></div></aside><script src=/js/pe-toc.min.445eb1bfc5e85dd13b9519fcc2a806522e9629b6224a2974052789ba00ab78af.js integrity="sha256-RF6xv8XoXdE7lRn8wqgGUi6WKbYiSil0BSeJugCreK8="></script><div class=post-content><h2 id=openapi>OpenAPI<a hidden class=anchor aria-hidden=true href=#openapi>#</a></h2><h3 id=什么是openapi>什么是OpenAPI<a hidden class=anchor aria-hidden=true href=#什么是openapi>#</a></h3><p>Swagger 是一套围绕 OpenAPI 规范构建的开源工具，可帮助我们设计，构建，记录和使用 REST API。</p><p><strong>OpenAPI 规范</strong>（前名称为 Swagger 规范）是 REST API 的 API 描述格式。包括：</p><ul><li>可用端点 ( 例如 <code>/users</code>) 以及每个 endpoint 上的操作 (例如 <code>GET /users</code>, <code>POST /users</code>)</li><li>操作参数，每个操作的输入和输出</li><li>认证方法</li><li>联系信息，许可证，使用条款等其他信息。</li></ul><h3 id=什么是-swagger>什么是 Swagger？<a hidden class=anchor aria-hidden=true href=#什么是-swagger>#</a></h3><p><strong>Swagger</strong> 是一组围绕 OpenAPI 规范构建的开源工具，有助于用户设计，构建，记录和使用 REST API，支持整个 API 生命周期的开发，从设计和文档到测试和部署。</p><h3 id=使用-swagger-的目的>使用 Swagger 的目的<a hidden class=anchor aria-hidden=true href=#使用-swagger-的目的>#</a></h3><ol><li><strong>标准化文档格式</strong>：Swagger (OpenAPI) 采用了准化 API 文档格式。通过使用 Swaggo（将注释转换为 Swagger2.0文档的包） 生成 Swagger 文档，Swagger 的结构化格式的文档，使开发人员更容易理解产品的 API 交互。</li><li><strong>交互式文档体验</strong>：Swagger UI 与 Swaggo 集成，提供交互式且用户友好的界面，用于测试 API。Swaggo提供了一个自动生成的界面，允许开发人员浏览 Endpoint，查看请求/响应示例，甚至可以直接从文档执行 API 请求。这种交互式体验可提高开发人员的工作效率并加速 API 的采用。</li><li><strong>自动且最新的文档</strong>：Swaggo 可自动从用户的 Go 代码生成 API 文档。这种自动化无需手动维护单独的文档文件。Swaggo 直接从用户的代码库中提取信息，包括 endpoint 详细信息，请求/响应模型和注释。使用这种方法可确保用户的 API 文档随着代码的更新而保持最新。</li></ol><h2 id=swagger-与-gin-的集成>Swagger 与 Gin 的集成<a hidden class=anchor aria-hidden=true href=#swagger-与-gin-的集成>#</a></h2><h3 id=拉取-swaggo>拉取 Swaggo<a hidden class=anchor aria-hidden=true href=#拉取-swaggo>#</a></h3><p>使用如下命令下载swag</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go install github.com/swaggo/swag/cmd/swag</span></span></code></pre></td></tr></table></div></div></div></div><h3 id=与-gin-的集成>与 Gin 的集成<a hidden class=anchor aria-hidden=true href=#与-gin-的集成>#</a></h3><h4 id=添加通用注释>添加通用注释<a hidden class=anchor aria-hidden=true href=#添加通用注释>#</a></h4><p>swaggo 中包含两种注释，通用注释与 API 注释，通用注释是用于程序 main.go 中，标记文档的信息，API 注释是用于标注每个接口的信息。</p><ol><li>下载相关包</li></ol><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go install github.com/swaggo/swag/cmd/swag
</span></span><span class=line><span class=cl>$ go get -v github.com/swaggo/gin-swagger <span class=c1># gin-swagger middleware</span>
</span></span><span class=line><span class=cl>$ go get -v github.com/swaggo/files <span class=c1># swagger embed files</span></span></span></code></pre></td></tr></table></div></div></div></div><ol start=2><li>在项目 main.go 源代码中添加通用的 API 注释：</li></ol><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>go</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// @title           Swagger Example API
</span></span></span><span class=line><span class=cl><span class=c1>// @version         1.0
</span></span></span><span class=line><span class=cl><span class=c1>// @description     This is a sample server celler server.
</span></span></span><span class=line><span class=cl><span class=c1>// @termsOfService  http://swagger.io/terms/
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// @contact.name   API Support
</span></span></span><span class=line><span class=cl><span class=c1>// @contact.url    http://www.swagger.io/support
</span></span></span><span class=line><span class=cl><span class=c1>// @contact.email  support@swagger.io
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// @license.name  Apache 2.0
</span></span></span><span class=line><span class=cl><span class=c1>// @license.url   http://www.apache.org/licenses/LICENSE-2.0.html
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// @host      localhost:8080
</span></span></span><span class=line><span class=cl><span class=c1>// @BasePath  /api/v1
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// @securityDefinitions.basic  BasicAuth
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// @externalDocs.description  OpenAPI
</span></span></span><span class=line><span class=cl><span class=c1>// @externalDocs.url          https://swagger.io/resources/open-api/
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>r</span> <span class=o>:=</span> <span class=nx>gin</span><span class=p>.</span><span class=nf>Default</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><h4 id=为-swagger-docs-添加路由>为 Swagger Docs 添加路由<a hidden class=anchor aria-hidden=true href=#为-swagger-docs-添加路由>#</a></h4><p>以将中间件添加到您的 Gin 应用程序中。在您的路由函数中或者主函数中，添加如下下代码：</p><p>此代码为 Swagger UI 设置了一条路由，并告诉它在指定的 URL 处查找 Swagger 文档。</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>go</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// 默认路由
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>r</span> <span class=o>:=</span> <span class=nx>gin</span><span class=p>.</span><span class=nf>Default</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>url</span> <span class=o>:=</span> <span class=nx>ginSwagger</span><span class=p>.</span><span class=nf>URL</span><span class=p>(</span><span class=s>&#34;http://localhost:8080/swagger/doc.json&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>r</span><span class=p>.</span><span class=nf>GET</span><span class=p>(</span><span class=s>&#34; /swagger/*any&#34;</span><span class=p>,</span> <span class=nx>ginSwagger</span><span class=p>.</span><span class=nf>WrapHandler</span><span class=p>(</span><span class=nx>swaggerFiles</span><span class=p>.</span><span class=nx>Handler</span><span class=p>,</span> <span class=nx>url</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>// 路由组
</span></span></span><span class=line><span class=cl><span class=c1>// 如果已存在路由组，可以在对应注册路由的函数中添加 docs 路径
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>RegisteredRouter</span><span class=p>(</span><span class=nx>e</span> <span class=o>*</span><span class=nx>gin</span><span class=p>.</span><span class=nx>Engine</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>e</span><span class=p>.</span><span class=nf>Handle</span><span class=p>(</span><span class=s>&#34;GET&#34;</span><span class=p>,</span> <span class=s>&#34;/swagger/*any&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>ginSwagger</span><span class=p>.</span><span class=nf>WrapHandler</span><span class=p>(</span><span class=nx>swaggerFiles</span><span class=p>.</span><span class=nx>Handler</span><span class=p>,</span> <span class=nx>ginSwagger</span><span class=p>.</span><span class=nf>URL</span><span class=p>(</span><span class=s>&#34;/swagger/doc.json&#34;</span><span class=p>)))</span>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><h4 id=向-gin-api-服务器添加-api-注释>向 Gin API 服务器添加 API 注释<a hidden class=anchor aria-hidden=true href=#向-gin-api-服务器添加-api-注释>#</a></h4><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>go</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// ShowAccount godoc
</span></span></span><span class=line><span class=cl><span class=c1>// @Summary      Show an account
</span></span></span><span class=line><span class=cl><span class=c1>// @Description  get string by ID
</span></span></span><span class=line><span class=cl><span class=c1>// @Tags         accounts
</span></span></span><span class=line><span class=cl><span class=c1>// @Accept       json
</span></span></span><span class=line><span class=cl><span class=c1>// @Produce      json
</span></span></span><span class=line><span class=cl><span class=c1>// @Param        id   path      int  true  &#34;Account ID&#34;
</span></span></span><span class=line><span class=cl><span class=c1>// @Success      200  {object}  model.Account
</span></span></span><span class=line><span class=cl><span class=c1>// @Failure      400  {object}  httputil.HTTPError
</span></span></span><span class=line><span class=cl><span class=c1>// @Failure      404  {object}  httputil.HTTPError
</span></span></span><span class=line><span class=cl><span class=c1>// @Failure      500  {object}  httputil.HTTPError
</span></span></span><span class=line><span class=cl><span class=c1>// @Router       /accounts/{id} [get]
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=p>(</span><span class=nx>c</span> <span class=o>*</span><span class=nx>Controller</span><span class=p>)</span> <span class=nf>ShowAccount</span><span class=p>(</span><span class=nx>ctx</span> <span class=o>*</span><span class=nx>gin</span><span class=p>.</span><span class=nx>Context</span><span class=p>)</span> <span class=p>{</span></span></span></code></pre></td></tr></table></div></div></div></div><h4 id=生成-swagger-文档>生成 Swagger 文档<a hidden class=anchor aria-hidden=true href=#生成-swagger-文档>#</a></h4><p>将注释添加到代码后，可以通过运行以下命令生成 Swagger 文档</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ swag init -g cmd/main.go --output ./docs/  --packageName docs</span></span></code></pre></td></tr></table></div></div></div></div><p>此命令将会在项目中 docks 文件夹中生成一个文件 <code>doc.json</code> 。我们之前添加的中间件将使用此文件在 Swagger UI 中显示文档。</p><p>确保导入了生成的包 <code>docs/docs.go</code> 文件，这样特定的配置文件才会被初始化。如果通用 API 注释没有写在 <code>main.go</code> 中，可以使用 <code>-g</code> 参数来告知 swag-cli</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ swag init -g http/api.go</span></span></code></pre></td></tr></table></div></div></div></div><h3 id=访问-swagger-文档>访问 swagger 文档<a hidden class=anchor aria-hidden=true href=#访问-swagger-文档>#</a></h3><p>在完成上述步骤后，可以浏览器中访问 http://{project_domain}/swagger/index.html，来查看 swagger 文档，这个路径取决于在 gin 路由里配置的路径。</p><h2 id=swagger-注释>swagger 注释<a hidden class=anchor aria-hidden=true href=#swagger-注释>#</a></h2><h3 id=通用-api-注释>通用 API 注释<a hidden class=anchor aria-hidden=true href=#通用-api-注释>#</a></h3><table><thead><tr><th>注释</th><th>说明</th><th>示例</th></tr></thead><tbody><tr><td>title</td><td><strong>必填</strong> 应用程序的名称。</td><td>// @title Swagger Example API</td></tr><tr><td>version</td><td><strong>必填</strong> 提供应用程序API的版本。</td><td>// @version 1.0</td></tr><tr><td>description</td><td>应用程序的简短描述。</td><td>// @description This is a sample server celler server.</td></tr><tr><td>tag.name</td><td>标签的名称。</td><td>// @tag.name This is the name of the tag</td></tr><tr><td>tag.description</td><td>标签的描述。</td><td>// @tag.description Cool Description</td></tr><tr><td>tag.docs.url</td><td>标签的外部文档的URL。</td><td>// @tag.docs.url <a href=https://example.com/ target=_blank rel="noopener nofollow noreferrer">https://example.com</a></td></tr><tr><td>tag.docs.description</td><td>标签的外部文档说明。</td><td>// @tag.docs.description Best example documentation</td></tr><tr><td>termsOfService</td><td>API的服务条款。</td><td>// @termsOfService <a href=http://swagger.io/terms/ target=_blank rel="noopener nofollow noreferrer">http://swagger.io/terms/</a></td></tr><tr><td>contact.name</td><td>公开的API的联系信息。</td><td>// @contact.name API Support</td></tr><tr><td>contact.url</td><td>联系信息的URL。 必须采用网址格式。</td><td>// @contact.url <a href=http://www.swagger.io/support target=_blank rel="noopener nofollow noreferrer">http://www.swagger.io/support</a></td></tr><tr><td>contact.email</td><td>联系人/组织的电子邮件地址。 必须采用电子邮件地址的格式。</td><td>// @contact.email <a href=mailto:support@swagger.io>support@swagger.io</a></td></tr><tr><td>license.name</td><td><strong>必填</strong> 用于API的许可证名称。</td><td>// @license.name Apache 2.0</td></tr><tr><td>license.url</td><td>用于API的许可证的URL。 必须采用网址格式。</td><td>// @license.url <a href=http://www.apache.org/licenses/LICENSE-2.0.html target=_blank rel="noopener nofollow noreferrer">http://www.apache.org/licenses/LICENSE-2.0.html</a></td></tr><tr><td>host</td><td>运行API的主机（主机名或IP地址）。</td><td>// @host localhost:8080</td></tr><tr><td>BasePath</td><td>运行API的基本路径。</td><td>// @BasePath /api/v1</td></tr><tr><td>accept</td><td>API 可以使用的 MIME 类型列表。 请注意，Accept 仅影响具有请求正文的操作，例如 POST、PUT 和 PATCH。 值必须如“<a href=https://github.com/swaggo/swag/blob/master/README_zh-CN.md#mime%e7%b1%bb%e5%9e%8b target=_blank rel="noopener nofollow noreferrer">Mime类型</a>”中所述。</td><td>// @accept json</td></tr><tr><td>produce</td><td>API可以生成的MIME类型的列表。值必须如“<a href=https://github.com/swaggo/swag/blob/master/README_zh-CN.md#mime%e7%b1%bb%e5%9e%8b target=_blank rel="noopener nofollow noreferrer">Mime类型</a>”中所述。</td><td>// @produce json</td></tr><tr><td>query.collection.format</td><td>请求URI query里数组参数的默认格式：csv，multi，pipes，tsv，ssv。 如果未设置，则默认为csv。</td><td>// @query.collection.format multi</td></tr><tr><td>schemes</td><td>用空格分隔的请求的传输协议。</td><td>// @schemes http https</td></tr><tr><td>externalDocs.description</td><td>Description of the external document.</td><td>// @externalDocs.description OpenAPI</td></tr><tr><td>externalDocs.url</td><td>URL of the external document.</td><td>// @externalDocs.url <a href=https://swagger.io/resources/open-api/ target=_blank rel="noopener nofollow noreferrer">https://swagger.io/resources/open-api/</a></td></tr><tr><td>x-name</td><td>扩展的键必须以x-开头，并且只能使用json值</td><td>// @x-example-key {&ldquo;key&rdquo;: &ldquo;value&rdquo;}</td></tr></tbody></table><h3 id=api-注释>API 注释<a hidden class=anchor aria-hidden=true href=#api-注释>#</a></h3><table><thead><tr><th>注释</th><th>描述</th></tr></thead><tbody><tr><td>description</td><td>操作行为的详细说明。</td></tr><tr><td>description.markdown</td><td>应用程序的简短描述。该描述将从名为 <code>endpointname.md</code> 的文件中读取。</td></tr><tr><td>id</td><td>用于标识操作的唯一字符串。在所有 API 操作中必须唯一。</td></tr><tr><td>tags</td><td>每个 API 操作的标签列表，以逗号分隔。</td></tr><tr><td>summary</td><td>该操作的简短摘要。</td></tr><tr><td>accept</td><td>API 可以使用的 MIME 类型列表。 请注意，Accept 仅影响具有请求正文的操作，例如 POST、PUT 和 PATCH。 值必须如 “Mime类型” 中所述。</td></tr><tr><td>produce</td><td>API可以生成的MIME类型的列表。值必须如 “Mime类型” 中所述。</td></tr><tr><td>param</td><td>用空格分隔的参数。<br><code>param name</code>,<br><code>param type</code>,<br><code>data type</code>,<br><code>is mandatory?</code>,<br><code>comment</code> <code>attribute(optional)</code></td></tr><tr><td>security</td><td>每个 API 操作的安全性。</td></tr><tr><td>success</td><td>以空格分隔的成功响应。<code>return code</code>,<code>{param type}</code>,<code>data type</code>,<code>comment</code></td></tr><tr><td>failure</td><td>以空格分隔的故障响应。<code>return code</code>,<code>{param type}</code>,<code>data type</code>,<code>comment</code></td></tr><tr><td>response</td><td>与success、failure作用相同</td></tr><tr><td>header</td><td>以空格分隔的头字段。 <code>return code</code>,<code>{param type}</code>,<code>data type</code>,<code>comment</code></td></tr><tr><td>router</td><td>以空格分隔的路径定义。 <code>path</code>,<code>[httpMethod]</code></td></tr><tr><td>deprecatedrouter</td><td>与router相同，但是是deprecated的。</td></tr><tr><td>x-name</td><td>扩展字段必须以 <code>x-</code> 开头，并且只能使用 json 值。</td></tr><tr><td>deprecated</td><td>将当前 API 操作的所有路径设置为deprecated</td></tr></tbody></table><h3 id=安全相关参数>安全相关参数<a hidden class=anchor aria-hidden=true href=#安全相关参数>#</a></h3><table><thead><tr><th>注释</th><th>描述</th><th>参数</th><th>示例</th></tr></thead><tbody><tr><td>securitydefinitions.basic</td><td><a href=https://swagger.io/docs/specification/2-0/authentication/basic-authentication/ target=_blank rel="noopener nofollow noreferrer">Basic</a> auth.</td><td></td><td>// @securityDefinitions.basic BasicAuth</td></tr><tr><td>securitydefinitions.apikey</td><td><a href=https://swagger.io/docs/specification/2-0/authentication/api-keys/ target=_blank rel="noopener nofollow noreferrer">API key</a> auth.</td><td>in, name</td><td>// @securityDefinitions.apikey ApiKeyAuth</td></tr><tr><td>securitydefinitions.oauth2.application</td><td><a href=https://swagger.io/docs/specification/authentication/oauth2/ target=_blank rel="noopener nofollow noreferrer">OAuth2 application</a> auth.</td><td>tokenUrl, scope</td><td>// @securitydefinitions.oauth2.application OAuth2Application</td></tr><tr><td>securitydefinitions.oauth2.implicit</td><td><a href=https://swagger.io/docs/specification/authentication/oauth2/ target=_blank rel="noopener nofollow noreferrer">OAuth2 implicit</a> auth.</td><td>authorizationUrl, scope</td><td>// @securitydefinitions.oauth2.implicit OAuth2Implicit</td></tr><tr><td>securitydefinitions.oauth2.password</td><td><a href=https://swagger.io/docs/specification/authentication/oauth2/ target=_blank rel="noopener nofollow noreferrer">OAuth2 password</a> auth.</td><td>tokenUrl, scope</td><td>// @securitydefinitions.oauth2.password OAuth2Password</td></tr><tr><td>securitydefinitions.oauth2.accessCode</td><td><a href=https://swagger.io/docs/specification/authentication/oauth2/ target=_blank rel="noopener nofollow noreferrer">OAuth2 access code</a> auth.</td><td>tokenUrl, authorizationUrl, scope</td><td>// @securitydefinitions.oauth2.accessCode OAuth2AccessCode</td></tr></tbody></table><h2 id=troubleshooting>troubleshooting<a hidden class=anchor aria-hidden=true href=#troubleshooting>#</a></h2><h3 id=failed-to-load-api-definition>Failed to load API definition.<a hidden class=anchor aria-hidden=true href=#failed-to-load-api-definition>#</a></h3><p>引用了 swaggo 的文件必须添加下面包引用</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>go</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>_</span> <span class=s>&#34;project_root_dir/cmd/docs&#34;</span></span></span></code></pre></td></tr></table></div></div></div></div><h3 id=failed-to-load-api-definition-not-found-swaggerv1swaggerjson>failed to load api definition. not found /swagger/v1/swagger.json<a hidden class=anchor aria-hidden=true href=#failed-to-load-api-definition-not-found-swaggerv1swaggerjson>#</a></h3><p>指定 doc 文档路径必须写对 [ginSwagger.URL("/swagger/doc.json")]</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>go</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=c1>// 默认路由
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nx>r</span> <span class=o>:=</span> <span class=nx>gin</span><span class=p>.</span><span class=nf>Default</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nx>url</span> <span class=o>:=</span> <span class=nx>ginSwagger</span><span class=p>.</span><span class=nf>URL</span><span class=p>(</span><span class=s>&#34;http://localhost:8080/swagger/doc.json&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>r</span><span class=p>.</span><span class=nf>GET</span><span class=p>(</span><span class=s>&#34; /swagger/*any&#34;</span><span class=p>,</span> <span class=nx>ginSwagger</span><span class=p>.</span><span class=nf>WrapHandler</span><span class=p>(</span><span class=nx>swaggerFiles</span><span class=p>.</span><span class=nx>Handler</span><span class=p>,</span> <span class=nx>url</span><span class=p>))</span>
</span></span><span class=line><span class=cl><span class=c1>// 路由组
</span></span></span><span class=line><span class=cl><span class=c1>// 如果已存在路由组，可以在对应注册路由的函数中添加 docs 路径
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kd>func</span> <span class=nf>RegisteredRouter</span><span class=p>(</span><span class=nx>e</span> <span class=o>*</span><span class=nx>gin</span><span class=p>.</span><span class=nx>Engine</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>e</span><span class=p>.</span><span class=nf>Handle</span><span class=p>(</span><span class=s>&#34;GET&#34;</span><span class=p>,</span> <span class=s>&#34;/swagger/*any&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>ginSwagger</span><span class=p>.</span><span class=nf>WrapHandler</span><span class=p>(</span><span class=nx>swaggerFiles</span><span class=p>.</span><span class=nx>Handler</span><span class=p>,</span> <span class=nx>ginSwagger</span><span class=p>.</span><span class=nf>URL</span><span class=p>(</span><span class=s>&#34;/swagger/doc.json&#34;</span><span class=p>)))</span></span></span></code></pre></td></tr></table></div></div></div></div><h3 id=cannot-find-type-definition-api_queryuserquery>cannot find type definition: api_query.UserQuery<a hidden class=anchor aria-hidden=true href=#cannot-find-type-definition-api_queryuserquery>#</a></h3><p>如果参数引用了一个对象，不可以写成 <code>&amp;api_query.UserQuery</code> 的格式</p><h3 id=parsecomment-error-in-file--missing-required-param-comment-parameters-xxx>ParseComment error in file :missing required param comment parameters &ldquo;xxx&rdquo;<a hidden class=anchor aria-hidden=true href=#parsecomment-error-in-file--missing-required-param-comment-parameters-xxx>#</a></h3><p>你的项目内其他非 API 接口的函数不能使用与 API 注释相同格式的注释</p><h3 id=cannot-find-type-definition-errcodeerror>cannot find type definition: errcode.Error<a hidden class=anchor aria-hidden=true href=#cannot-find-type-definition-errcodeerror>#</a></h3><h2 id=reference>Reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h2><p><sup id=1>[1]</sup> <a href=https://github.com/swaggo/swag/issues/830 target=_blank rel="noopener nofollow noreferrer">&ldquo;Failed to load API definition&rdquo; / &ldquo;not yet registered swag&rdquo; error when rendering docs page #830</a></p><p><sup id=2>[2]</sup> <a href=https://github.com/swaggo/gin-swagger/issues/2 target=_blank rel="noopener nofollow noreferrer">localhost:8080/swagger returns 404 page not found #2</a></p><p><sup id=3>[3]</sup> <a href=https://medium.com/julotech/implementing-swagger-in-go-projects-8579a5fb955 target=_blank rel="noopener nofollow noreferrer">Implementing Swagger in Go Projects</a></p><p><sup id=4>[4]</sup> <a href=https://lemoncode21.medium.com/how-to-add-swagger-in-golang-gin-6932e8076ec0 target=_blank rel="noopener nofollow noreferrer">How to add Swagger in Golang Gin.</a></p><p><sup id=5>[5]</sup> <a href=https://www.cnblogs.com/Zev_Fung/p/11588515.html target=_blank rel="noopener nofollow noreferrer">Swagger使用的时候报错：Failed to load API definition</a></p><p><sup id=6>[6]</sup> <a href=https://github.com/swaggo/swag/blob/master/README_zh-CN.md target=_blank rel="noopener nofollow noreferrer">README_zh-CN.md</a></p><p><sup id=7>[7]</sup> <a href=https://stackoverflow.com/questions/62101550/golang-swaggo-rendering-error-failed-to-load-api-definition-and-fetch-error target=_blank rel="noopener nofollow noreferrer">Golang swaggo rendering error: &ldquo;Failed to load API definition&rdquo; and &ldquo;Fetch error doc.json&rdquo;</a></p></div><div class=pe-copyright><hr><blockquote><p>本文为原创内容，版权归作者所有。如需转载，请在文章中声明本文标题及链接。</p><p>文章标题：Go每日一库 - 使用 gin + goswagger 构建 REST API 文档</p><p>文章链接：<a href=https://www.oomkill.com/2024/06/golib-go-swagger/ target=_blank>https://www.oomkill.com/2024/06/golib-go-swagger/</a></p><p>许可协议：<a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></p></blockquote></div><div class=comments-separator></div><h3 class=relatedContentTitle>相关阅读</h3><ul class=relatedContent><li><a href=/2023/01/goskill-port-is-available/><span>如何使用go语言来检查端口可用性</span></a></li><li><a href=/2022/03/golib-gocolly/><span>Go每日一库 - gocolly</span></a></li><li><a href=/2019/10/go-mod/><span>Go mod</span></a></li><li><a href=/2019/10/go-tcp-in-go/><span>Go socket TCP协议实现</span></a></li><li><a href=/2019/10/go-function/><span>Go 函数 function</span></a></li></ul><div class=comments-separator></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.oomkill.com/tags/go/>Go</a></li></ul><nav class=paginav><a class=prev href=https://www.oomkill.com/2024/06/debian12-install-tutorial-step-by-step/><span class=title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select:text"><line x1="19" y1="12" x2="5" y2="12" style="user-select:text"/><polyline points="12 19 5 12 12 5" style="user-select:text"/></polyline></svg>&nbsp;</span>
<span>安装Debian12 (Bookworm) Step-by-Step</span>
</a><a class=next href=https://www.oomkill.com/2024/06/docker-push-gcr/><span class=title></span>
<span>使用docker管理谷歌物件仓库gcr上的镜像&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select:text"><line x1="5" y1="12" x2="19" y2="12" style="user-select:text"/><polyline points="12 5 19 12 12 19" style="user-select:text"/></svg></span></a></nav></footer><div class=pe-comments-decoration><p class=pe-comments-title></p><p class=pe-comments-subtitle></p></div><div id=pe-comments></div><script src=/js/pe-go-comment.min.86a214102576ba5f9b7bdc29eed8d58dd56e34aef80b3c65c73ea9cc88443696.js integrity="sha256-hqIUECV2ul+be9wp7tjVjdVuNK74Czxlxz6pzIhENpY="></script><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const s={src:"https://giscus.app/client.js","data-repo":"cylonchau/cylonchau.github.io","data-repo-id":"R_kgDOIRlNSQ","data-category":"Announcements","data-category-id":"DIC_kwDOIRlNSc4CXy1U","data-mapping":"pathname","data-term":"posts/golib-go-swagger","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":getStoredTheme(),"data-lang":"zh-TW","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(s).forEach(([t,n])=>e.setAttribute(t,n)),document.querySelector("#pe-comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme);const n=document.querySelector("#theme-toggle-float");n&&n.addEventListener("click",setGiscusTheme)})</script></article></main><footer class=footer><span>&copy; 2024 <a href=https://www.oomkill.com/>Cylon's Collection</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> on
<a href=https://pages.github.com/ rel=noopener target=_blank>GitHub Pages</a> & Theme
        <a href=https://github.com/tofuwine/PaperMod-PE rel=noopener target=_blank>PaperMod-PE</a></span></footer><div class=pe-right-sidebar><a href=javascript:void(0); id=theme-toggle-float class=pe-float-btn><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</a><a href=#top class=pe-float-btn id=top-link><span id=pe-read-progress></span></a></div><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>