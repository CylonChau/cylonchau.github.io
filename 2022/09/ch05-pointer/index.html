<!doctype html><html lang=zh dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ch05 指针 | Cylon's Collection</title><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NP3JNCPR" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><meta name=keywords content="C"><meta name=description content='指针 指针声明 [1] 指针/指针变量 (pointer) 是用于存储地址的变量
使用 & 运算符 来访问变量的地址。例如
c 1 2 3 4 5 6 7 #include <stdio.h> void main() { int a = 100; printf("%x", &amp;a); } 输出结果为 16进制的内存地址
c 1 61fe1c 使用地址运算符 * 可以从变量地址中获取变量的值，这个行为被称为间接引用/解引用(indirection/dereferencing)。例如：
c 1 2 3 4 5 6 7 8 9 #include <stdio.h> void main() { int a = 100; printf("%d", *(&amp;a)); // 也可以写为，因为*与&优先级相同，从右到左的顺序，所以有没有()意思是相同的 printf("%d", *&amp;a); } 输出结果为 100
指针变量 指针变量是指存储一个变量的地址的变量，可以使用符号 * 来修饰变量，定义语法为：'><meta name=author content="cylon"><link rel=canonical href=http://localhost:1313/2022/09/ch05-pointer/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/favicon.ico><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/favicon.ico><link rel=mask-icon href=http://localhost:1313/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=http://localhost:1313/2022/09/ch05-pointer/><noscript><style>#theme-toggle,#top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link crossorigin=anonymous href=/assets/css/pe.min.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/pe.min.js></script><link rel=stylesheet href=https://cdn.staticfile.net/font-awesome/6.5.1/css/all.min.css><link rel=stylesheet href=https://cdn.staticfile.net/font-awesome/6.5.1/css/v4-shims.min.css><script id=MathJax-script async src=https://cdn.staticfile.net/mathjax/3.2.2/es5/tex-chtml.js></script><script>MathJax={tex:{displayMath:[["$$","$$"]],inlineMath:[["\\$","\\$"]]}}</script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"><script>(function(e,t,n,s,o){e[s]=e[s]||[],e[s].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var a=t.getElementsByTagName(n)[0],i=t.createElement(n),r=s!="dataLayer"?"&l="+s:"";i.async=!0,i.src="https://www.googletagmanager.com/gtm.js?id="+o+r,a.parentNode.insertBefore(i,a)})(window,document,"script","dataLayer","GTM-NP3JNCPR")</script><meta property="og:title" content="ch05 指针"><meta property="og:description" content='指针 指针声明 [1] 指针/指针变量 (pointer) 是用于存储地址的变量
使用 & 运算符 来访问变量的地址。例如
c 1 2 3 4 5 6 7 #include <stdio.h> void main() { int a = 100; printf("%x", &amp;a); } 输出结果为 16进制的内存地址
c 1 61fe1c 使用地址运算符 * 可以从变量地址中获取变量的值，这个行为被称为间接引用/解引用(indirection/dereferencing)。例如：
c 1 2 3 4 5 6 7 8 9 #include <stdio.h> void main() { int a = 100; printf("%d", *(&amp;a)); // 也可以写为，因为*与&优先级相同，从右到左的顺序，所以有没有()意思是相同的 printf("%d", *&amp;a); } 输出结果为 100
指针变量 指针变量是指存储一个变量的地址的变量，可以使用符号 * 来修饰变量，定义语法为：'><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/2022/09/ch05-pointer/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-09-28T00:00:00+00:00"><meta property="og:site_name" content="Cylon's Collection"><meta name=twitter:card content="summary"><meta name=twitter:title content="ch05 指针"><meta name=twitter:description content='指针 指针声明 [1] 指针/指针变量 (pointer) 是用于存储地址的变量
使用 & 运算符 来访问变量的地址。例如
c 1 2 3 4 5 6 7 #include <stdio.h> void main() { int a = 100; printf("%x", &amp;a); } 输出结果为 16进制的内存地址
c 1 61fe1c 使用地址运算符 * 可以从变量地址中获取变量的值，这个行为被称为间接引用/解引用(indirection/dereferencing)。例如：
c 1 2 3 4 5 6 7 8 9 #include <stdio.h> void main() { int a = 100; printf("%d", *(&amp;a)); // 也可以写为，因为*与&优先级相同，从右到左的顺序，所以有没有()意思是相同的 printf("%d", *&amp;a); } 输出结果为 100
指针变量 指针变量是指存储一个变量的地址的变量，可以使用符号 * 来修饰变量，定义语法为：'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"ch05 指针","item":"http://localhost:1313/2022/09/ch05-pointer/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ch05 指针","name":"ch05 指针","description":"指针 指针声明 [1] 指针/指针变量 (pointer) 是用于存储地址的变量\n使用 \u0026amp; 运算符 来访问变量的地址。例如\nc 1 2 3 4 5 6 7 #include \u0026lt;stdio.h\u0026gt; void main() { int a = 100; printf(\u0026#34;%x\u0026#34;, \u0026amp;a); } 输出结果为 16进制的内存地址\nc 1 61fe1c 使用地址运算符 * 可以从变量地址中获取变量的值，这个行为被称为间接引用/解引用(indirection/dereferencing)。例如：\nc 1 2 3 4 5 6 7 8 9 #include \u0026lt;stdio.h\u0026gt; void main() { int a = 100; printf(\u0026#34;%d\u0026#34;, *(\u0026amp;a)); // 也可以写为，因为*与\u0026amp;优先级相同，从右到左的顺序，所以有没有()意思是相同的 printf(\u0026#34;%d\u0026#34;, *\u0026amp;a); } 输出结果为 100\n指针变量 指针变量是指存储一个变量的地址的变量，可以使用符号 * 来修饰变量，定义语法为：","keywords":["C"],"articleBody":"指针 指针声明 [1] 指针/指针变量 (pointer) 是用于存储地址的变量\n使用 \u0026 运算符 来访问变量的地址。例如\nc 1 2 3 4 5 6 7 #include void main() { int a = 100; printf(\"%x\", \u0026a); } 输出结果为 16进制的内存地址\nc 1 61fe1c 使用地址运算符 * 可以从变量地址中获取变量的值，这个行为被称为间接引用/解引用(indirection/dereferencing)。例如：\nc 1 2 3 4 5 6 7 8 9 #include void main() { int a = 100; printf(\"%d\", *(\u0026a)); // 也可以写为，因为*与\u0026优先级相同，从右到左的顺序，所以有没有()意思是相同的 printf(\"%d\", *\u0026a); } 输出结果为 100\n指针变量 指针变量是指存储一个变量的地址的变量，可以使用符号 * 来修饰变量，定义语法为：\nc 1 dataType *pointerVariableName = \u0026variableName; 例如，下面的两个输出结果是相同的地址\nc 1 2 3 4 5 6 7 8 9 10 11 12 13 #include void main() { int a = 100; int *pointer; pointer = \u0026a; printf(\"address of a is: %x\\n\",\u0026a); printf(\"address of pointer is: %x\\n\",pointer); } address of a is: 61fe14 address of pointer is: 61fe14 Notes：指针可以通过变量修改也可以直接通过地址进行修改，指针变量就是通过地址进行修改\n修饰符说明 修饰符 说明 * 两个用途：\n指针变量的声明\n返回被引用变量的值 \u0026 返回变量地址 使用const修饰指针 [3] 使用关键字 const 修饰的指针变量是不能改变指针变量所指向的地址的变量，通俗来讲即不能被改变值的指针变量\n声明语句\nc 1 2 \u003ctype of pointer\u003e *const \u003cname of pointer\u003e; int *const ptr; const位置：const修饰的部分（const所在位置）不可改变\n例如 const int *p; 与 int const *p; 这里修饰的都是 *p 故\n*p （变量地址）不能被改变\np （变量值）可以被改变\nc 1 2 3 4 5 6 7 8 9 10 11 12 #include #include void main() { int a = 10; int b = 20; int const *p; *p = \u0026b; // result assignment of read-only location '*p' p = 30; // result 30 printf(\"%d\",p); } int * const p; const在*后p前，这里修饰的都是 p 故\np不可以被修改 *p 可以被修改 const int *const p; 这里 const 修饰 * 和 p，所以两个都不可修改\nNotes：通常情况下常用只有第一种情况\n使用场景：最为参数形参修饰该参数为只读参数，例如 printf\nc 1 int printf (const char *__format, ...) 指针的类型 [2] C语言中包含多种指针类型：\n空指针(Null Pointer) 野指针(Wild Pointer) 悬空指针(Dangling pointer) 泛型指针(void Pointer) 一些早期Dos中的概念 近指针(Near)：不能存储大小大于 16 位的地址 远指针(Far)：32 位大小的指针 大指针(Huge)：类似于远指针。 空指针 在声明期间将 NULL 分配给指针的指针称为 空 (NULL) 指针，例如\nc 1 2 3 4 5 6 7 #include void main() { int *var = NULL; printf(\"address of var is: %p\\n\",var); } 空指针不能解引用：NULL指针因引用是一个非法的操作，在解引用之前，必须确保它不是一个NULL指针 空指针不能拷贝内容：strcpy(*p,\"1111); 泛型指针 使用 void 关键字声明指针变量，可以接受任意一种类型的变量地址，如果需要使用泛型指针，需要强转为对应类型才可以使用。如下示例：\nc 1 2 3 4 5 6 7 8 9 10 11 12 #include void main() { int a = 6666; void *p = \u0026a; printf(\"address of p is: %p\\n\", (int*) p); printf(\"value of p is: %d\\n\", *(int*) p); } address of p is: 000000000061FE14 value of p is: 6666 野指针 野指针是指，没有有效地址的空间的指针，例如声明了指针变量没有对其赋值，这种情况下会出现 Segmentation fault 异常。\nc 1 2 3 4 5 6 7 #include void main() { int *p; printf(\"address of p is: %p\\n\", *p); } 再例如一个无效的地址空间也会发生 Segmentation fault 异常；例如下列赋值中，指针p赋值被视为一个内存地址，而不是变量的值，这个地址无效。\nc 1 2 3 4 5 6 7 8 #include void main() { int *p; *p = 10000; printf(\"address of p is: %p\\n\", *p); } 野指针出现场景：\n指针变量声明但未初始化 指针释放后未置空 指针操作超出变量作用域 避免野指针的出现：\n初始化置 NULL 释放后置 NULL 悬空指针 悬空指针是指”已经被释放的内存“的指针变量，此时这个地址空间是无效的。如下所示\nc 1 2 3 4 5 6 7 8 9 10 11 #include #include void main() { int *P=(int *)malloc(sizeof(int)); int a=5; P=\u0026a; free(P); printf(\"After deallocating its memory *p=%d\", *P); } 指针的偏移量 指针步长是指指针在运算是偏移多少字节\n指针+1之后跳跃的字节数取决于指针的类型，int 4, char 1, struct struct长度\n指针解引用时需要转换成对应的数据类型，从而判断被解引用后的大小，* (int *) p 指针类型变量转换为指针int类型变量\n对于结构体指针来说，offsetof函数定位属性对应的偏移量\nc 1 2 #include offsetof(\u003cstruct struct_name\u003e, \u003cobj_name\u003e) 指针数组 在C语言中 数组是由两部分组成，数组名与数组本身。\nc 1 2 3 4 5 6 7 8 9 10 11 #include void main() { int a[10] = {0}; a[1] = 20; for (int i=0; i\u003c sizeof(a) / sizeof(a[0]); i++){ printf(\"%d\\n\",a[i]); } printf(\"arr %p = \u0026arr %p\", a, \u0026a[0]); } 上面例子中，变量a是一个数组，而变量a代表的是一个指向该数组第一个元素的地址，a=\u0026a[0] ，这是一个const修饰的指针是不可以被改变的。\n可以看到变量a和 \u0026a[0] 值是相同的，而一个const修饰的指针变量是不可改变的，故a不能被赋值，下列代码是不合法的。总结为：不允许将任何地址分配给数组变量\nc 1 2 3 4 5 6 7 8 9 10 11 12 13 14 #include void main() { int a[10] = {0}; int b[1] = {0}; int c = 10; a = \u0026b; a = \u0026c; for (int i=0; i\u003c sizeof(a) / sizeof(a[0]); i++){ printf(\"%d\\n\",a[i]); } printf(\"arr %p = \u0026arr %p\", a, \u0026a[0]); } 使用指针访问数组 上面知道了，数组变量指向的是数组的起始元素（第一个元素）的地址指针，那么通过指针可以对数组进行访问。\n因为 a = \u0026a[0] 那么 a[0] = *a，由此可推导出下列公式：\n\u0026a[1] = a+1 （取数组元素的地址） 那么 a[1] = *(a+1) （取数组元素的值） \u0026a[2] = a+2 那么 a[2] = *(a+2) 这种情况下数组的访问就有四种方法\nArray VS Pointer [4] 数组名是常量，指针是变量 sizeof(array) 得到的是数组实际占用内存空间的字节数，sizeof(pointer) 是4/8 取决于操作系统 指针运算 左值和右值 [5] 了解对于指针运算前，需要对左值(lvalue)和右值(rvalue)进行了解\n左值：通常来说是在占有内存地址（即具有地址）的对象 具有存储数据的内力，例如变量 不能是函数，表达式，或常量 综合来说，左值可以是以下几种： 任何类型的变量：int, float, pointer, struct等 数组的下标表达式，如a[1] 括号内的表达式（指针） 指针的间接引用 常量（不可改变的左值） 通过指针访问对象属性或成员 (-\u003e or .) 右值：在内存中没有占有内存地址的对象 返回不可改变的表达式或值，例如a+b是一个常量，函数运行结果是一个右值 左值的示例\nc 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #include void main() {\t// 声明变量a为int类型 int a; // a是一个左值，引用对象为int a = 1; // 左值a出现在右边的场景 int b = a; // 非法，a是左值 9 = a; // 左值，*p是指针，p就是值，*p+4是后面一个int类型的地址，是左值 int *p; int a = 10; p = \u0026a; // 这里实际上是指针运算，p+0为自己，p存储指针 *p为值，那么a=10000,p=10000 *(p+0) = 10000; printf(\"%p\\n\",a); printf(\"%p\\n\",*p); printf(\"%d\\n\",a); printf(\"%d\\n\",*p); } 右值的示例\nc 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 // 声明变量a b int a = 1, b; // 非法，a+1为常量，不是左值 a + 1 = b; // 声明指针变量 p q int *p, *q; // *p, *q 为左值 *p = 1; // 合法，左值可以赋值 // 非法 - \"p + 2\" 是右值 p + 2 = 18; q = p + 5; // \"p + 5\" 是右值，合法 // 解引用表达式是左值 *(p + 2) = 18; p = \u0026b; int arr[20]; // 数组元素访问arr[12] = *(arr+12) 所以是左值有效 struct S { int m; }; struct S obj; // obj and obj.m are lvalues // ptr-\u003e 等于 (*ptr).m 是左值有效 一元表达式需要有左值，当a是左值\u0026a才生效，12本身是一个右值，不能\u002612\nc 1 2 3 int a, *p; // a 和 *p都是左值 p = \u0026a; // 合法，\u0026a是常量为右值，p是左值 \u0026a = p; // 缺少左值，非法 三元表达式是一个右值（C++是左值）\nc 1 ( x \u003c y ? y : x) = 10; // c无效，c++有效 左值 VS 右值\n左值为内存中可识别的对象，右值为一个常量（广义上，不是const） 左值可以在左边和右边，右值必须在右边 右值必须有左值才生效 指针运算可左可右，变量运算是右值 arithmetic [6] C语言中，指针支持四种算术运算符，吧地址当作数值进行算数运算\n运算符 说明 = 可以将值赋值给指针 + 从指针加整数值以指向不同的内存位置。 - 从指针中减去整数值以指向不同的内存位置 比较运算（==, !=, \u003c, \u003e, \u003c= , \u003e=） 仅比较两个指针地址，例如\npointer == NULL ++ 指针使用递增运算符将向前位移一位 – 指针使用递减运算符将向后位移一位 当对指针变量进行递增和递减操作时，会改变指针变量本身所在地址空间 当对指针变量进行+-运算时，不会改变指针变量本身 指针数组 指针数组是指数组存储的内容是指针，即数组内所有的元素都是指针\nc 1 2 3 4 5 6 7 8 #include void main() {\tint a = 10; int b = 20; int c = 30; int *arr[] = {\u0026a, \u0026b, \u0026c}; } 指针数组本质也是一个多级指针，例如一个2D数组每行(rows) 存储的值是一列(colums)的地址\nc 1 2 3 4 5 6 7 8 #include void main() {\tint a[] = { 10 }; int b[] = { 20 }; int c[] = { 30 }; int *arr[] = {a, b, c}; } Pointer VS Array sizeof sizeof(array) 返回数组中所有元素占用内存的大小 sizeof(pointer) 只返回指针变量本身用内存的大小 \u0026运算符 数组名是 \u0026array[0] 的别名，返回数组中第一个元素的地址 \u0026pointer 返回指针的地址 指针变量可以赋值，而数组变量不可以 数组是收集了相同类型元素的集合，而指针是一个存储地址的变量 多级指针 [7] 一个指针用于存储变量的地址，而另一个指针用于存储第一个指针的地址，这种指针被称为多级指针 (Multi-Pointer or Pointer to Pointer)\n声明多级指针必须在指针变量名称前多家一个 ”*“\nc 1 int **p; 通过示例更好的了解多级指针\nc 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 #include // C program to demonstrate pointer to pointer int main() { int var = 123; // pointer for var int *ptr1; // double pointer for ptr2 int **ptr2; // third pointer for ptr2 int ***ptr3; // storing address of var in ptr1 ptr1 = \u0026var; // Storing address of ptr2 in ptr1 ptr2 = \u0026ptr1; // Storing address of ptr3 in ptr2 ptr3 = \u0026ptr2; // Displaying value of var using // both single and double pointers printf(\"Value of var = %d\\n\", var ); printf(\"Value of var using single pointer = %d\\n\", *ptr1 ); printf(\"Value of var using double pointer = %d\\n\", **ptr2); printf(\"Value of var using third pointer = %d\\n\", ***ptr3); return 0; } 输出结构\nc 1 2 3 4 Value of var = 123 Value of var using single pointer = 123 Value of var using double pointer = 123 Value of var using third pointer = 123 Note：\n多级指针，不能跨越定义，即二级指针必须拥有一级指针才可以 此时的 *ptr 可以是左值或右值 作为左值时，存储数据到该变量存储的地址空间内 作为右值时，取出该空间内的内容 c 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 #include // C program to demonstrate pointer to pointer int main() { int var = 123; // pointer for var int *ptr1; // double pointer for ptr2 int **ptr2; // third pointer for ptr2 int ***ptr3; // storing address of var in ptr1 ptr1 = \u0026var; // Storing address of ptr2 in ptr1 ptr2 = \u0026ptr1; // Storing address of ptr3 in ptr2 ptr3 = \u0026ptr2; // Displaying value of var using // both single and double pointers ***ptr3 = 100; printf(\"l-value test, the result of value = %d\\n\", var ); printf(\"l-value test, the result of ptr1 = %d\\n\", *ptr1); printf(\"l-value test, the result of ptr2 = %d\\n\", **ptr2); printf(\"l-value test, the result of ptr3 = %d\\n\", ***ptr3); var = (***ptr3+1); printf(\"r-value test, the result of value = %d\\n\", var ); return 0; } 输出结果为\nbash 1 2 3 4 5 l-value test, the result of value = 100 l-value test, the result of ptr1 = 100 l-value test, the result of ptr2 = 100 l-value test, the result of ptr3 = 100 r-value test, the result of value = 101 指针和函数 指向普通数据类型的指针 指针可以被当作函数参数传递，会改变原有的变量值\nc 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 #include void swap(int *n1, int *n2); int main() { int num1 = 5, num2 = 10; // address of num1 and num2 is passed swap( \u0026num1, \u0026num2); printf(\"num1 = %d\\n\", num1); printf(\"num2 = %d\", num2); return 0; } void swap(int* n1, int* n2) { int temp; temp = *n1; *n1 = *n2; *n2 = temp; } 指向函数的指针 [8] C语言中，指针也可以被指向一个函数，下面代码是一个指向函数的指针\nc 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 #include // 定义一个无返回值的常规函数 void fun(int a) { printf(\"Value of a is %d\\n\", a); } int main() { // fun_ptr是一个指针类型，他指向函数fun的地址 void (*fun_ptr)(int) = \u0026fun; /* 也可以写为如下代码 void (*fun_ptr)(int); fun_ptr = \u0026fun; */ // 调用指向函数的指针 (*fun_ptr)(10); return 0; } 声明指针函数函数的说明，通常情况下声明函数语法为 int foo(int); 则代表声明了一个foo函数，具有int类型参数和int类型的返回值，而在中间加一个 ”*\" 则可以表示一个指针函数的定义 int * foo(int); 这种类型是错误的。\n因为在c语言中，* 的优先级要高于 ()， 上面说到的情况则表示了声明一个foo函数，int类型的参数和 *int 类型的返回值。所以必须使用 () 改变其优先级\nc 1 int (*foo)(int); 函数指针数组 函数指针数组是指元素为函数指针的数组，有些特殊的地方是，定义时不能定义为数组指针，需要定义为函数指针，函数指针数组也可以替代switch\nc 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 #include void add(int a, int b) { printf(\"Addition is %d\\n\", a+b); } void subtract(int a, int b) { printf(\"Subtraction is %d\\n\", a-b); } void multiply(int a, int b) { printf(\"Multiplication is %d\\n\", a*b); } int main() { // fun_ptr_arr is an array of function pointers void (*fun_ptr_arr[])(int, int) = {add, subtract, multiply}; unsigned int ch, a = 15, b = 10; printf(\"Enter Choice: 0 for add, 1 for subtract and 2 \" \"for multiply\\n\"); scanf(\"%d\", \u0026ch); if (ch \u003e 2) return 0; (*fun_ptr_arr[ch])(a, b); return 0; } 关于函数指针的说明：\n普通指针指向的数据，函数指针指向的是代码 函数名代表函数的地址 函数去指不用加取址符 “\u0026”，函数指针变量调用不用加“ * ” 函数指针可以作为参数，也可以作为返回值 数组与函数 数组作为参数时：数组作为函数参数传入时，传递不再是整个数组，而是数组的第一元素的地址，也就是指针，此时不能用size()获取数组的元素，获取到的时指针类型的大小。 数组作为返回值时：不允许返回数组，返回的是数组第一个元素指针，sizeof() 查看的大小也是指针类型的大小 main函数的参数 在C语言中main()函数之前提供了一个函数 _start()，但通常情况下 main() 是作为程序执行的第一个函数。main() 函数提供了两个参数，argc 和 argv 。\nargc 命令行传入的参数数量，int类型 argv 命令行传入的实际参数，参数索引从1开始，0为程序本身名称 正常情况下声明main函数： main(int argc, char *argv[]) **argv 是 *argv[] 的另一种表现方式 main(int argc, char **argv) Notes：这里有一个比较难理解的地方就是二级指针作为形参来替换指针数组。\n由于二级指针变量存放为一个一级指针的地址，而数组名本身是数组首元素的地址，其后的每一个元素都是指针就是将首元素指针传入。由于上面讲到数组作为参数传入时传入的是指针而不是数组本身。所以 *argv[] 与 **argv 是等价的。\nReference [1] c pointer\n[2] pointer type\n[3] const pointer\n[4] pointer VS array\n[5] lvalue VS rvlaue\n[6] pointer arithmetic\n[7] pointer to pointer\n[8] function pointer in c\n","wordCount":"1779","inLanguage":"zh","datePublished":"2022-09-28T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"cylon"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/2022/09/ch05-pointer/"},"publisher":{"@type":"Organization","name":"Cylon's Collection","logo":{"@type":"ImageObject","url":"http://localhost:1313/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/><img src=http://localhost:1313/favicon.ico alt aria-label=logo height=20>Cylon's Collection</a><div class=logo-switches><button id=theme-toggle><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/archives><span>归档</span></a></li><li><a href=http://localhost:1313/tags><span>标签</span></a></li><li><a href=http://localhost:1313/search><span>搜索</span></a></li><li><a href=http://localhost:1313/about accesskey=/><span>关于</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">ch05 指针</h1><div class=post-meta><span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select:text"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select:text"/><line x1="16" y1="2" x2="16" y2="6" style="user-select:text"/><line x1="8" y1="2" x2="8" y2="6" style="user-select:text"/><line x1="3" y1="10" x2="21" y2="10" style="user-select:text"/></svg><span>2022-09-28</span></span>&nbsp;·&nbsp;<span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text" style="user-select:text"><path d="M14 2H6A2 2 0 004 4v16a2 2 0 002 2h12a2 2 0 002-2V8z" style="user-select:text"/><polyline points="14 2 14 8 20 8" style="user-select:text"/><line x1="16" y1="13" x2="8" y2="13" style="user-select:text"/><line x1="16" y1="17" x2="8" y2="17" style="user-select:text"/><polyline points="10 9 9 9 8 9" style="user-select:text"/></svg><span>1779 字</span></span>&nbsp;·&nbsp;<span class=pe-post-meta-item><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke="currentcolor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><span>9 分钟</span></span>
<span class=pe-post-meta-item>&nbsp;·&nbsp;<svg t="1714036239378" fill="currentcolor" class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="6659" width="256" height="256"><path d="M690 78.2c-18.6-18.8-49-19-67.8-.4s-19 49-.4 67.8l255.4 258.6c67.8 68.6 67.8 178.8.0 247.4L653.4 878.2c-18.6 18.8-18.4 49.2.4 67.8s49.2 18.4 67.8-.4l224-226.4c104.8-106 104.8-276.4.0-382.4L690 78.2zM485.4 101.4c-24-24-56.6-37.4-90.6-37.4H96C43 64 0 107 0 160v299c0 34 13.4 66.6 37.4 90.6l336 336c50 50 131 50 181 0l267-267c50-50 50-131 0-181l-336-336zM96 160h299c8.4.0 16.6 3.4 22.6 9.4l336 336c12.4 12.4 12.4 32.8.0 45.2l-267 267c-12.4 12.4-32.8 12.4-45.2.0l-336-336c-6-6-9.4-14.2-9.4-22.6V160zm192 128a64 64 0 10-128 0 64 64 0 10128 0z" p-id="6660"/></svg></span><ul class=pe-post-meta-item><a href=http://localhost:1313/tags/c/>#C</a></ul></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details><summary><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e6%8c%87%e9%92%88 aria-label=指针>指针</a><ul><li><a href=#%e6%8c%87%e9%92%88%e5%a3%b0%e6%98%8e-supa-href11asup aria-label="指针声明 [1]">指针声明 <sup><a href=#1>[1]</a></sup></a><li><a href=#%e6%8c%87%e9%92%88%e5%8f%98%e9%87%8f aria-label=指针变量>指针变量</a><ul><li><a href=#%e4%bf%ae%e9%a5%b0%e7%ac%a6%e8%af%b4%e6%98%8e aria-label=修饰符说明>修饰符说明</a><li><a href=#%e4%bd%bf%e7%94%a8const%e4%bf%ae%e9%a5%b0%e6%8c%87%e9%92%88-supa-href33asup aria-label="使用const修饰指针 [3]">使用const修饰指针 <sup><a href=#3>[3]</a></sup></a></ul><li><a href=#%e6%8c%87%e9%92%88%e7%9a%84%e7%b1%bb%e5%9e%8b-supa-href22asup aria-label="指针的类型 [2]">指针的类型 <sup><a href=#2>[2]</a></sup></a><ul><li><a href=#%e7%a9%ba%e6%8c%87%e9%92%88 aria-label=空指针>空指针</a><li><a href=#%e6%b3%9b%e5%9e%8b%e6%8c%87%e9%92%88 aria-label=泛型指针>泛型指针</a><li><a href=#%e9%87%8e%e6%8c%87%e9%92%88 aria-label=野指针>野指针</a><li><a href=#%e6%82%ac%e7%a9%ba%e6%8c%87%e9%92%88 aria-label=悬空指针>悬空指针</a></ul><li><a href=#%e6%8c%87%e9%92%88%e7%9a%84%e5%81%8f%e7%a7%bb%e9%87%8f aria-label=指针的偏移量>指针的偏移量</a></ul><li><a href=#%e6%8c%87%e9%92%88%e6%95%b0%e7%bb%84 aria-label=指针数组>指针数组</a><ul><li><a href=#%e4%bd%bf%e7%94%a8%e6%8c%87%e9%92%88%e8%ae%bf%e9%97%ae%e6%95%b0%e7%bb%84 aria-label=使用指针访问数组>使用指针访问数组</a><li><a href=#array-vs-pointer-supa-href44asup aria-label="Array VS Pointer [4]">Array VS Pointer <sup><a href=#4>[4]</a></sup></a><li><a href=#%e6%8c%87%e9%92%88%e8%bf%90%e7%ae%97 aria-label=指针运算>指针运算</a><ul><li><a href=#%e5%b7%a6%e5%80%bc%e5%92%8c%e5%8f%b3%e5%80%bc-supa-href55asup aria-label="左值和右值 [5]">左值和右值 <sup><a href=#5>[5]</a></sup></a><li><a href=#arithmetic-supa-href66asup aria-label="arithmetic [6]">arithmetic <sup><a href=#6>[6]</a></sup></a></ul><li><a href=#%e6%8c%87%e9%92%88%e6%95%b0%e7%bb%84-1 aria-label=指针数组>指针数组</a><li><a href=#pointer-vs-array aria-label="Pointer VS Array">Pointer VS Array</a></ul><li><a href=#%e5%a4%9a%e7%ba%a7%e6%8c%87%e9%92%88-supa-href77asup aria-label="多级指针 [7]">多级指针 <sup><a href=#7>[7]</a></sup></a><ul><li><a href=#%e6%8c%87%e9%92%88%e5%92%8c%e5%87%bd%e6%95%b0 aria-label=指针和函数>指针和函数</a><li><a href=#%e6%8c%87%e5%90%91%e6%99%ae%e9%80%9a%e6%95%b0%e6%8d%ae%e7%b1%bb%e5%9e%8b%e7%9a%84%e6%8c%87%e9%92%88 aria-label=指向普通数据类型的指针>指向普通数据类型的指针</a><li><a href=#%e6%8c%87%e5%90%91%e5%87%bd%e6%95%b0%e7%9a%84%e6%8c%87%e9%92%88--supa-href88asup aria-label="指向函数的指针 [8]">指向函数的指针 <sup><a href=#8>[8]</a></sup></a><li><a href=#%e5%87%bd%e6%95%b0%e6%8c%87%e9%92%88%e6%95%b0%e7%bb%84 aria-label=函数指针数组>函数指针数组</a><li><a href=#%e6%95%b0%e7%bb%84%e4%b8%8e%e5%87%bd%e6%95%b0 aria-label=数组与函数>数组与函数</a></ul><li><a href=#main%e5%87%bd%e6%95%b0%e7%9a%84%e5%8f%82%e6%95%b0 aria-label=main函数的参数>main函数的参数</a><li><a href=#reference aria-label=Reference>Reference</a></li></div></details></div></aside><script src=/js/pe-toc.min.445eb1bfc5e85dd13b9519fcc2a806522e9629b6224a2974052789ba00ab78af.js integrity="sha256-RF6xv8XoXdE7lRn8wqgGUi6WKbYiSil0BSeJugCreK8="></script><div class=post-content><h2 id=指针>指针<a hidden class=anchor aria-hidden=true href=#指针>#</a></h2><h3 id=指针声明-supa-href11asup>指针声明 <sup><a href=#1>[1]</a></sup><a hidden class=anchor aria-hidden=true href=#指针声明-supa-href11asup>#</a></h3><p>指针/指针变量 (<em><strong>pointer</strong></em>) 是用于存储地址的变量</p><p>使用 <code>&</code> 运算符 来访问变量的地址。例如</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%x&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><p>输出结果为 16进制的内存地址</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=mf>61f</span><span class=n>e1c</span></span></span></code></pre></td></tr></table></div></div></div></div><p>使用地址运算符 <code>*</code> 可以从变量地址中获取变量的值，这个行为被称为间接引用/解引用(<em><strong>indirection/dereferencing</strong></em>)。例如：</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=o>*</span><span class=p>(</span><span class=o>&amp;</span><span class=n>a</span><span class=p>));</span> 
</span></span><span class=line><span class=cl>   <span class=c1>// 也可以写为，因为*与&amp;优先级相同，从右到左的顺序，所以有没有()意思是相同的
</span></span></span><span class=line><span class=cl><span class=c1></span>   <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=o>*&amp;</span><span class=n>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><p>输出结果为 100</p><h3 id=指针变量>指针变量<a hidden class=anchor aria-hidden=true href=#指针变量>#</a></h3><p>指针变量是指存储一个变量的地址的变量，可以使用符号 <code>*</code> 来修饰变量，定义语法为：</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>dataType</span> <span class=o>*</span><span class=n>pointerVariableName</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>variableName</span><span class=p>;</span></span></span></code></pre></td></tr></table></div></div></div></div><p>例如，下面的两个输出结果是相同的地址</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=kt>int</span> <span class=o>*</span><span class=n>pointer</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=n>pointer</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;address of a is: %x</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span><span class=o>&amp;</span><span class=n>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl>   <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;address of pointer is: %x</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span><span class=n>pointer</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>address</span> <span class=n>of</span> <span class=n>a</span> <span class=nl>is</span><span class=p>:</span> <span class=mf>61f</span><span class=n>e14</span>
</span></span><span class=line><span class=cl><span class=n>address</span> <span class=n>of</span> <span class=n>pointer</span> <span class=nl>is</span><span class=p>:</span> <span class=mf>61f</span><span class=n>e14</span></span></span></code></pre></td></tr></table></div></div></div></div><blockquote><p>Notes：指针可以通过变量修改也可以直接通过地址进行修改，指针变量就是通过地址进行修改</p></blockquote><h4 id=修饰符说明>修饰符说明<a hidden class=anchor aria-hidden=true href=#修饰符说明>#</a></h4><table><thead><tr><th>修饰符</th><th>说明</th></tr></thead><tbody><tr><td>*</td><td>两个用途：<br>指针变量的声明<br>返回被引用变量的值</td></tr><tr><td>&</td><td>返回变量地址</td></tr></tbody></table><h4 id=使用const修饰指针-supa-href33asup>使用const修饰指针 <sup><a href=#3>[3]</a></sup><a hidden class=anchor aria-hidden=true href=#使用const修饰指针-supa-href33asup>#</a></h4><p>使用关键字 <code>const</code> 修饰的指针变量是不能改变指针变量所指向的地址的变量，通俗来讲即不能被改变值的指针变量</p><p>声明语句</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=o>&lt;</span><span class=n>type</span> <span class=n>of</span> <span class=n>pointer</span><span class=o>&gt;</span> <span class=o>*</span><span class=k>const</span> <span class=o>&lt;</span><span class=n>name</span> <span class=n>of</span> <span class=n>pointer</span><span class=o>&gt;</span><span class=p>;</span>  
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=o>*</span><span class=k>const</span> <span class=n>ptr</span><span class=p>;</span>  
</span></span></code></pre></td></tr></table></div></div></div></div><p><strong>const位置</strong>：const修饰的部分（const所在位置）不可改变</p><ul><li><p>例如 <code>const int *p;</code> 与 <code>int const *p;</code> 这里修饰的都是 <code>*p</code> 故</p><ul><li><p><code>*p</code> （变量地址）不能被改变</p></li><li><p><code>p</code> （变量值）可以被改变</p></li><li><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl>  <span class=cp>#include</span><span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>  <span class=cp>#include</span><span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>  <span class=kt>void</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>b</span> <span class=o>=</span> <span class=mi>20</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=k>const</span> <span class=o>*</span><span class=n>p</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>*</span><span class=n>p</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>b</span><span class=p>;</span> <span class=c1>// result assignment of read-only location &#39;*p&#39;
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>p</span> <span class=o>=</span> <span class=mi>30</span><span class=p>;</span> <span class=c1>// result 30
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span><span class=n>p</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div></li></ul></li><li><p><code>int * const p; </code>const在*后p前，这里修饰的都是 <code>p</code> 故</p><ul><li>p不可以被修改</li><li>*p 可以被修改</li></ul></li><li><p><code>const int *const p;</code> 这里 const 修饰 * 和 p，所以两个都不可修改</p></li></ul><blockquote><p>Notes：通常情况下常用只有第一种情况</p></blockquote><p><strong>使用场景</strong>：最为参数形参修饰该参数为只读参数，例如 printf</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=nf>printf</span> <span class=p>(</span><span class=k>const</span> <span class=kt>char</span> <span class=o>*</span><span class=n>__format</span><span class=p>,</span> <span class=p>...)</span></span></span></code></pre></td></tr></table></div></div></div></div><h3 id=指针的类型-supa-href22asup>指针的类型 <sup><a href=#2>[2]</a></sup><a hidden class=anchor aria-hidden=true href=#指针的类型-supa-href22asup>#</a></h3><p>C语言中包含多种指针类型：</p><ul><li>空指针(<em><strong>Null Pointer</strong></em>)</li><li>野指针(<em><strong>Wild Pointer</strong></em>)</li><li>悬空指针(<em><strong>Dangling pointer</strong></em>)</li><li>泛型指针(<em><strong>void Pointer</strong></em>)</li><li>一些早期Dos中的概念<ul><li>近指针(<em><strong>Near</strong></em>)：不能存储大小大于 16 位的地址</li><li>远指针(<em><strong>Far</strong></em>)：32 位大小的指针</li><li>大指针(<em><strong>Huge</strong></em>)：类似于远指针。</li></ul></li></ul><h4 id=空指针>空指针<a hidden class=anchor aria-hidden=true href=#空指针>#</a></h4><p>在声明期间将 NULL 分配给指针的指针称为 空 (<em><strong>NULL</strong></em>) 指针，例如</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=kt>int</span> <span class=o>*</span><span class=n>var</span> <span class=o>=</span> <span class=nb>NULL</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;address of var is: %p</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span><span class=n>var</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><ul><li>空指针不能解引用：NULL指针因引用是一个非法的操作，在解引用之前，必须确保它不是一个NULL指针</li><li>空指针不能拷贝内容：<code>strcpy(*p,"1111);</code></li></ul><h4 id=泛型指针>泛型指针<a hidden class=anchor aria-hidden=true href=#泛型指针>#</a></h4><p>使用 <code>void</code> 关键字声明指针变量，可以接受任意一种类型的变量地址，如果需要使用泛型指针，需要强转为对应类型才可以使用。如下示例：</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>6666</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=kt>void</span> <span class=o>*</span><span class=n>p</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;address of p is: %p</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span> <span class=n>p</span><span class=p>);</span>
</span></span><span class=line><span class=cl>   <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;value of p is: %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=o>*</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span><span class=p>)</span> <span class=n>p</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>address</span> <span class=n>of</span> <span class=n>p</span> <span class=nl>is</span><span class=p>:</span> <span class=mf>000000000061F</span><span class=n>E14</span>
</span></span><span class=line><span class=cl><span class=n>value</span> <span class=n>of</span> <span class=n>p</span> <span class=nl>is</span><span class=p>:</span> <span class=mi>6666</span></span></span></code></pre></td></tr></table></div></div></div></div><h4 id=野指针>野指针<a hidden class=anchor aria-hidden=true href=#野指针>#</a></h4><p>野指针是指，没有有效地址的空间的指针，例如声明了指针变量没有对其赋值，这种情况下会出现 <code>Segmentation fault</code> 异常。</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=kt>int</span> <span class=o>*</span><span class=n>p</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;address of p is: %p</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=o>*</span><span class=n>p</span><span class=p>);</span> 
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><p>再例如一个无效的地址空间也会发生 <code>Segmentation fault</code> 异常；例如下列赋值中，指针p赋值被视为一个内存地址，而不是变量的值，这个地址无效。</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>   <span class=kt>int</span> <span class=o>*</span><span class=n>p</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=o>*</span><span class=n>p</span> <span class=o>=</span> <span class=mi>10000</span><span class=p>;</span>
</span></span><span class=line><span class=cl>   <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;address of p is: %p</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=o>*</span><span class=n>p</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><p>野指针出现场景：</p><ul><li>指针变量声明但未初始化</li><li>指针释放后未置空</li><li>指针操作超出变量作用域</li></ul><p>避免野指针的出现：</p><ul><li>初始化置 NULL</li><li>释放后置 NULL</li></ul><h4 id=悬空指针>悬空指针<a hidden class=anchor aria-hidden=true href=#悬空指针>#</a></h4><p>悬空指针是指”已经被释放的内存“的指针变量，此时这个地址空间是无效的。如下所示</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=kt>void</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kt>int</span> <span class=o>*</span><span class=n>P</span><span class=o>=</span><span class=p>(</span><span class=kt>int</span> <span class=o>*</span><span class=p>)</span><span class=nf>malloc</span><span class=p>(</span><span class=k>sizeof</span><span class=p>(</span><span class=kt>int</span><span class=p>));</span>
</span></span><span class=line><span class=cl>  <span class=kt>int</span> <span class=n>a</span><span class=o>=</span><span class=mi>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>P</span><span class=o>=&amp;</span><span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nf>free</span><span class=p>(</span><span class=n>P</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;After deallocating its memory *p=%d&#34;</span><span class=p>,</span> <span class=o>*</span><span class=n>P</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><h3 id=指针的偏移量>指针的偏移量<a hidden class=anchor aria-hidden=true href=#指针的偏移量>#</a></h3><p>指针步长是指指针在运算是偏移多少字节</p><ul><li><p>指针+1之后跳跃的字节数取决于指针的类型，int 4, char 1, struct struct长度</p></li><li><p>指针解引用时需要转换成对应的数据类型，从而判断被解引用后的大小，<code>* (int *) p</code> 指针类型变量转换为指针int类型变量</p></li><li><p>对于结构体指针来说，offsetof函数定位属性对应的偏移量</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;stddef.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nf>offsetof</span><span class=p>(</span><span class=o>&lt;</span><span class=k>struct</span> <span class=n>struct_name</span><span class=o>&gt;</span><span class=p>,</span> <span class=o>&lt;</span><span class=n>obj_name</span><span class=o>&gt;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div></div></div></li></ul><h2 id=指针数组>指针数组<a hidden class=anchor aria-hidden=true href=#指针数组>#</a></h2><p>在C语言中 数组是由两部分组成，数组名与数组本身。</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=kt>void</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>a</span><span class=p>[</span><span class=mi>10</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>};</span>
</span></span><span class=line><span class=cl>	<span class=n>a</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=mi>20</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span> <span class=n>i</span><span class=o>&lt;</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>a</span><span class=p>)</span> <span class=o>/</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>a</span><span class=p>[</span><span class=mi>0</span><span class=p>]);</span> <span class=n>i</span><span class=o>++</span><span class=p>){</span>
</span></span><span class=line><span class=cl>		<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span><span class=n>a</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;arr %p = &amp;arr %p&#34;</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>a</span><span class=p>[</span><span class=mi>0</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>   
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><p>上面例子中，变量a是一个数组，而变量a代表的是一个指向该数组第一个元素的地址，<code>a=&amp;a[0]</code> ，这是一个const修饰的指针是不可以被改变的。</p><p>可以看到变量a和 <code>&amp;a[0]</code> 值是相同的，而一个const修饰的指针变量是不可改变的，故a不能被赋值，下列代码是不合法的。总结为：<strong>不允许将任何地址分配给数组变量</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=kt>void</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>a</span><span class=p>[</span><span class=mi>10</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>};</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>b</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>};</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>a</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>a</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>c</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span> <span class=n>i</span><span class=o>&lt;</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>a</span><span class=p>)</span> <span class=o>/</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>a</span><span class=p>[</span><span class=mi>0</span><span class=p>]);</span> <span class=n>i</span><span class=o>++</span><span class=p>){</span>
</span></span><span class=line><span class=cl>		<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span><span class=n>a</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;arr %p = &amp;arr %p&#34;</span><span class=p>,</span> <span class=n>a</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>a</span><span class=p>[</span><span class=mi>0</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>   
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><h3 id=使用指针访问数组>使用指针访问数组<a hidden class=anchor aria-hidden=true href=#使用指针访问数组>#</a></h3><p>上面知道了，数组变量指向的是数组的起始元素（第一个元素）的地址指针，那么通过指针可以对数组进行访问。</p><p>因为 <code>a = &amp;a[0]</code> 那么 <code>a[0] = *a</code>，由此可推导出下列公式：</p><ul><li><code>&amp;a[1] = a+1</code> （取数组元素的地址） 那么 <code>a[1] = *(a+1)</code> （取数组元素的值）</li><li><code>&amp;a[2] = a+2</code> 那么 <code>a[2] = *(a+2)</code></li></ul><p>这种情况下数组的访问就有四种方法</p><h3 id=array-vs-pointer-supa-href44asup>Array VS Pointer <sup><a href=#4>[4]</a></sup><a hidden class=anchor aria-hidden=true href=#array-vs-pointer-supa-href44asup>#</a></h3><ul><li>数组名是常量，指针是变量</li><li>sizeof(array) 得到的是数组实际占用内存空间的字节数，sizeof(pointer) 是4/8 取决于操作系统</li></ul><h3 id=指针运算>指针运算<a hidden class=anchor aria-hidden=true href=#指针运算>#</a></h3><h4 id=左值和右值-supa-href55asup>左值和右值 <sup><a href=#5>[5]</a></sup><a hidden class=anchor aria-hidden=true href=#左值和右值-supa-href55asup>#</a></h4><p>了解对于指针运算前，需要对左值(<em><strong>lvalue</strong></em>)和右值(<em><strong>rvalue</strong></em>)进行了解</p><ul><li>左值：通常来说是在占有内存地址（即具有地址）的对象<ul><li>具有存储数据的内力，例如变量</li><li>不能是函数，表达式，或常量</li><li>综合来说，左值可以是以下几种：<ul><li>任何类型的变量：int, float, pointer, struct等</li><li>数组的下标表达式，如a[1]</li><li>括号内的表达式（指针）</li><li>指针的间接引用</li><li>常量（不可改变的左值）</li><li>通过指针访问对象属性或成员 (-> or .)</li></ul></li></ul></li><li>右值：在内存中没有占有内存地址的对象<ul><li>返回不可改变的表达式或值，例如a+b是一个常量，函数运行结果是一个右值</li></ul></li></ul><p><strong>左值的示例</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=kt>void</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>	
</span></span><span class=line><span class=cl>	<span class=c1>// 声明变量a为int类型
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kt>int</span> <span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=c1>// a是一个左值，引用对象为int
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=n>a</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=c1>// 左值a出现在右边的场景
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kt>int</span> <span class=n>b</span> <span class=o>=</span> <span class=n>a</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=c1>// 非法，a是左值
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=mi>9</span> <span class=o>=</span> <span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// 左值，*p是指针，p就是值，*p+4是后面一个int类型的地址，是左值
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=kt>int</span> <span class=o>*</span><span class=n>p</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=n>p</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=c1>// 这里实际上是指针运算，p+0为自己，p存储指针 *p为值，那么a=10000,p=10000
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=o>*</span><span class=p>(</span><span class=n>p</span><span class=o>+</span><span class=mi>0</span><span class=p>)</span> <span class=o>=</span> <span class=mi>10000</span><span class=p>;</span>   
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%p</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span><span class=n>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%p</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span><span class=o>*</span><span class=n>p</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span><span class=n>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;%d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span><span class=o>*</span><span class=n>p</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><p><strong>右值的示例</strong></p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=c1>// 声明变量a b
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>1</span><span class=p>,</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// 非法，a+1为常量，不是左值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>a</span> <span class=o>+</span> <span class=mi>1</span> <span class=o>=</span> <span class=n>b</span><span class=p>;</span> 
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl><span class=c1>// 声明指针变量 p q
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=o>*</span><span class=n>p</span><span class=p>,</span> <span class=o>*</span><span class=n>q</span><span class=p>;</span> <span class=c1>// *p, *q 为左值
</span></span></span><span class=line><span class=cl><span class=c1></span> 
</span></span><span class=line><span class=cl><span class=o>*</span><span class=n>p</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=c1>// 合法，左值可以赋值
</span></span></span><span class=line><span class=cl><span class=c1></span> 
</span></span><span class=line><span class=cl><span class=c1>// 非法 - &#34;p + 2&#34; 是右值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>p</span> <span class=o>+</span> <span class=mi>2</span> <span class=o>=</span> <span class=mi>18</span><span class=p>;</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl><span class=n>q</span> <span class=o>=</span> <span class=n>p</span> <span class=o>+</span> <span class=mi>5</span><span class=p>;</span> <span class=c1>// &#34;p + 5&#34; 是右值，合法
</span></span></span><span class=line><span class=cl><span class=c1></span> 
</span></span><span class=line><span class=cl><span class=c1>// 解引用表达式是左值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>*</span><span class=p>(</span><span class=n>p</span> <span class=o>+</span> <span class=mi>2</span><span class=p>)</span> <span class=o>=</span> <span class=mi>18</span><span class=p>;</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl><span class=n>p</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=n>arr</span><span class=p>[</span><span class=mi>20</span><span class=p>];</span> <span class=c1>// 数组元素访问arr[12] = *(arr+12) 所以是左值有效
</span></span></span><span class=line><span class=cl><span class=c1></span> 
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=n>S</span> <span class=p>{</span> <span class=kt>int</span> <span class=n>m</span><span class=p>;</span> <span class=p>};</span>
</span></span><span class=line><span class=cl> 
</span></span><span class=line><span class=cl><span class=k>struct</span> <span class=n>S</span> <span class=n>obj</span><span class=p>;</span> <span class=c1>// obj and obj.m are lvalues
</span></span></span><span class=line><span class=cl><span class=c1></span> 
</span></span><span class=line><span class=cl><span class=c1>// ptr-&gt; 等于  (*ptr).m 是左值有效
</span></span></span></code></pre></td></tr></table></div></div></div></div><p>一元表达式需要有左值，当a是左值&amp;a才生效，12本身是一个右值，不能&amp;12</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=n>a</span><span class=p>,</span> <span class=o>*</span><span class=n>p</span><span class=p>;</span> <span class=c1>// a 和 *p都是左值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=n>p</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>a</span><span class=p>;</span> <span class=c1>// 合法，&amp;a是常量为右值，p是左值
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=o>&amp;</span><span class=n>a</span> <span class=o>=</span> <span class=n>p</span><span class=p>;</span> <span class=c1>// 缺少左值，非法
</span></span></span></code></pre></td></tr></table></div></div></div></div><p>三元表达式是一个右值（C++是左值）</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=p>(</span>  <span class=n>x</span> <span class=o>&lt;</span> <span class=n>y</span> <span class=o>?</span> <span class=nl>y</span> <span class=p>:</span> <span class=n>x</span><span class=p>)</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span> <span class=c1>// c无效，c++有效
</span></span></span></code></pre></td></tr></table></div></div></div></div><p><strong>左值 VS 右值</strong></p><ul><li>左值为内存中可识别的对象，右值为一个常量（广义上，不是const）</li><li>左值可以在左边和右边，右值必须在右边</li><li>右值必须有左值才生效</li><li>指针运算可左可右，变量运算是右值</li></ul><h4 id=arithmetic-supa-href66asup>arithmetic <sup><a href=#6>[6]</a></sup><a hidden class=anchor aria-hidden=true href=#arithmetic-supa-href66asup>#</a></h4><p>C语言中，指针支持四种算术运算符，吧地址当作数值进行算数运算</p><table><thead><tr><th>运算符</th><th>说明</th></tr></thead><tbody><tr><td>=</td><td>可以将值赋值给指针</td></tr><tr><td>+</td><td>从指针加整数值以指向不同的内存位置。</td></tr><tr><td>-</td><td>从指针中减去整数值以指向不同的内存位置</td></tr><tr><td>比较运算（==, !=, &lt;, >, &lt;= , >=）</td><td>仅比较两个指针地址，例如<br>pointer == NULL</td></tr><tr><td>++</td><td>指针使用递增运算符将向前位移一位</td></tr><tr><td>&ndash;</td><td>指针使用递减运算符将向后位移一位</td></tr></tbody></table><ul><li>当对指针变量进行递增和递减操作时，会改变指针变量本身所在地址空间</li><li>当对指针变量进行+-运算时，不会改变指针变量本身</li></ul><h3 id=指针数组-1>指针数组<a hidden class=anchor aria-hidden=true href=#指针数组-1>#</a></h3><p>指针数组是指数组存储的内容是指针，即数组内所有的元素都是指针</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=kt>void</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>	
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>b</span> <span class=o>=</span> <span class=mi>20</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>c</span> <span class=o>=</span> <span class=mi>30</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=o>*</span><span class=n>arr</span><span class=p>[]</span> <span class=o>=</span> <span class=p>{</span><span class=o>&amp;</span><span class=n>a</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>b</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>c</span><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><p>指针数组本质也是一个多级指针，例如一个2D数组每行(<em><strong>rows</strong></em>) 存储的值是一列(<em><strong>colums</strong></em>)的地址</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span><span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=kt>void</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>	
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>a</span><span class=p>[]</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>10</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>b</span><span class=p>[]</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>20</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=n>c</span><span class=p>[]</span> <span class=o>=</span> <span class=p>{</span> <span class=mi>30</span> <span class=p>};</span>
</span></span><span class=line><span class=cl>	<span class=kt>int</span> <span class=o>*</span><span class=n>arr</span><span class=p>[]</span> <span class=o>=</span> <span class=p>{</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>,</span> <span class=n>c</span><span class=p>};</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><h3 id=pointer-vs-array>Pointer VS Array<a hidden class=anchor aria-hidden=true href=#pointer-vs-array>#</a></h3><ul><li>sizeof<ul><li><code>sizeof(array)</code> 返回数组中所有元素占用内存的大小</li><li><code>sizeof(pointer)</code> 只返回指针变量本身用内存的大小</li></ul></li><li>&运算符<ul><li>数组名是 <code>&amp;array[0]</code> 的别名，返回数组中第一个元素的地址</li><li><code>&amp;pointer</code> 返回指针的地址</li></ul></li><li>指针变量可以赋值，而数组变量不可以</li><li>数组是收集了相同类型元素的集合，而指针是一个存储地址的变量</li></ul><h2 id=多级指针-supa-href77asup>多级指针 <sup><a href=#7>[7]</a></sup><a hidden class=anchor aria-hidden=true href=#多级指针-supa-href77asup>#</a></h2><p>一个指针用于存储变量的地址，而另一个指针用于存储第一个指针的地址，这种指针被称为多级指针 (<em><strong>Multi-Pointer or Pointer to Pointer</strong></em>)</p><p>声明多级指针必须在指针变量名称前多家一个 ”*“</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=o>**</span><span class=n>p</span><span class=p>;</span></span></span></code></pre></td></tr></table></div></div></div></div><p>通过示例更好的了解多级指针</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>  
</span></span><span class=line><span class=cl><span class=c1>// C program to demonstrate pointer to pointer
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>var</span> <span class=o>=</span> <span class=mi>123</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=c1>// pointer for var
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=o>*</span><span class=n>ptr1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=c1>// double pointer for ptr2
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=o>**</span><span class=n>ptr2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// third pointer for ptr2
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=o>***</span><span class=n>ptr3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=c1>// storing address of var in ptr1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>ptr1</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>var</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Storing address of ptr2 in ptr1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>ptr2</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>ptr1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=c1>// Storing address of ptr3 in ptr2
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=n>ptr3</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>ptr2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>    <span class=c1>// Displaying value of var using
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// both single and double pointers
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Value of var = %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>var</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Value of var using single pointer = %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=o>*</span><span class=n>ptr1</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Value of var using double pointer = %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=o>**</span><span class=n>ptr2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Value of var using third pointer = %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span>  <span class=o>***</span><span class=n>ptr3</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>  	<span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><p>输出结构</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=n>Value</span> <span class=n>of</span> <span class=n>var</span> <span class=o>=</span> <span class=mi>123</span>
</span></span><span class=line><span class=cl><span class=n>Value</span> <span class=n>of</span> <span class=n>var</span> <span class=n>using</span> <span class=n>single</span> <span class=n>pointer</span> <span class=o>=</span> <span class=mi>123</span>
</span></span><span class=line><span class=cl><span class=n>Value</span> <span class=n>of</span> <span class=n>var</span> <span class=n>using</span> <span class=kt>double</span> <span class=n>pointer</span> <span class=o>=</span> <span class=mi>123</span>
</span></span><span class=line><span class=cl><span class=n>Value</span> <span class=n>of</span> <span class=n>var</span> <span class=n>using</span> <span class=n>third</span> <span class=n>pointer</span> <span class=o>=</span> <span class=mi>123</span></span></span></code></pre></td></tr></table></div></div></div></div><p>Note：</p><ul><li>多级指针，不能跨越定义，即二级指针必须拥有一级指针才可以</li><li>此时的 <code>*ptr</code> 可以是左值或右值<ul><li>作为左值时，存储数据到该变量存储的地址空间内</li><li>作为右值时，取出该空间内的内容</li></ul></li></ul><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>  
</span></span><span class=line><span class=cl><span class=c1>// C program to demonstrate pointer to pointer
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>var</span> <span class=o>=</span> <span class=mi>123</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=c1>// pointer for var
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=o>*</span><span class=n>ptr1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=c1>// double pointer for ptr2
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=o>**</span><span class=n>ptr2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1>// third pointer for ptr2
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>int</span> <span class=o>***</span><span class=n>ptr3</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=c1>// storing address of var in ptr1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>ptr1</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>var</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Storing address of ptr2 in ptr1
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>ptr2</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>ptr1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=c1>// Storing address of ptr3 in ptr2
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=n>ptr3</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>ptr2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      
</span></span><span class=line><span class=cl>    <span class=c1>// Displaying value of var using
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=c1>// both single and double pointers
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=o>***</span><span class=n>ptr3</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;l-value test, the result of value = %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>var</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;l-value test, the result of ptr1 = %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span>  <span class=o>*</span><span class=n>ptr1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;l-value test, the result of ptr2 = %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span>  <span class=o>**</span><span class=n>ptr2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;l-value test, the result of ptr3 = %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span>  <span class=o>***</span><span class=n>ptr3</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=n>var</span> <span class=o>=</span> <span class=p>(</span><span class=o>***</span><span class=n>ptr3</span><span class=o>+</span><span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=nf>printf</span><span class=p>(</span><span class=s>&#34;r-value test, the result of value = %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>var</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><p>输出结果为</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>bash</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>l-value test, the result of <span class=nv>value</span> <span class=o>=</span> <span class=m>100</span>
</span></span><span class=line><span class=cl>l-value test, the result of <span class=nv>ptr1</span> <span class=o>=</span> <span class=m>100</span>
</span></span><span class=line><span class=cl>l-value test, the result of <span class=nv>ptr2</span> <span class=o>=</span> <span class=m>100</span>
</span></span><span class=line><span class=cl>l-value test, the result of <span class=nv>ptr3</span> <span class=o>=</span> <span class=m>100</span>
</span></span><span class=line><span class=cl>r-value test, the result of <span class=nv>value</span> <span class=o>=</span> <span class=m>101</span></span></span></code></pre></td></tr></table></div></div></div></div><h3 id=指针和函数>指针和函数<a hidden class=anchor aria-hidden=true href=#指针和函数>#</a></h3><h3 id=指向普通数据类型的指针>指向普通数据类型的指针<a hidden class=anchor aria-hidden=true href=#指向普通数据类型的指针>#</a></h3><p>指针可以被当作函数参数传递，会改变原有的变量值</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=kt>void</span> <span class=nf>swap</span><span class=p>(</span><span class=kt>int</span> <span class=o>*</span><span class=n>n1</span><span class=p>,</span> <span class=kt>int</span> <span class=o>*</span><span class=n>n2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>num1</span> <span class=o>=</span> <span class=mi>5</span><span class=p>,</span> <span class=n>num2</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1>// address of num1 and num2 is passed
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>swap</span><span class=p>(</span> <span class=o>&amp;</span><span class=n>num1</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>num2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;num1 = %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>num1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;num2 = %d&#34;</span><span class=p>,</span> <span class=n>num2</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>swap</span><span class=p>(</span><span class=kt>int</span><span class=o>*</span> <span class=n>n1</span><span class=p>,</span> <span class=kt>int</span><span class=o>*</span> <span class=n>n2</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>temp</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=n>temp</span> <span class=o>=</span> <span class=o>*</span><span class=n>n1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>*</span><span class=n>n1</span> <span class=o>=</span> <span class=o>*</span><span class=n>n2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>*</span><span class=n>n2</span> <span class=o>=</span> <span class=n>temp</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><h3 id=指向函数的指针--supa-href88asup>指向函数的指针 <sup><a href=#8>[8]</a></sup><a hidden class=anchor aria-hidden=true href=#指向函数的指针--supa-href88asup>#</a></h3><p>C语言中，指针也可以被指向一个函数，下面代码是一个指向函数的指针</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1>// 定义一个无返回值的常规函数
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kt>void</span> <span class=nf>fun</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Value of a is %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>a</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// fun_ptr是一个指针类型，他指向函数fun的地址
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>void</span> <span class=p>(</span><span class=o>*</span><span class=n>fun_ptr</span><span class=p>)(</span><span class=kt>int</span><span class=p>)</span> <span class=o>=</span> <span class=o>&amp;</span><span class=n>fun</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=cm>/* 也可以写为如下代码
</span></span></span><span class=line><span class=cl><span class=cm>       void (*fun_ptr)(int);
</span></span></span><span class=line><span class=cl><span class=cm>       fun_ptr = &amp;fun; 
</span></span></span><span class=line><span class=cl><span class=cm>    */</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=c1>// 调用指向函数的指针
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>(</span><span class=o>*</span><span class=n>fun_ptr</span><span class=p>)(</span><span class=mi>10</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><p>声明指针函数函数的说明，通常情况下声明函数语法为 <code>int foo(int);</code> 则代表声明了一个foo函数，具有int类型参数和int类型的返回值，而在中间加一个 ”*" 则可以表示一个指针函数的定义 <code>int * foo(int);</code> 这种类型是错误的。</p><p>因为在c语言中，<code>*</code> 的优先级要高于 <code>()</code>， 上面说到的情况则表示了声明一个foo函数，int类型的参数和 *int 类型的返回值。所以必须使用 () 改变其优先级</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=kt>int</span> <span class=p>(</span><span class=o>*</span><span class=n>foo</span><span class=p>)(</span><span class=kt>int</span><span class=p>);</span></span></span></code></pre></td></tr></table></div></div></div></div><h3 id=函数指针数组>函数指针数组<a hidden class=anchor aria-hidden=true href=#函数指针数组>#</a></h3><p>函数指针数组是指元素为函数指针的数组，有些特殊的地方是，定义时不能定义为数组指针，需要定义为函数指针，函数指针数组也可以替代switch</p><div class="pe-code-block-wrap pe-code-details open scrollable"><div class="pe-code-block-header pe-code-details-summary"><div class=pe-code-block-header-left><i class="arrow fas fa-chevron-right fa-fw pe-code-details-icon" aria-hidden=true></i>
<span>c</span></div><div class=pe-code-block-header-center><span></span></div><div class=pe-code-block-header-right><i class="fas fa-ellipsis-h fa-fw" aria-hidden=true></i>
<button class=pe-code-copy-button><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" class="pe-icon"><path fill="currentcolor" fill-rule="evenodd" d="M7 5a3 3 0 013-3h9a3 3 0 013 3v9a3 3 0 01-3 3h-2v2a3 3 0 01-3 3H5a3 3 0 01-3-3v-9a3 3 0 013-3h2zm2 2h5a3 3 0 013 3v5h2a1 1 0 001-1V5a1 1 0 00-1-1h-9A1 1 0 009 5zM5 9a1 1 0 00-1 1v9a1 1 0 001 1h9a1 1 0 001-1v-9a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button></div></div><div class="pe-code-details-content scrollable"><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=kt>void</span> <span class=nf>add</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>,</span> <span class=kt>int</span> <span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Addition is %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>a</span><span class=o>+</span><span class=n>b</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>subtract</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>,</span> <span class=kt>int</span> <span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Subtraction is %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>a</span><span class=o>-</span><span class=n>b</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>multiply</span><span class=p>(</span><span class=kt>int</span> <span class=n>a</span><span class=p>,</span> <span class=kt>int</span> <span class=n>b</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Multiplication is %d</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>a</span><span class=o>*</span><span class=n>b</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// fun_ptr_arr is an array of function pointers
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=kt>void</span> <span class=p>(</span><span class=o>*</span><span class=n>fun_ptr_arr</span><span class=p>[])(</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=p>)</span> <span class=o>=</span> <span class=p>{</span><span class=n>add</span><span class=p>,</span> <span class=n>subtract</span><span class=p>,</span> <span class=n>multiply</span><span class=p>};</span>
</span></span><span class=line><span class=cl>    <span class=kt>unsigned</span> <span class=kt>int</span> <span class=n>ch</span><span class=p>,</span> <span class=n>a</span> <span class=o>=</span> <span class=mi>15</span><span class=p>,</span> <span class=n>b</span> <span class=o>=</span> <span class=mi>10</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=nf>printf</span><span class=p>(</span><span class=s>&#34;Enter Choice: 0 for add, 1 for subtract and 2 &#34;</span>
</span></span><span class=line><span class=cl>            <span class=s>&#34;for multiply</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=nf>scanf</span><span class=p>(</span><span class=s>&#34;%d&#34;</span><span class=p>,</span> <span class=o>&amp;</span><span class=n>ch</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=n>ch</span> <span class=o>&gt;</span> <span class=mi>2</span><span class=p>)</span> <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=p>(</span><span class=o>*</span><span class=n>fun_ptr_arr</span><span class=p>[</span><span class=n>ch</span><span class=p>])(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div></div></div><p>关于函数指针的说明：</p><ul><li>普通指针指向的数据，函数指针指向的是代码</li><li>函数名代表函数的地址</li><li>函数去指不用加取址符 “&”，函数指针变量调用不用加“ * ”</li><li>函数指针可以作为参数，也可以作为返回值</li></ul><h3 id=数组与函数>数组与函数<a hidden class=anchor aria-hidden=true href=#数组与函数>#</a></h3><ul><li><strong>数组作为参数时</strong>：数组作为函数参数传入时，传递不再是整个数组，而是数组的第一元素的地址，也就是指针，此时不能用size()获取数组的元素，获取到的时指针类型的大小。</li><li><strong>数组作为返回值时</strong>：不允许返回数组，返回的是数组第一个元素指针，sizeof() 查看的大小也是指针类型的大小</li></ul><h2 id=main函数的参数>main函数的参数<a hidden class=anchor aria-hidden=true href=#main函数的参数>#</a></h2><p>在C语言中main()函数之前提供了一个函数 <code>_start()</code>，但通常情况下 main() 是作为程序执行的第一个函数。main() 函数提供了两个参数，<em><strong>argc</strong></em> 和 <em><strong>argv</strong></em> 。</p><ul><li><em><strong>argc</strong></em> 命令行传入的参数数量，int类型</li><li><em><strong>argv</strong></em> 命令行传入的实际参数，参数索引从1开始，0为程序本身名称<ul><li>正常情况下声明main函数：<code> main(int argc, char *argv[])</code></li><li><code>**argv</code> 是 <code>*argv[]</code> 的另一种表现方式 <code>main(int argc, char **argv)</code></li></ul></li></ul><blockquote><p>Notes：这里有一个比较难理解的地方就是二级指针作为形参来替换指针数组。</p><p>由于二级指针变量存放为一个一级指针的地址，而数组名本身是数组首元素的地址，其后的每一个元素都是指针就是将首元素指针传入。由于上面讲到数组作为参数传入时传入的是指针而不是数组本身。所以 *argv[] 与 **argv 是等价的。</p></blockquote><h2 id=reference>Reference<a hidden class=anchor aria-hidden=true href=#reference>#</a></h2><blockquote><p><sup id=1>[1]</sup> <a href=https://www.geeksforgeeks.org/pointers-in-c-and-c-set-1-introduction-arithmetic-and-array/ target=_blank rel="noopener nofollow noreferrer">c pointer</a></p><p><sup id=2>[2]</sup> <a href=https://www.guru99.com/c-pointers.html target=_blank rel="noopener nofollow noreferrer">pointer type</a></p><p><sup id=3>[3]</sup> <a href=https://www.javatpoint.com/const-pointer-in-c target=_blank rel="noopener nofollow noreferrer">const pointer</a></p><p><sup id=4>[4]</sup> <a href=https://www.freecodecamp.org/news/pointers-in-c-are-not-as-difficult-as-you-think/#1-what-exactly-are-pointers target=_blank rel="noopener nofollow noreferrer">pointer VS array</a></p><p><sup id=5>[5]</sup> <a href=https://www.geeksforgeeks.org/lvalue-and-rvalue-in-c-language/ target=_blank rel="noopener nofollow noreferrer">lvalue VS rvlaue</a></p><p><sup id=6>[6]</sup> <a href=https://aticleworld.com/pointer-arithmetic/ target=_blank rel="noopener nofollow noreferrer">pointer arithmetic</a></p><p><sup id=7>[7]</sup> <a href=https://www.geeksforgeeks.org/double-pointer-pointer-pointer-c/ target=_blank rel="noopener nofollow noreferrer">pointer to pointer</a></p><p><sup id=8>[8]</sup> <a href=https://www.geeksforgeeks.org/function-pointer-in-c/ target=_blank rel="noopener nofollow noreferrer">function pointer in c</a></p></blockquote></div><div class=pe-copyright><hr><blockquote><p>本文为原创内容，版权归作者所有。如需转载，请在文章中声明本文标题及链接。</p><p>文章标题：ch05 指针</p><p>文章链接：<a href=http://localhost:1313/2022/09/ch05-pointer/ target=_blank>http://localhost:1313/2022/09/ch05-pointer/</a></p><p>许可协议：<a href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></p></blockquote></div><div class=comments-separator></div><h3 class=relatedContentTitle>相关阅读</h3><ul class=relatedContent><li><a href=/2022/09/ch0-ide/><span>ch0 ide</span></a></li><li><a href=/2022/09/ch01-parmeter-and-data-structrue/><span>ch01 变量和数据类型</span></a></li><li><a href=/2022/09/ch02-control-statements-and-format/><span>ch02 格式化与流程控制</span></a></li><li><a href=/2022/09/ch03-array/><span>ch03 数组</span></a></li><li><a href=/2022/09/ch04-function/><span>ch04 函数</span></a></li></ul><div class=comments-separator></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/c/>C</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/2022/09/ch04-function/><span class=title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-left" style="user-select:text"><line x1="19" y1="12" x2="5" y2="12" style="user-select:text"/><polyline points="12 19 5 12 12 5" style="user-select:text"/></polyline></svg>&nbsp;</span>
<span>ch04 函数</span>
</a><a class=next href=http://localhost:1313/2022/09/ch06-memory-layout/><span class=title></span>
<span>ch06 内存布局&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-arrow-right" style="user-select:text"><line x1="5" y1="12" x2="19" y2="12" style="user-select:text"/><polyline points="12 5 19 12 12 19" style="user-select:text"/></svg></span></a></nav></footer><div class=pe-comments-decoration><p class=pe-comments-title></p><p class=pe-comments-subtitle></p></div><div id=pe-comments></div><script src=/js/pe-go-comment.min.86a214102576ba5f9b7bdc29eed8d58dd56e34aef80b3c65c73ea9cc88443696.js integrity="sha256-hqIUECV2ul+be9wp7tjVjdVuNK74Czxlxz6pzIhENpY="></script><script>const getStoredTheme=()=>localStorage.getItem("pref-theme")==="dark"?"dark":"light",setGiscusTheme=()=>{const e=e=>{const t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:e},"https://giscus.app")};e({setConfig:{theme:getStoredTheme()}})};document.addEventListener("DOMContentLoaded",()=>{const s={src:"https://giscus.app/client.js","data-repo":"cylonchau/cylonchau.github.io","data-repo-id":"R_kgDOIRlNSQ","data-category":"Announcements","data-category-id":"DIC_kwDOIRlNSc4CXy1U","data-mapping":"pathname","data-term":"posts/ch05 pointer","data-strict":"0","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"top","data-theme":getStoredTheme(),"data-lang":"zh-TW","data-loading":"lazy",crossorigin:"anonymous",async:""},e=document.createElement("script");Object.entries(s).forEach(([t,n])=>e.setAttribute(t,n)),document.querySelector("#pe-comments").appendChild(e);const t=document.querySelector("#theme-toggle");t&&t.addEventListener("click",setGiscusTheme);const n=document.querySelector("#theme-toggle-float");n&&n.addEventListener("click",setGiscusTheme)})</script></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>Cylon's Collection</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> on
<a href=https://pages.github.com/ rel=noopener target=_blank>GitHub Pages</a> & Theme
        <a href=https://github.com/tofuwine/PaperMod-PE rel=noopener target=_blank>PaperMod-PE</a></span></footer><div class=pe-right-sidebar><a href=javascript:void(0); id=theme-toggle-float class=pe-float-btn><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</a><a href=#top class=pe-float-btn id=top-link><span id=pe-read-progress></span></a></div><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>